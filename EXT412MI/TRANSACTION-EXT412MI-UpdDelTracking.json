{"programModules":{"EXT412MI":{"program":"EXT412MI","triggers":{},"transactions":{"UpdDelTracking":{"sourceUuid":"698344d4-4922-44bc-ad10-23f4a0f847d3","name":"UpdDelTracking","program":"EXT412MI","description":"Update Delivery Tracking","active":true,"multi":false,"modified":1694171135486,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"SHDT","description":"Shipment Date","length":25,"mandatory":true,"type":"A"},{"name":"CUOR","description":"Purchase Order Number","length":40,"mandatory":true,"type":"A"},{"name":"ORNO","description":"Customer's Order Number","length":10,"mandatory":true,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Customer Number","length":10,"mandatory":false,"type":"A"},{"name":"MAWB","description":"Group Number","length":32,"mandatory":false,"type":"A"},{"name":"ETRN","description":"External Tracking Number","length":30,"mandatory":false,"type":"A"},{"name":"CNUM","description":"Master Carton Number","length":64,"mandatory":false,"type":"A"},{"name":"BTRN","description":"Tracking Number","length":64,"mandatory":false,"type":"A"},{"name":"RESP","description":"Responsible","length":32,"mandatory":false,"type":"A"},{"name":"CSCD","description":"Country","length":3,"mandatory":false,"type":"A"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"698344d4-4922-44bc-ad10-23f4a0f847d3":{"uuid":"698344d4-4922-44bc-ad10-23f4a0f847d3","updated":1695926200251,"updatedBy":"M3CONSADMX","created":1693997185678,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20230719154728.6","language":"GROOVY","codeHash":"715AFF26CE7A938CE2E5D727C7190A62E86525ADCAE66D1A60196608F0B26C96","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVEhQRCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDQxMk1JLlVwZERlbFRyYWNraW5nCiAqIERlc2NyaXB0aW9uOiBVcGRhdGluZyByZWNvcmRzIHRvIEVYVEhQRCB0YWJsZQogKiBEYXRlICAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24KICoyMDIzMDkwNiAgU3VyaXlhTkBmb3J0dWRlLmNvICAgIFVwZGF0aW5nIHJlY29yZHMgdG8gRVhUSFBEIHRhYmxlCiAqCiAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgVXBkRGVsVHJhY2tpbmcgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5CgogIHByaXZhdGUgU3RyaW5nIGlTSERULCBpQ1VPUiwgaU9STk8sIGlXSExPLCBpQ1VOTywgaU1BV0IsIGlFVFJOLCBpQ05VTSwgaUJUUk4sIGlSRVNQLCBpQ1NDRAogIHByaXZhdGUgaW50IGlDT05PCiAgcHJpdmF0ZSBsb25nIGlETElYCiAgcHJpdmF0ZSB2YWxpZElucHV0ID0gdHJ1ZQogIAogIHB1YmxpYyBVcGREZWxUcmFja2luZyhNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFV0aWxpdHlBUEkgdXRpbGl0eSkgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaVNIRFQgPSAobWkuaW5EYXRhLmdldCgiU0hEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU0hEVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTSERUIikKICAgIGlDVU9SID0gKG1pLmluRGF0YS5nZXQoIkNVT1IiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVT1IiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VPUiIpCiAgICBpT1JOTyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKQogICAgaVdITE8gPSAobWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJXSExPIikKICAgIGlDVU5PID0gKG1pLmluRGF0YS5nZXQoIkNVTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VOTyIpCiAgICBpTUFXQiA9IChtaS5pbkRhdGEuZ2V0KCJNQVdCIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNQVdCIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk1BV0IiKQogICAgaUVUUk4gPSAobWkuaW5EYXRhLmdldCgiRVRSTiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRVRSTiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJFVFJOIikKICAgIGlDTlVNID0gKG1pLmluRGF0YS5nZXQoIkNOVU0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNOVU0iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ05VTSIpCiAgICBpQlRSTiA9IChtaS5pbkRhdGEuZ2V0KCJCVFJOIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJCVFJOIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkJUUk4iKQogICAgaVJFU1AgPSAobWkuaW5EYXRhLmdldCgiUkVTUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUkVTUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJSRVNQIikKICAgIGlDU0NEID0gKG1pLmluRGF0YS5nZXQoIkNTQ0QiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNTQ0QiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1NDRCIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaURMSVggPSAobWkuaW5EYXRhLmdldCgiRExJWCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRExJWCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkRMSVgiKSBhcyBMb25nCgogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZih2YWxpZElucHV0KQogICAgewogICAgICB1cGRhdGVSZWNvcmQoKQogICAgfQogICAgCiAgfQoKICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdmFsaWRhdGVJbnB1dCgpIHsKICAKICAgIC8vVmFsaWRhdGUgQ29tcGFueSBOdW1iZXIKICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKV0KICAgIGRlZiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcGFueSBOdW1iZXIgIiArIGlDT05PKQogICAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICAgCgogICAgICAvL1ZhbGlkYXRlIE9yZGVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIk9STk8iOiBpT1JOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5PUk5PID09IG51bGwpIHsKICAgICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE9yZGVyIE51bWJlciAiICsgaU9STk8pCiAgICAgICAgICAgIHZhbGlkSW5wdXQ9ZmFsc2UKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICB9CiAgICAgIH0KICAgIAogICAgICBtaUNhbGxlci5jYWxsKCJPSVMxMDBNSSIsICJHZXRIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIAogICAgaWYoIWlDVU5PLnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgQ3VzdG9tZXIgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCJDVU5PIjppQ1VOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5DVU5PID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ3VzdG9tZXIgTnVtYmVyICIgKyBpQ1VOTykKICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjEwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KICAgIAogICAgICAvL1ZhbGlkYXRlIERlbGl2ZXJ5IE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiRExJWCI6aURMSVgudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgICBpZiAocmVzcG9uc2UuRExJWCA9PSBudWxsKSB7CiAgICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIERlbGl2ZXJ5IE51bWJlciAiICsgaURMSVgpCiAgICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1XUzQxME1JIiwgIkdldEhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgCiAgICAKICAgIGlmKCFpV0hMTy50cmltKCkuaXNFbXB0eSgpKQogICAgewogICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIldITE8iOmlXSExPLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgaWYgKHJlc3BvbnNlLldITE8gPT0gbnVsbCkgewogICAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBpV0hMTykKICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAwNU1JIiwgIkdldFdhcmVob3VzZSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CiAgICAKICAgIGlmICghaUNTQ0QudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJDU0NEIjogaUNTQ0QudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5DU0NEID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvdW50cnkgQ29kZSAiICsgaUNTQ0QpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlMwNDVNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQogICAgIC8vVmFsaWRhdGUgU0hEVAogICAgU3RyaW5nIHNvdXJjZUZvcm1hdCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiZ2V0RnVsbEZvcm1hdCIsIG1pLmdldERhdGVGb3JtYXQoKSkKICAgIHZhbGlkSW5wdXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgaVNIRFQudHJpbSgpLCBzb3VyY2VGb3JtYXQudG9TdHJpbmcoKSkKICAgIGlmICghdmFsaWRJbnB1dCkgewogICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIGlTSERUKQogICAgICByZXR1cm4gZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgIGlmICghc291cmNlRm9ybWF0LnRyaW0oKS5lcXVhbHMoInl5eXlNTWRkIikpIHsKICAgICAgICBpU0hEVCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiY29udmVydERhdGUiLCBzb3VyY2VGb3JtYXQsICJ5eXl5TU1kZCIsIGlTSERULnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQogICAgICB9CiAgICB9CgoKICB9CiAgCgogIAogIC8qKgogICAqVXBkYXRlIHJlY29yZHMgdG8gRVhUSFBEIHRhYmxlCiAgICogQHBhcmFtcyAKICAgKiBAcmV0dXJuIAogICAqLwogIHB1YmxpYyB1cGRhdGVSZWNvcmQoKSB7CiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRIUEQiKS5zZWxlY3Rpb24oIkVYQ0hOTyIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCgogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJFWFNIRFQiLCBpU0hEVCkKICAgIGNvbnRhaW5lci5zZXQoIkVYQ1VPUiIsIGlDVU9SKQogICAgY29udGFpbmVyLnNldCgiRVhPUk5PIiwgaU9STk8pCiAgICBjb250YWluZXIuc2V0KCJFWERMSVgiLCBpRExJWCkKICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsKICAgICAgcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykKICAgIH0gZWxzZSB7CiAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgRXhpc3QuIikKICAgICAgcmV0dXJuCiAgICB9CiAgfQoKICBDbG9zdXJlIDwgPyA+IHVwZGF0ZUNhbGxCYWNrID0gewogICAgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgogICAgaW50IENITk8gPSBsb2NrZWRSZXN1bHQuZ2V0KCJFWENITk8iKQoKICAgIGlmICghaVdITE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVdITE8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhXSExPIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhXSExPIiwgaVdITE8pCiAgICAgIH0KICAgIH0KICAgIGlmICghaUNVTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUNVTk8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDVU5PIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDVU5PIiwgaUNVTk8pCiAgICAgIH0KICAgIH0KICAgIGlmICghaU1BV0IudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaU1BV0IudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhNQVdCIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhNQVdCIiwgaU1BV0IpCiAgICAgIH0KICAgIH0KICAgIGlmICghaUVUUk4udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUVUUk4udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhFVFJOIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhFVFJOIiwgaUVUUk4pCiAgICAgIH0KICAgIH0KICAgIGlmICghaUNOVU0udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUNOVU0udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDTlVNIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDTlVNIiwgaUNOVU0pCiAgICAgIH0KICAgIH0KICAgIGlmICghaUJUUk4udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUJUUk4udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhCVFJOIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhCVFJOIiwgaUJUUk4pCiAgICAgIH0KICAgIH0KICAgIGlmICghaVJFU1AudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVJFU1AudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhSRVNQIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhSRVNQIiwgaVJFU1ApCiAgICAgIH0KICAgIH0KICAgIGlmICghaUNTQ0QudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUNTQ0QudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDU0NEIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDU0NEIiwgaUNTQ0QpCiAgICAgIH0KICAgIH0KICAgCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTVRNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENITk8iLCBDSE5PICsgMSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgfQp9"}}}