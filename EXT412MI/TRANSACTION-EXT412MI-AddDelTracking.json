{"programModules":{"EXT412MI":{"program":"EXT412MI","triggers":{},"transactions":{"AddDelTracking":{"sourceUuid":"698344d4-4922-44bc-ad09-23f4a0f847d3","name":"AddDelTracking","program":"EXT412MI","description":"Add Delivery Tracking","active":true,"multi":false,"modified":1695909097674,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"SHDT","description":"Shipment Date","length":8,"mandatory":true,"type":"A"},{"name":"CUOR","description":"Purchase Order Number","length":40,"mandatory":true,"type":"A"},{"name":"ORNO","description":"Customer's Order Number","length":10,"mandatory":true,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Customer Number","length":10,"mandatory":false,"type":"A"},{"name":"MAWB","description":"Group Number","length":32,"mandatory":false,"type":"A"},{"name":"ETRN","description":"External Tracking Number","length":30,"mandatory":false,"type":"A"},{"name":"CNUM","description":"Master Carton Number","length":64,"mandatory":false,"type":"A"},{"name":"BTRN","description":"Tracking Number","length":64,"mandatory":false,"type":"A"},{"name":"RESP","description":"Responsible","length":32,"mandatory":false,"type":"A"},{"name":"CSCD","description":"Country","length":3,"mandatory":false,"type":"A"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"698344d4-4922-44bc-ad09-23f4a0f847d3":{"uuid":"698344d4-4922-44bc-ad09-23f4a0f847d3","updated":1700202916713,"updatedBy":"M3CONSADMX","created":1693996273291,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20230822184312.7","language":"GROOVY","codeHash":"4B1E53BB85978E70EC580728A2DB255FC6D677B46988AB3AA514A0BFA573889D","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVEhQRCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDQxMk1JLkFkZERlbFRyYWNraW5nCiAqIERlc2NyaXB0aW9uOiBBZGRpbmcgcmVjb3JkcyB0byBFWFRIUEQgdGFibGUgCiAqIERhdGUgICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwOTA2ICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIEFkZGluZyByZWNvcmRzIHRvIEVYVEhQRCB0YWJsZSAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgQWRkRGVsVHJhY2tpbmcgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5CgogIHByaXZhdGUgU3RyaW5nIGlTSERULCBpQ1VPUiwgaU9STk8sIGlXSExPLCBpQ1VOTywgaU1BV0IsIGlFVFJOLCBpQ05VTSwgaUJUUk4sIGlSRVNQLCBpQ1NDRAogIHByaXZhdGUgaW50IGlDT05PCiAgcHJpdmF0ZSBsb25nIGlETElYCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkSW5wdXQgPSB0cnVlCgogIHB1YmxpYyBBZGREZWxUcmFja2luZyhNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFV0aWxpdHlBUEkgdXRpbGl0eSkgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaVNIRFQgPSAobWkuaW5EYXRhLmdldCgiU0hEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU0hEVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTSERUIikKICAgIGlDVU9SID0gKG1pLmluRGF0YS5nZXQoIkNVT1IiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVT1IiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VPUiIpCiAgICBpT1JOTyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKQogICAgaVdITE8gPSAobWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJXSExPIikKICAgIGlDVU5PID0gKG1pLmluRGF0YS5nZXQoIkNVTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VOTyIpCiAgICBpTUFXQiA9IChtaS5pbkRhdGEuZ2V0KCJNQVdCIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNQVdCIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk1BV0IiKQogICAgaUVUUk4gPSAobWkuaW5EYXRhLmdldCgiRVRSTiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRVRSTiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJFVFJOIikKICAgIGlDTlVNID0gKG1pLmluRGF0YS5nZXQoIkNOVU0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNOVU0iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ05VTSIpCiAgICBpQlRSTiA9IChtaS5pbkRhdGEuZ2V0KCJCVFJOIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJCVFJOIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkJUUk4iKQogICAgaVJFU1AgPSAobWkuaW5EYXRhLmdldCgiUkVTUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUkVTUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJSRVNQIikKICAgIGlDU0NEID0gKG1pLmluRGF0YS5nZXQoIkNTQ0QiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNTQ0QiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1NDRCIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaURMSVggPSAobWkuaW5EYXRhLmdldCgiRExJWCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRExJWCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkRMSVgiKSBhcyBMb25nCgogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZiAodmFsaWRJbnB1dCkgewogICAgICBpbnNlcnRSZWNvcmQoKQogICAgfQogIH0KCiAgLyoqCiAgICpWYWxpZGF0ZSBSZWNvcmRzCiAgICogQHBhcmFtcwogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIHZhbGlkYXRlSW5wdXQoKSB7CgogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgICAvL1ZhbGlkYXRlIE9yZGVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIk9STk8iOiBpT1JOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gPT0gbnVsbCkgewogICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE9yZGVyIE51bWJlciAiICsgaU9STk8pCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgCiAgICBtaUNhbGxlci5jYWxsKCJPSVMxMDBNSSIsICJHZXRPcmRlckhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIGlmICghaUNVTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIEN1c3RvbWVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkNVTk8iOiBpQ1VOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkNVTk8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ3VzdG9tZXIgTnVtYmVyICIgKyBpQ1VOTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlM2MTBNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgICAgLy9WYWxpZGF0ZSBEZWxpdmVyeSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJETElYIjogaURMSVgudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5ETElYID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIERlbGl2ZXJ5IE51bWJlciAiICsgaURMSVgpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiTVdTNDEwTUkiLCAiR2V0SGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICAKCiAgICBpZiAoIWlXSExPLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiV0hMTyI6IGlXSExPLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuV0hMTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBpV0hMTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAwNU1JIiwgIkdldFdhcmVob3VzZSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CiAgICAKICAgIGlmICghaUNTQ0QudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJDU0NEIjogaUNTQ0QudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5DU0NEID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvdW50cnkgQ29kZSAiICsgaUNTQ0QpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlMwNDVNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIC8vVmFsaWRhdGUgU0hEVAogICAgU3RyaW5nIHNvdXJjZUZvcm1hdCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiZ2V0RnVsbEZvcm1hdCIsIG1pLmdldERhdGVGb3JtYXQoKSkKICAgIHZhbGlkSW5wdXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgaVNIRFQudHJpbSgpLCBzb3VyY2VGb3JtYXQudG9TdHJpbmcoKSkKICAgIGlmICghdmFsaWRJbnB1dCkgewogICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIGlTSERUKQogICAgICByZXR1cm4gZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgIGlmICghc291cmNlRm9ybWF0LnRyaW0oKS5lcXVhbHMoInl5eXlNTWRkIikpIHsKICAgICAgICBpU0hEVCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiY29udmVydERhdGUiLCBzb3VyY2VGb3JtYXQsICJ5eXl5TU1kZCIsIGlTSERULnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQogICAgICB9CiAgICB9CgogIH0KCiAgLyoqCiAgICpJbnNlcnQgcmVjb3JkcyB0byBFWFRIUEQgdGFibGUKICAgKiBAcGFyYW1zIAogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIGluc2VydFJlY29yZCgpIHsKICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJFWFRIUEQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBxdWVyeSA9IGFjdGlvbi5nZXRDb250YWluZXIoKQoKICAgIHF1ZXJ5LnNldCgiRVhTSERUIiwgaVNIRFQpCiAgICBxdWVyeS5zZXQoIkVYQ1VPUiIsIGlDVU9SKQogICAgcXVlcnkuc2V0KCJFWE9STk8iLCBpT1JOTykKICAgIHF1ZXJ5LnNldCgiRVhXSExPIiwgaVdITE8pCiAgICBxdWVyeS5zZXQoIkVYQ1VOTyIsIGlDVU5PKQogICAgcXVlcnkuc2V0KCJFWE1BV0IiLCBpTUFXQikKICAgIHF1ZXJ5LnNldCgiRVhFVFJOIiwgaUVUUk4pCiAgICBxdWVyeS5zZXQoIkVYQ05VTSIsIGlDTlVNKQogICAgcXVlcnkuc2V0KCJFWEJUUk4iLCBpQlRSTikKICAgIHF1ZXJ5LnNldCgiRVhSRVNQIiwgaVJFU1ApCiAgICBxdWVyeS5zZXQoIkVYQ1NDRCIsIGlDU0NEKQogICAgcXVlcnkuc2V0KCJFWENPTk8iLCBpQ09OTyBhcyBJbnRlZ2VyKQogICAgcXVlcnkuc2V0KCJFWERMSVgiLCBpRExJWCBhcyBMb25nKQogICAgcXVlcnkuc2V0KCJFWFJHRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWFJHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhMTVRNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYQ0hOTyIsIDApCiAgICBxdWVyeS5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogICAgYWN0aW9uLmluc2VydChxdWVyeSwgcmVjb3JkRXhpc3RzKQogIH0KCiAgQ2xvc3VyZSByZWNvcmRFeGlzdHMgPSB7CiAgICBtaS5lcnJvcigiUmVjb3JkIEFscmVhZHkgRXhpc3RzIikKICAgIHJldHVybgogIH0KfQ=="}}}