{"programModules":{"EXT413MI":{"program":"EXT413MI","triggers":{},"transactions":{"UpdCrdtCardTrns":{"sourceUuid":"a886045e-3a7f-4a22-a9e9-5b494433be4c","name":"UpdCrdtCardTrns","program":"EXT413MI","description":"Update Credit Card Transaction Details","active":true,"multi":false,"modified":1694507577473,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"},{"name":"DLSP","description":"Delivery Stop","length":18,"mandatory":false,"type":"N"},{"name":"DLST","description":"Delivery Status","length":18,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"a886045e-3a7f-4a22-a9e9-5b494433be4c":{"uuid":"a886045e-3a7f-4a22-a9e9-5b494433be4c","updated":1694514926284,"updatedBy":"M3CONSADMX","created":1694507430059,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20230621154344.6","language":"GROOVY","codeHash":"591756D1822001AE56A5AB75855CCA102A79C984CB849EC12899DC75B60AD8FF","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVENDVCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDQxM01JLlVwZENyZHRDYXJkVHJucwogKiBEZXNjcmlwdGlvbjogVXBkYXRpbmcgcmVjb3JkcyB0byBFWFRDQ1QgdGFibGUKICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uCiAqMjAyMzA5MTIgIFN1cml5YU5AZm9ydHVkZS5jbyAgICBVcGRhdGluZyByZWNvcmRzIHRvIEVYVENDVCB0YWJsZQogKgogKi8KCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcgoKcHVibGljIGNsYXNzIFVwZENyZHRDYXJkVHJucyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCgogIHByaXZhdGUgU3RyaW5nIGlETFNUCiAgcHJpdmF0ZSBpbnQgaUNPTk8sIGlETFNQCiAgcHJpdmF0ZSBsb25nIGlETElYCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkSW5wdXQgPSB0cnVlCiAgCiAgcHVibGljIFVwZENyZHRDYXJkVHJucyhNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICB9CiAgLyoqCiAgICoqIE1haW4gZnVuY3Rpb24KICAgKiBAcGFyYW0KICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgbWFpbigpIHsKICAgIGlETFNUID0gKG1pLmluRGF0YS5nZXQoIkRMU1QiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRMU1QiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRExTVCIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaURMSVggPSAobWkuaW5EYXRhLmdldCgiRExJWCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRExJWCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkRMSVgiKSBhcyBMb25nCiAgICBpRExTUCA9IChtaS5pbkRhdGEuZ2V0KCJETFNQIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJETFNQIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRExTUCIpIGFzIEludGVnZXIKICAgIAogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZiAodmFsaWRJbnB1dCkgewogICAgICAgdXBkYXRlUmVjb3JkKCkKICAgIH0KICAgCiAgfQogIAogICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdmFsaWRhdGVJbnB1dCgpIHsKCiAgICAvL1ZhbGlkYXRlIENvbXBhbnkgTnVtYmVyCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBkZWYgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBpQ09OTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICAvL1ZhbGlkYXRlIERlbGl2ZXJ5IE51bWJlcgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJETElYIjogaURMSVgudG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuRExJWCA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGVsaXZlcnkgTnVtYmVyICIgKyBpRExJWCkKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTVdTNDEwTUkiLCAiR2V0SGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCgogIH0KICAKICAvKioKICAgKlVwZGF0ZSByZWNvcmRzIHRvIEVYVENDVCB0YWJsZQogICAqIEBwYXJhbXMgCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdXBkYXRlUmVjb3JkKCkgewogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUQ0NUIikuc2VsZWN0aW9uKCJFWENITk8iKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQoKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhETElYIiwgaURMSVgpCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7CiAgICAgIHF1ZXJ5LnJlYWRMb2NrKGNvbnRhaW5lciwgdXBkYXRlQ2FsbEJhY2spCiAgICB9IGVsc2UgewogICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IEV4aXN0LiIpCiAgICAgIHJldHVybgogICAgfQogIH0KCiAgQ2xvc3VyZSA8ID8gPiB1cGRhdGVDYWxsQmFjayA9IHsKICAgIExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4KICAgIGludCBDSE5PID0gbG9ja2VkUmVzdWx0LmdldCgiRVhDSE5PIikKICAgIGlmICghaURMU1QudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaURMU1QudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhETFNUIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhETFNUIiwgaURMU1QpCiAgICAgIH0KICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJETFNQIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiRExTUCIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhETFNQIiwgaURMU1ApCiAgICB9IAogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1UTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSE5PIiwgQ0hOTyArIDEpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkKICAgIGxvY2tlZFJlc3VsdC51cGRhdGUoKQogIH0KfQ=="}}}