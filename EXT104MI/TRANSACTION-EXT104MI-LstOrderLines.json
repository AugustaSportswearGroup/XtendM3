{"programModules":{"EXT104MI":{"program":"EXT104MI","triggers":{},"transactions":{"LstOrderLines":{"sourceUuid":"b1c6df80-15d0-4861-9dd5-7c59c89026c5","name":"LstOrderLines","program":"EXT104MI","description":"List Ecommerce Order Lines","active":true,"multi":true,"modified":1699389857595,"modifiedBy":"SADANGJ","outputFields":[{"name":"ITNO","description":"Item","length":60,"mandatory":false,"type":"A"},{"name":"ORQT","description":"Ordered quantity","length":16,"mandatory":false,"type":"A"},{"name":"COLR","description":"Color","length":30,"mandatory":false,"type":"A"},{"name":"SIZE","description":"Size","length":15,"mandatory":false,"type":"A"},{"name":"SAPR","description":"Sales price","length":16,"mandatory":false,"type":"A"},{"name":"LNAM","description":"Line Amount","length":16,"mandatory":false,"type":"A"},{"name":"ORST","description":"Status","length":30,"mandatory":false,"type":"A"},{"name":"ISKU","description":"Item number","length":15,"mandatory":false,"type":"A"},{"name":"SHDT","description":"Shipment date","length":8,"mandatory":false,"type":"A"},{"name":"SNUM","description":"Snumber","length":8,"mandatory":false,"type":"A"},{"name":"WNUM","description":"Work order number","length":15,"mandatory":false,"type":"A"},{"name":"CUSX","description":"Design group","length":3,"mandatory":false,"type":"A"},{"name":"ETRN","description":"Tracking number","length":30,"mandatory":false,"type":"A"},{"name":"CUOR","description":"PO number","length":20,"mandatory":false,"type":"A"},{"name":"CARR","description":"Carrier","length":15,"mandatory":false,"type":"A"},{"name":"MODL","description":"Delivery method","length":3,"mandatory":false,"type":"A"},{"name":"CUCD","description":"Currency","length":3,"mandatory":false,"type":"A"},{"name":"SAD1","description":"Ship to Address1","length":36,"mandatory":false,"type":"A"},{"name":"SAD2","description":"Ship to Address2","length":36,"mandatory":false,"type":"A"},{"name":"STOW","description":"Ship to City","length":20,"mandatory":false,"type":"A"},{"name":"SECA","description":"Ship to State","length":2,"mandatory":false,"type":"A"},{"name":"SPON","description":"Ship to Postal Code","length":10,"mandatory":false,"type":"A"},{"name":"SCSC","description":"Ship to Country","length":3,"mandatory":false,"type":"A"},{"name":"RNUM","description":"Rnumber","length":36,"mandatory":false,"type":"A"},{"name":"IVNO","description":"Invoice number","length":14,"mandatory":false,"type":"A"},{"name":"STAT","description":"M3 status","length":2,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":false,"type":"A"},{"name":"PONR","description":"Line number","length":5,"mandatory":false,"type":"A"},{"name":"PRWD","description":"Price without discount","length":16,"mandatory":false,"type":"A"}],"inputFields":[{"name":"ORNO","description":"Order number","length":30,"mandatory":true,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"b1c6df80-15d0-4861-9dd5-7c59c89026c5":{"uuid":"b1c6df80-15d0-4861-9dd5-7c59c89026c5","updated":1711990715264,"updatedBy":"ABHISHEK","created":1698086576038,"createdBy":"SADANGJ","apiVersion":"0.21","beVersion":"16.0.0.20240116163623.6","language":"GROOVY","codeHash":"63820760D547ACD55ACA58B6BA8D7A6E08ADD52F7BB929537C1EBEC434E45DFE","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHVzZWQgdG8gbGlzdCBjdXN0b21lciBvcmRlciBsaW5lcw0KICoNCiAqIE5hbWU6IEVYVDEwNE1JLkxzdE9yZGVyTGluZXMNCiAqIERlc2NyaXB0aW9uOiBUcmFuc2FjdGlvbiB1c2VkIHRvIEFkZCBvcmRlciBjaGFyZ2VzIHRvIGN1c3RvbWVyIG9yZGVyIGJhc2VkIG9uIGRhdGEgZnJvbSBnbG9iYWxzaGlwDQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24NCiAqMjAyMzEwMTkgIFN1cml5YU5AZm9ydHVkZS5jbyAgICAgQWRkIG9yZGVyIGNoYXJnZXMgdG8gY3VzdG9tZXIgb3JkZXIgYmFzZWQgb24gZGF0YSBmcm9tIGdsb2JhbHNoaXAgKi8NCg0KaW1wb3J0IGphdmEudGV4dC5EZWNpbWFsRm9ybWF0DQoNCnB1YmxpYyBjbGFzcyBMc3RPcmRlckxpbmVzIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0NCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyDQogIHByaXZhdGUgaW50IGlDT05PLCBtYXhQYWdlU2l6ZSA9IDEwMDAwLCB0cmFuc2xhdGlvbklkDQogIHByaXZhdGUgU3RyaW5nIGlPUk5PLCBtYm1kLCBjdWNkDQogIHByaXZhdGUgTWFwIDwgU3RyaW5nLCBIYXNoTWFwID4gb3JkZXJMaXN0ID0gbmV3IFRyZWVNYXAgPCBTdHJpbmcsIEhhc2hNYXAgPiAoKQ0KICBwcml2YXRlIE1hcCA8IFN0cmluZywgSGFzaE1hcCA+IGFkZHJlc3NMaXN0ID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsIEhhc2hNYXAgPiAoKQ0KICBwcml2YXRlIE1hcCA8IFN0cmluZywgSGFzaE1hcCA+IGRlbGl2ZXJ5TGlzdCA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBIYXNoTWFwID4gKCkNCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkSW5wdXQgPSB0cnVlLCBpc1BIV08gPSBmYWxzZQ0KDQogIHB1YmxpYyBMc3RPcmRlckxpbmVzKE1JQVBJIG1pLCBQcm9ncmFtQVBJIHByb2dyYW0sIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBNSUNhbGxlckFQSSBtaUNhbGxlcikgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXINCiAgfQ0KDQogIC8qKg0KICAgKiBNYWluIG1ldGhvZA0KICAgKi8NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGlDT05PID0gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXINCiAgICBpT1JOTyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkNCiAgICBpZiAoIXZhbGlkYXRlSW5wdXQoKSkgew0KICAgICAgaWYgKCF2YWxpZGF0ZUJhc2VkT25PUkVGKCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgT3JkZXIgTnVtYmVyICIgKyBpT1JOTykNCiAgICAgIH0NCiAgICB9DQoNCiAgICBmb3IgKE1hcC5FbnRyeSA8IFN0cmluZywgSGFzaE1hcCA+IGVudHJ5OiBvcmRlckxpc3QuZW50cnlTZXQoKSkgew0KICAgICAgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gb3JkZXIgPSAoSGFzaE1hcCkgZW50cnkuZ2V0VmFsdWUoKQ0KICAgICAgY3VjZCA9IG9yZGVyLmdldCgiQ1VDRCIpDQogICAgICBTdHJpbmcgcGh3b09ydHAgPSBnZXRUcmFuc2xhdGlvbigiUEhXT09SVFAiKQ0KICAgICAgU3RyaW5nIG9ydHAgPSAiLSIgKyBvcmRlci5nZXQoIk9SVFAiKS50cmltKCkgKyAiLSINCiAgICAgIGlzUEhXTyA9IHBod29PcnRwLmNvbnRhaW5zKG9ydHApDQogICAgICByZWFkT3JkZXJMaW5lcyhvcmRlci5nZXQoIk9STk8iKSkNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogVmFsaWRhdGVzIHRoZSBpbnB1dCBvcmRlciBudW1iZXIuDQogICAqIEByZXR1cm4gYm9vbGVhbiAtIFJldHVybnMgdHJ1ZSBpZiBpbnB1dCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlLg0KICAgKi8NCg0KICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUlucHV0KCkgew0KICAgIGlmICghaU9STk8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgLy9WYWxpZGF0ZSBDdXN0b21lciBOdW1iZXINCiAgICAgIE1hcCA8IFN0cmluZywgU3RyaW5nID4gcGFyYW1zID0gWyJPUk5PIjogaU9STk8udG9TdHJpbmcoKS50cmltKCldDQogICAgICBDbG9zdXJlIDwgPyA+IGNhbGxiYWNrID0gew0KICAgICAgICBNYXAgPCBTdHJpbmcsDQogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICAgIGlmIChyZXNwb25zZS5PUk5PID09IG51bGwpIHsNCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBvcmRlciA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiAoKQ0KICAgICAgICAgIG9yZGVyLnB1dCgiT1JOTyIsIGlPUk5PKQ0KICAgICAgICAgIG9yZGVyLnB1dCgiT1JUUCIsIHJlc3BvbnNlLk9SVFApDQogICAgICAgICAgb3JkZXIucHV0KCJDVUNEIiwgcmVzcG9uc2UuQ1VDRCkNCiAgICAgICAgICBvcmRlckxpc3QucHV0KGlPUk5PLCBvcmRlcikNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbWlDYWxsZXIuY2FsbCgiT0lTMTAwTUkiLCAiR2V0T3JkZXJIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgICB9IGVsc2Ugew0KICAgICAgbWkuZXJyb3IoIk9yZGVyIG51bWJlciBtdXN0IGJlIGVudGVyZWQuIikNCiAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQ0KICAgIH0NCiAgICByZXR1cm4gdmFsaWRJbnB1dA0KICB9DQoNCiAgLyoqDQogICAqIFZhbGlkYXRlcyB0aGUgaW5wdXQgb3JkZXIgbnVtYmVyIGJhc2VkIG9uIE9SRUYuDQogICAqIEByZXR1cm4gYm9vbGVhbiAtIFJldHVybnMgdHJ1ZSBpZiBpbnB1dCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlLg0KICAgKi8NCiAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVCYXNlZE9uT1JFRigpIHsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHByZXNzaW9uID0gZGF0YWJhc2UuZ2V0RXhwcmVzc2lvbkZhY3RvcnkoIk9PSEVBRCIpDQogICAgLy8gc2V0IEVjb20gb3JkZXIgbnVtYmVyIGZpbHRlcg0KICAgIFN0cmluZyBvcmVmID0gIkVDIiArIGlPUk5PDQogICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZXEoIk9BT1JFRiIsIG9yZWYpDQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT09IRUFEIikuaW5kZXgoIjAwIikubWF0Y2hpbmcoZXhwcmVzc2lvbikuc2VsZWN0aW9uKCJPQU9STk8iLCAiT0FPUlRQIiwgIk9BQ1VDRCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9BQ09OTyIsIGlDT05PKQ0KICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAxLCBtYXhQYWdlU2l6ZSwgcnNSZWFkT3JkZXJzKQ0KICAgIHJldHVybiB2YWxpZElucHV0DQogIH0NCg0KICAvKioNCiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVhZCBvcmRlcnMuDQogICAqLw0KDQogIENsb3N1cmUgPCA/ID4gcnNSZWFkT3JkZXJzID0gew0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPg0KICAgIFN0cmluZyBvcm5vID0gY29udGFpbmVyLmdldCgiT0FPUk5PIikudG9TdHJpbmcoKQ0KICAgIGlmIChvcm5vICE9IG51bGwpIHsNCiAgICAgIHZhbGlkSW5wdXQgPSB0cnVlDQogICAgICBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBvcmRlciA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiAoKQ0KICAgICAgb3JkZXIucHV0KCJPUk5PIiwgb3JubykNCiAgICAgIG9yZGVyLnB1dCgiT1JUUCIsIGNvbnRhaW5lci5nZXQoIk9BT1JUUCIpLnRvU3RyaW5nKCkpDQogICAgICBvcmRlci5wdXQoIkNVQ0QiLCBjb250YWluZXIuZ2V0KCJPQUNVQ0QiKS50b1N0cmluZygpKQ0KICAgICAgb3JkZXJMaXN0LnB1dChvcm5vLCBvcmRlcikNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogZ2V0VHJhbnNsYXRpb24gLSBHZXQgdGhlIENSUzg4MSBkYXRhIHRyYW5zbGF0aW9uIHVzaW5nIGEgU3RyaW5nIGtleXdvcmQNCiAgICogQHBhcmFtcyBTdHJpbmcga2V5d29yZA0KICAgKiBAcmV0dXJuIFN0cmluZw0KICAgKi8NCiAgcHJpdmF0ZSBTdHJpbmcgZ2V0VHJhbnNsYXRpb24oU3RyaW5nIGtleXdvcmQpIHsNCiAgICBpZiAodHJhbnNsYXRpb25JZCA9PSAwKSB7DQogICAgICBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRElWSSI6ICIiLCAiVFJRRiI6ICIwIiwgIk1TVEQiOiAiRUNPTSIsICJNVlJTIjogIjEiLCAiQk1TRyI6ICJFQ1owMDFNSSIsICJJQk9CIjogIk8iLCAiRUxNUCI6ICJBUEkiLCAiRUxNRCI6ICJQcm9wZXJ0aWVzIl0NCiAgICAgIENsb3N1cmUgPCA/ID4gY2FsbGJhY2sgPSB7DQogICAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgICAgaWYgKHJlc3BvbnNlLklEVFIgIT0gbnVsbCkgew0KICAgICAgICAgIHRyYW5zbGF0aW9uSWQgPSByZXNwb25zZS5JRFRSIGFzIEludGVnZXINCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbWlDYWxsZXIuY2FsbCgiQ1JTODgxTUkiLCAiR2V0VHJhbnNsYXRpb24iLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIH0NCg0KICAgIFN0cmluZyBtYm1kID0gIiINCiAgICBpZiAodHJhbnNsYXRpb25JZCAhPSAwKSB7DQogICAgICBDbG9zdXJlIDwgPyA+IGdldFRyYW5zbGF0ZWREYXRhID0gew0KICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgLT4NCiAgICAgICAgbWJtZCA9IGNvbnRhaW5lci5nZXQoIlRETUJNRCIpDQogICAgICAgIGlmIChtYm1kID09IG51bGwpIHsNCiAgICAgICAgICBtYm1kID0gIiINCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUJNVFJEIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJURE1CTUQiKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICAgY29udGFpbmVyLnNldCgiVERDT05PIiwgaUNPTk8pDQogICAgICBjb250YWluZXIuc2V0KCJURERJVkkiLCAiIikNCiAgICAgIGNvbnRhaW5lci5zZXQoIlRESURUUiIsIHRyYW5zbGF0aW9uSWQgYXMgSW50ZWdlcikNCiAgICAgIGNvbnRhaW5lci5zZXQoIlRETVZYRCIsIGtleXdvcmQpDQogICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgNCwgbWF4UGFnZVNpemUsIGdldFRyYW5zbGF0ZWREYXRhKQ0KICAgIH0NCiAgICByZXR1cm4gbWJtZC50cmltKCkNCiAgfQ0KDQogIC8qKg0KICAgKiBWYWxpZGF0ZXMgYW5kIHJldHJpZXZlcyBsaW5lIGNoYXJnZXMgZm9yIHRoZSBnaXZlbiBvcmRlciBudW1iZXIuDQogICAqIEBwYXJhbSBvcm5vIFRoZSBvcmRlciBudW1iZXINCiAgICovDQoNCiAgcHVibGljIHZvaWQgcmVhZE9yZGVyTGluZXMoU3RyaW5nIG9ybm8pIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPT0xJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9CT1JOTyIsICJPQlBPTlIiLCAiT0JQT1NYIiwgIk9CSERQUiIsICJPQklURFMiLCAiT0JPUlFUIiwgIk9CU0FQUiIsICJPQk5FUFIiLCAiT0JJVE5PIiwgIk9CTU9ETCIsICJPQkRTRFQiLCAiT0JPUlNUIiwgIk9CUk9SQyIsICJPQlJPUk4iLCAiT0JDRklOIiwgIk9CRUxOTyIsICJPQk1PWUUiLCAiT0JDVVNYIiwgIk9CQ1VPUiIsICJPQkFESUQiLCAiT0JURVBZIiwgIk9CRFNUWCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9CQ09OTyIsIGlDT05PKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9CT1JOTyIsIG9ybm8pDQoNCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMiwgbWF4UGFnZVNpemUsIHJzUmVhZE9yZGVyTGluZXMpDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IHJzUmVhZE9yZGVyTGluZXMgPSB7DQogICAgREJDb250YWluZXIgY29udGFpbmVyIC0+DQogICAgU3RyaW5nIHBvbnIgPSBjb250YWluZXIuZ2V0KCJPQlBPTlIiKS50b1N0cmluZygpDQogICAgaWYgKHBvbnIgIT0gbnVsbCkgew0KICAgICAgbWkub3V0RGF0YS5wdXQoIklUTk8iLCBjb250YWluZXIuZ2V0KCJPQkhEUFIiKS50b1N0cmluZygpICsgIiAiICsgY29udGFpbmVyLmdldCgiT0JJVERTIikudG9TdHJpbmcoKSkNCiAgICAgIGludCBvcnF0ID0gY29udGFpbmVyLmdldCgiT0JPUlFUIikgYXMgSW50ZWdlcg0KICAgICAgbWkub3V0RGF0YS5wdXQoIk9SUVQiLCBvcnF0IGFzIFN0cmluZykNCiAgICAgIG1pLm91dERhdGEucHV0KCJTSERUIiwgY29udGFpbmVyLmdldCgiT0JEU0RUIikudG9TdHJpbmcoKSkNCiAgICAgIFN0cmluZyBzdGF0dXMgPSAiU3VibWl0dGVkIg0KICAgICAgaW50IG9yc3QgPSBjb250YWluZXIuZ2V0KCJPQk9SU1QiKS50b1N0cmluZygpIGFzIEludGVnZXINCiAgICAgIGludCByb3JjID0gY29udGFpbmVyLmdldCgiT0JST1JDIikudG9TdHJpbmcoKSBhcyBJbnRlZ2VyDQogICAgICBpZiAob3JzdCA9PSA3NyB8fCBvcnN0ID09IDY2KSB7DQogICAgICAgIHN0YXR1cyA9ICJTaGlwcGVkIg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgU3RyaW5nIHJvcm4gPSBjb250YWluZXIuZ2V0KCJPQlJPUk4iKS50b1N0cmluZygpDQogICAgICAgIGlmIChvcnN0IDwgNjYgJiYgcm9yYyA9PSAxICYmICFyb3JuLmlzRW1wdHkoKSAmJiAhcm9ybi5lcXVhbHMoIu+/ru+/ru+/ru+/ru+/ru+/ru+/ru+/ru+/ru+/riIpKSB7DQogICAgICAgICAgc3RhdHVzID0gIk1PIFJlbGVhc2VkIg0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaS5vdXREYXRhLnB1dCgiT1JTVCIsIHN0YXR1cykNCiAgICAgIG1pLm91dERhdGEucHV0KCJTVEFUIiwgY29udGFpbmVyLmdldCgiT0JPUlNUIikudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCJSTlVNIiwgY29udGFpbmVyLmdldCgiT0JEU1RYIikudG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCJDVUNEIiwgY3VjZCkNCiAgICAgIG1pLm91dERhdGEucHV0KCJTTlVNIiwgY29udGFpbmVyLmdldCgiT0JFTE5PIikudG9TdHJpbmcoKSkNCiAgICAgIGludCBjdXN4ID0gY29udGFpbmVyLmdldCgiT0JDVVNYIikudG9TdHJpbmcoKS50cmltKCkgYXMgSW50ZWdlcg0KICAgICAgbWkub3V0RGF0YS5wdXQoIkNVU1giLCBjdXN4IGFzIFN0cmluZykNCiAgICAgIFN0cmluZyB3bnVtID0gY29udGFpbmVyLmdldCgiT0JNT1lFIikudG9TdHJpbmcoKS50cmltKCkNCiAgICAgIFN0cmluZyBvcm5vID0gY29udGFpbmVyLmdldCgiT0JPUk5PIikudG9TdHJpbmcoKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoIldOVU0iLCB3bnVtKQ0KICAgICAgaWYgKGlzUEhXTyAmJiB3bnVtLmlzRW1wdHkoKSkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiV05VTSIsIG9ybm8gKyAiXyIgKyBjdXN4KQ0KICAgICAgfQ0KICAgICAgbWkub3V0RGF0YS5wdXQoIkNVT1IiLCBjb250YWluZXIuZ2V0KCJPQkNVT1IiKS50b1N0cmluZygpKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoIlBPTlIiLCBjb250YWluZXIuZ2V0KCJPQlBPTlIiKS50b1N0cmluZygpKQ0KDQogICAgICBTdHJpbmcgcG9zeCA9IGNvbnRhaW5lci5nZXQoIk9CUE9TWCIpLnRvU3RyaW5nKCkNCiAgICAgIFN0cmluZyBhZGlkID0gY29udGFpbmVyLmdldCgiT0JBRElEIikudG9TdHJpbmcoKS50cmltKCkNCiAgICAgIEhhc2hNYXAgYWRkcmVzcyA9IGFkZHJlc3NMaXN0LmdldChhZGlkKQ0KICAgICAgaWYgKGFkZHJlc3MgPT0gbnVsbCkgew0KICAgICAgICBnZXRMaW5lQWRkcmVzcyhhZGlkLCBvcm5vLCBwb25yLCBwb3N4KQ0KICAgICAgICBhZGRyZXNzID0gYWRkcmVzc0xpc3QuZ2V0KGFkaWQpDQogICAgICB9DQogICAgICBpZiAoYWRkcmVzcyAhPSBudWxsKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCJTQUQxIiwgYWRkcmVzcy5nZXQoIkNVQTEiKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0FEMiIsIGFkZHJlc3MuZ2V0KCJDVUEyIikudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNQT04iLCBhZGRyZXNzLmdldCgiUE9OTyIpLnRvU3RyaW5nKCkpDQogICAgICAgIG1pLm91dERhdGEucHV0KCJTVE9XIiwgYWRkcmVzcy5nZXQoIlRPV04iKS50b1N0cmluZygpKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0VDQSIsIGFkZHJlc3MuZ2V0KCJFQ0FSIikudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNDU0MiLCBhZGRyZXNzLmdldCgiQ1NDRCIpLnRvU3RyaW5nKCkpDQogICAgICB9DQogICAgICBkb3VibGUgc2FwciA9IGNvbnRhaW5lci5nZXQoIk9CU0FQUiIpLnRvU3RyaW5nKCkgYXMgZG91YmxlDQogICAgICBEZWNpbWFsRm9ybWF0IGRmID0gbmV3IERlY2ltYWxGb3JtYXQoIiMwLjAwIikNCiAgICAgIFN0cmluZyBmb3JtYXR0ZWRTYXByID0gZGYuZm9ybWF0KHNhcHIpDQogICAgICBtaS5vdXREYXRhLnB1dCgiUFJXRCIsIGZvcm1hdHRlZFNhcHIpDQogICAgICBkb3VibGUgbGluZUNoYXJnZSA9IGdldExpbmVDaGFyZ2Uob3JubywgcG9uciwgcG9zeCkNCiAgICAgIGRvdWJsZSBvTmV0UHJpY2UgPSBjb250YWluZXIuZ2V0KCJPQk5FUFIiKS50b1N0cmluZygpIGFzIGRvdWJsZQ0KICAgICAgZG91YmxlIG5ldFByaWNlID0gb05ldFByaWNlDQogICAgICBpZiAob3JxdCAhPSAwICYmIGxpbmVDaGFyZ2UgIT0gMCkgew0KICAgICAgICBkb3VibGUgY2hhcmdlID0gbGluZUNoYXJnZSAvIG9ycXQNCiAgICAgICAgY2hhcmdlID0gTWF0aC5yb3VuZChjaGFyZ2UgKiAxMDApIC8gMTAwDQogICAgICAgIG5ldFByaWNlID0gbmV0UHJpY2UgLSBjaGFyZ2UNCiAgICAgIH0NCiAgICAgIG1pLm91dERhdGEucHV0KCJTQVBSIiwgZGYuZm9ybWF0KG5ldFByaWNlKSkNCiAgICAgIGRvdWJsZSBsaW5lQW1vdW50ID0gKG9ycXQgKiBvTmV0UHJpY2UpICsgbGluZUNoYXJnZQ0KICAgICAgbGluZUFtb3VudCA9IE1hdGgucm91bmQobGluZUFtb3VudCAqIDEwMCkgLyAxMDANCiAgICAgIG1pLm91dERhdGEucHV0KCJMTkFNIiwgZGYuZm9ybWF0KGxpbmVBbW91bnQpKQ0KICAgICAgU3RyaW5nIGl0bm8gPSBjb250YWluZXIuZ2V0KCJPQklUTk8iKS50b1N0cmluZygpLnRyaW0oKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoIklTS1UiLCBpdG5vKQ0KICAgICAgU3RyaW5nIGNmaW4gPSBjb250YWluZXIuZ2V0KCJPQkNGSU4iKS50b1N0cmluZygpDQogICAgICBzZXRJdGVtQXR0cmlidXRlcyhpdG5vLCBjZmluIGFzIEludGVnZXIpDQogICAgICBTdHJpbmcgZGVmTW9kbCA9IGNvbnRhaW5lci5nZXQoIk9CTU9ETCIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgICBTdHJpbmcgdGVweSA9IGNvbnRhaW5lci5nZXQoIk9CVEVQWSIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgICBnZXREZWxpdmVyeUluZm8ob3JubywgZGVmTW9kbCwgdGVweSwgcG9uciBhcyBJbnRlZ2VyLCBwb3N4IGFzIEludGVnZXIsIHN0YXR1cykNCiAgICAgIG1pLndyaXRlKCkNCg0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBSZXRyaWV2ZXMgbGluZSBhZGRyZXNzIHVzaW5nIGFkZHJlc3MgaWRlbnRpZmllciwgb3JkZXIgbnVtYmVyLCBwdXJjaGFzZSBvcmRlciBudW1iZXIsIGFuZCBwb3NpdGlvbi4NCiAgICogQHBhcmFtIGFkaWQgVGhlIGFkZHJlc3MgaWRlbnRpZmllcg0KICAgKiBAcGFyYW0gb3JubyBUaGUgb3JkZXIgbnVtYmVyDQogICAqIEBwYXJhbSBwb25yIFRoZSBwdXJjaGFzZSBvcmRlciBudW1iZXINCiAgICogQHBhcmFtIHBvc3ggVGhlIHBvc2l0aW9uDQogICAqLw0KDQogIHB1YmxpYyB2b2lkIGdldExpbmVBZGRyZXNzKFN0cmluZyBhZGlkLCBTdHJpbmcgb3JubywgU3RyaW5nIHBvbnIsIFN0cmluZyBwb3N4KSB7DQogICAgTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIk9STk8iOiBvcm5vLCAiUE9OUiI6IHBvbnIsICJQT1NYIjogcG9zeF0NCiAgICBDbG9zdXJlIDwgPyA+IGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5DVUExICE9IG51bGwpIHsNCiAgICAgICAgSGFzaE1hcCBhZGRyZXNzID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+ICgpDQogICAgICAgIGFkZHJlc3MucHV0KCJDVU5NIiwgcmVzcG9uc2UuQ1VOTSkNCiAgICAgICAgYWRkcmVzcy5wdXQoIkNVQTEiLCByZXNwb25zZS5DVUExKQ0KICAgICAgICBhZGRyZXNzLnB1dCgiQ1VBMiIsIHJlc3BvbnNlLkNVQTIpDQogICAgICAgIGFkZHJlc3MucHV0KCJQT05PIiwgcmVzcG9uc2UuUE9OTykNCiAgICAgICAgYWRkcmVzcy5wdXQoIkVDQVIiLCByZXNwb25zZS5FQ0FSKQ0KICAgICAgICBhZGRyZXNzLnB1dCgiVE9XTiIsIHJlc3BvbnNlLlRPV04pDQogICAgICAgIGFkZHJlc3MucHV0KCJDU0NEIiwgcmVzcG9uc2UuQ1NDRCkNCiAgICAgICAgYWRkcmVzc0xpc3QucHV0KGFkaWQsIGFkZHJlc3MpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBIYXNoTWFwIGFkZHJlc3MgPSBuZXcgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gKCkNCiAgICAgICAgYWRkcmVzcy5wdXQoIkNVTk0iLCAiIikNCiAgICAgICAgYWRkcmVzcy5wdXQoIkNVQTEiLCAiIikNCiAgICAgICAgYWRkcmVzcy5wdXQoIkNVQTIiLCAiIikNCiAgICAgICAgYWRkcmVzcy5wdXQoIlBPTk8iLCAiIikNCiAgICAgICAgYWRkcmVzcy5wdXQoIkVDQVIiLCAiIikNCiAgICAgICAgYWRkcmVzcy5wdXQoIlRPV04iLCAiIikNCiAgICAgICAgYWRkcmVzcy5wdXQoIkNTQ0QiLCAiIikNCiAgICAgICAgYWRkcmVzc0xpc3QucHV0KGFkaWQsIGFkZHJlc3MpDQogICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkdldExpbmVBZGRyZXNzIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgfQ0KDQogIC8qKg0KICAgKiBnZXRMaW5lQ2hhcmdlIC0gR2V0IHRoZSB0b3RhbCBsaW5lIGNoYXJnZSBkYXRhDQogICAqIEBwYXJhbXMgU3RyaW5nIG9ybm8sIGludCBwb25yLCBpbnQgcG9zDQogICAqIEByZXR1cm4gZG91YmxlDQogICAqLw0KICBwdWJsaWMgZG91YmxlIGdldExpbmVDaGFyZ2UoU3RyaW5nIG9ybm8sIFN0cmluZyBwb25yLCBTdHJpbmcgcG9zeCkgew0KICAgIGRvdWJsZSBsaW5lQ2hhcmdlID0gMC4wDQogICAgLy9WYWxpZGF0ZSBEZWxpdmVyeSBOdW1iZXINCiAgICBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHBhcmFtc0xzdExpbmVDaGFyZ2UgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIk9STk8iOiBvcm5vLCAiUE9OUiI6IHBvbnIsICJQT1NYIjogcG9zeF0NCiAgICBDbG9zdXJlIDwgPyA+IGNhbGxiYWNrTHN0TGluZUNoYXJnZSA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICBpZiAocmVzcG9uc2UuQ1JJRCAhPSBudWxsKSB7DQogICAgICAgIGRvdWJsZSBwYmFtID0gcmVzcG9uc2UuUEJBTSBhcyBkb3VibGUNCiAgICAgICAgbGluZUNoYXJnZSA9IGxpbmVDaGFyZ2UgKyBwYmFtDQogICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkxzdExpbmVDaGFyZ2UiLCBwYXJhbXNMc3RMaW5lQ2hhcmdlLCBjYWxsYmFja0xzdExpbmVDaGFyZ2UpDQoNCiAgICByZXR1cm4gbGluZUNoYXJnZQ0KICB9DQoNCiAgLyoqDQogICAqIFNldHMgaXRlbSBhdHRyaWJ1dGVzIGJhc2VkIG9uIHRoZSBpdGVtIG51bWJlciBhbmQgY29uZmlndXJhdGlvbiBmbGFnLg0KICAgKiBAcGFyYW0gaXRubyBUaGUgaXRlbSBudW1iZXINCiAgICogQHBhcmFtIGNmaW4gVGhlIGNvbmZpZ3VyYXRpb24gZmxhZw0KICAgKi8NCiAgcHVibGljIHZvaWQgc2V0SXRlbUF0dHJpYnV0ZXMoU3RyaW5nIGl0bm8sIGludCBjZmluKSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFIIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJITVNUWU4iLCAiSE1UWDE1IiwgIkhNT1BUWSIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIkhNQ09OTyIsIGlDT05PKQ0KICAgIGNvbnRhaW5lci5zZXQoIkhNSVROTyIsIGl0bm8pDQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgew0KICAgICAgbWkub3V0RGF0YS5wdXQoIlNJWkUiLCBjb250YWluZXIuZ2V0KCJITVRYMTUiKS50b1N0cmluZygpKQ0KICAgICAgREJBY3Rpb24gcXVlcnkxID0gZGF0YWJhc2UudGFibGUoIk1QRE9QVCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUEZUWDMwIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyMSA9IHF1ZXJ5MS5nZXRDb250YWluZXIoKQ0KICAgICAgY29udGFpbmVyMS5zZXQoIlBGQ09OTyIsIGlDT05PKQ0KICAgICAgY29udGFpbmVyMS5zZXQoIlBGT1BUTiIsIGNvbnRhaW5lci5nZXQoIkhNT1BUWSIpLnRvU3RyaW5nKCkpDQogICAgICBpZiAocXVlcnkxLnJlYWQoY29udGFpbmVyMSkpIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoIkNPTFIiLCBjb250YWluZXIxLmdldCgiUEZUWDMwIikudG9TdHJpbmcoKSkNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgREJBY3Rpb24gcXVlcnkxID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTU1JVENMIiwgIk1NSVRUWSIpLmJ1aWxkKCkNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lcjEgPSBxdWVyeTEuZ2V0Q29udGFpbmVyKCkNCiAgICAgIGNvbnRhaW5lcjEuc2V0KCJNTUNPTk8iLCBpQ09OTykNCiAgICAgIGNvbnRhaW5lcjEuc2V0KCJNTUlUTk8iLCBpdG5vKQ0KICAgICAgaWYgKHF1ZXJ5MS5yZWFkKGNvbnRhaW5lcjEpKSB7DQogICAgICAgIFN0cmluZyBpdGNsID0gY29udGFpbmVyMS5nZXQoIk1NSVRDTCIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgICAgIFN0cmluZyBpdHR5ID0gY29udGFpbmVyMS5nZXQoIk1NSVRUWSIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgICAgIFN0cmluZyBjb2xvclByZWZpeCA9IGdldFRyYW5zbGF0aW9uKCJFQ1pDIiArIGl0Y2wpLnRyaW0oKQ0KICAgICAgICBpZiAoY29sb3JQcmVmaXguaXNFbXB0eSgpKSB7DQogICAgICAgICAgU3RyaW5nIHdvb2xKYWNrZXQgPSBnZXRUcmFuc2xhdGlvbigiRUNaQyIgKyBpdHR5KS50cmltKCkNCiAgICAgICAgICBpZiAoY2ZpbiAhPSAwICYmICF3b29sSmFja2V0LmlzRW1wdHkoKSkgew0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIklTS1UiLCBpdG5vKQ0KICAgICAgICAgICAgU3RyaW5nW10gamR0YSA9IGdldFdvb2xKYWNrZXREYXRhKGNmaW4pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0laRSIsIGpkdGFbMF0pDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQ09MUiIsIGpkdGFbMV0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmIChjZmluICE9IDAgJiYgIWNvbG9yUHJlZml4LmlzRW1wdHkoKSkgew0KICAgICAgICAgIGdldFBIRGF0YShpdG5vLCBpdGNsLCBjb2xvclByZWZpeCwgY2ZpbikNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpdG5vLnN0YXJ0c1dpdGgoIjBQIikpIHsNCiAgICAgIGJvb2xlYW4gbW9kaWZ5ID0gZmFsc2UNCiAgICAgIERCQWN0aW9uIHF1ZXJ5MSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NSVRDTCIsICJNTUlURFMiKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXIxID0gcXVlcnkxLmdldENvbnRhaW5lcigpDQogICAgICBjb250YWluZXIxLnNldCgiTU1DT05PIiwgaUNPTk8pDQogICAgICBjb250YWluZXIxLnNldCgiTU1JVE5PIiwgaXRubykNCiAgICAgIGlmIChxdWVyeTEucmVhZChjb250YWluZXIxKSkgew0KICAgICAgICBTdHJpbmcgaXRjbCA9IGNvbnRhaW5lcjEuZ2V0KCJNTUlUQ0wiKS50b1N0cmluZygpLnRyaW0oKQ0KICAgICAgICBTdHJpbmcgaXRkcyA9IGNvbnRhaW5lcjEuZ2V0KCJNTUlURFMiKS50b1N0cmluZygpLnRyaW0oKQ0KICAgICAgICBpZiAoaXRjbC5lcXVhbHMoIlBIQ04iKSkgew0KICAgICAgICAgIG1vZGlmeSA9IHRydWUNCiAgICAgICAgfQ0KICAgICAgICBpZiAoIW1vZGlmeSAmJiBpdGRzLnRvVXBwZXJDYXNlKCkuY29udGFpbnMoIkNST1dOIikpIHsNCiAgICAgICAgICBtb2RpZnkgPSB0cnVlDQogICAgICAgIH0NCiAgICAgICAgaWYgKG1vZGlmeSkgew0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJU0tVIiwgaXRuby5zdWJzdHJpbmcoMikpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogUmV0cmlldmVzIHdvb2wgamFja2V0IGRhdGEgYmFzZWQgb24gdGhlIGNvbmZpZ3VyYXRpb24gZmxhZy4NCiAgICogQHBhcmFtIGNmaW4gVGhlIGNvbmZpZ3VyYXRpb24gZmxhZw0KICAgKiBAcmV0dXJuIEFuIGFycmF5IGNvbnRhaW5pbmcgc2l6ZSBhbmQgY29sb3IgZGF0YSBmb3IgdGhlIHdvb2wgamFja2V0DQogICAqLw0KDQogIHB1YmxpYyBTdHJpbmdbXSBnZXRXb29sSmFja2V0RGF0YShpbnQgY2Zpbikgew0KICAgIFN0cmluZ1tdIHdqZGF0YSA9IG5ldyBTdHJpbmdbMl0NCiAgICBTdHJpbmcgc2l6ZVdKID0gIiINCiAgICBTdHJpbmcgY29sb3JXSiA9ICIiDQoNCiAgICBDbG9zdXJlIDwgPyA+IHJzTVBEQ0RGRGF0YSA9IHsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPg0KICAgICAgU3RyaW5nIGZ0aWQgPSBjb250YWluZXIuZ2V0KCJRSkZUSUQiKS50b1N0cmluZygpDQogICAgICBpZiAoZnRpZCAhPSBudWxsKSB7DQogICAgICAgIGlmIChmdGlkLnRyaW0oKS5lcXVhbHMoIlNJWkUiKSAmJiBzaXplV0ouaXNFbXB0eSgpKSB7DQogICAgICAgICAgc2l6ZVdKID0gY29udGFpbmVyLmdldCgiUUpPUFROIikudG9TdHJpbmcoKQ0KICAgICAgICB9DQogICAgICAgIGlmIChmdGlkLnRyaW0oKS5lcXVhbHMoIkNPTE9SIikgJiYgY29sb3JXSi5pc0VtcHR5KCkpIHsNCiAgICAgICAgICBTdHJpbmcgb3B0biA9IGNvbnRhaW5lci5nZXQoIlFKT1BUTiIpLnRvU3RyaW5nKCkNCiAgICAgICAgICBEQkFjdGlvbiBxdWVyeTEgPSBkYXRhYmFzZS50YWJsZSgiTVBET1BUIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJQRlRYMzAiKS5idWlsZCgpDQogICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyMSA9IHF1ZXJ5MS5nZXRDb250YWluZXIoKQ0KICAgICAgICAgIGNvbnRhaW5lcjEuc2V0KCJQRkNPTk8iLCBpQ09OTykNCiAgICAgICAgICBjb250YWluZXIxLnNldCgiUEZPUFROIiwgb3B0bikNCiAgICAgICAgICBpZiAocXVlcnkxLnJlYWQoY29udGFpbmVyMSkpIHsNCiAgICAgICAgICAgIGNvbG9yV0ogPSBjb250YWluZXIxLmdldCgiUEZUWDMwIikudG9TdHJpbmcoKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1QRENERiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUUpPUFROIiwgIlFKRlRJRCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIlFKQ09OTyIsIGlDT05PKQ0KICAgIGNvbnRhaW5lci5zZXQoIlFKQ0ZJTiIsIGNmaW4pDQogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDIsIG1heFBhZ2VTaXplLCByc01QRENERkRhdGEpDQogICAgd2pkYXRhWzBdID0gc2l6ZVdKDQogICAgd2pkYXRhWzFdID0gY29sb3JXSg0KICAgIHJldHVybiB3amRhdGENCiAgfQ0KDQogIC8qKg0KICAgKiBSZXRyaWV2ZXMgUEggZGF0YSBiYXNlZCBvbiBpdGVtIG51bWJlciwgaXRlbSBjbGFzcywgY29sb3IgcHJlZml4LCBhbmQgY29uZmlndXJhdGlvbiBmbGFnLg0KICAgKiBAcGFyYW0gaXRubyBUaGUgaXRlbSBudW1iZXINCiAgICogQHBhcmFtIGl0Y2wgVGhlIGl0ZW0gY2xhc3MNCiAgICogQHBhcmFtIGNvbG9yUHJlZml4IFRoZSBjb2xvciBwcmVmaXgNCiAgICogQHBhcmFtIGNmaW4gVGhlIGNvbmZpZ3VyYXRpb24gZmxhZw0KICAgKi8NCg0KICBwdWJsaWMgdm9pZCBnZXRQSERhdGEoU3RyaW5nIGl0bm8sIFN0cmluZyBpdGNsLCBTdHJpbmcgY29sb3JQcmVmaXgsIGludCBjZmluKSB7DQogICAgU3RyaW5nIHNpemUgPSAiIg0KICAgIFN0cmluZyBjb2xvciA9ICIiDQogICAgU3RyaW5nIGl0ZW0gPSBpdG5vDQogICAgU3RyaW5nIGtleXdvcmQgPSBnZXRUcmFuc2xhdGlvbigiRUNaUyIgKyBpdGNsKS50cmltKCkNCg0KICAgIENsb3N1cmUgPCA/ID4gcnNNUERDREZEYXRhID0gew0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyIC0+DQogICAgICBTdHJpbmcgZnRpZCA9IGNvbnRhaW5lci5nZXQoIlFKRlRJRCIpLnRvU3RyaW5nKCkNCiAgICAgIGlmIChmdGlkICE9IG51bGwpIHsNCiAgICAgICAgaWYgKGtleXdvcmQuY29udGFpbnMoZnRpZC50cmltKCkpKSB7DQogICAgICAgICAgc2l6ZSA9IGNvbnRhaW5lci5nZXQoIlFKT1BUTiIpLnRvU3RyaW5nKCkNCiAgICAgICAgICBTdHJpbmcgb3B0biA9IGNvbnRhaW5lci5nZXQoIlFKT1BUTiIpLnRvU3RyaW5nKCkNCiAgICAgICAgICBEQkFjdGlvbiBxdWVyeTEgPSBkYXRhYmFzZS50YWJsZSgiTVBET1BUIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJQRlRYMzAiLCAiUEZUWDE1IikuYnVpbGQoKQ0KICAgICAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lcjEgPSBxdWVyeTEuZ2V0Q29udGFpbmVyKCkNCiAgICAgICAgICBjb250YWluZXIxLnNldCgiUEZDT05PIiwgaUNPTk8pDQogICAgICAgICAgY29udGFpbmVyMS5zZXQoIlBGT1BUTiIsIG9wdG4pDQogICAgICAgICAgaWYgKHF1ZXJ5MS5yZWFkKGNvbnRhaW5lcjEpKSB7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0laRSIsIGNvbnRhaW5lcjEuZ2V0KCJQRlRYMTUiKS50b1N0cmluZygpKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmIChmdGlkLnN0YXJ0c1dpdGgoY29sb3JQcmVmaXgpKSB7DQogICAgICAgICAgY29sb3IgPSBjb250YWluZXIuZ2V0KCJRSk9QVE4iKS50b1N0cmluZygpDQogICAgICAgICAgU3RyaW5nIG9wdG4gPSBjb250YWluZXIuZ2V0KCJRSk9QVE4iKS50b1N0cmluZygpDQogICAgICAgICAgREJBY3Rpb24gcXVlcnkxID0gZGF0YWJhc2UudGFibGUoIk1QRE9QVCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUEZUWDMwIiwgIlBGVFgxNSIpLmJ1aWxkKCkNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXIxID0gcXVlcnkxLmdldENvbnRhaW5lcigpDQogICAgICAgICAgY29udGFpbmVyMS5zZXQoIlBGQ09OTyIsIGlDT05PKQ0KICAgICAgICAgIGNvbnRhaW5lcjEuc2V0KCJQRk9QVE4iLCBvcHRuKQ0KICAgICAgICAgIGlmIChxdWVyeTEucmVhZChjb250YWluZXIxKSkgew0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkNPTFIiLCBjb250YWluZXIxLmdldCgiUEZUWDMwIikudG9TdHJpbmcoKSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUERDREYiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIlFKT1BUTiIsICJRSkZUSUQiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJRSkNPTk8iLCBpQ09OTykNCiAgICBjb250YWluZXIuc2V0KCJRSkNGSU4iLCBjZmluKQ0KICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAyLCBtYXhQYWdlU2l6ZSwgcnNNUERDREZEYXRhKQ0KICAgIGlmICghc2l6ZS5pc0VtcHR5KCkgJiYgIWNvbG9yLmlzRW1wdHkoKSkgew0KICAgICAgU3RyaW5nIG1WYWx1ZSA9IGdldE1hdHJpeFZhbHVlKGl0bm8sIHNpemUsIGNvbG9yLCAiQyIpDQogICAgICBpZiAobVZhbHVlLmlzRW1wdHkoKSkgew0KICAgICAgICBtVmFsdWUgPSBnZXRNYXRyaXhWYWx1ZShpdG5vLCBzaXplLCBjb2xvciwgIkZDIikNCiAgICAgIH0NCiAgICAgIG1pLm91dERhdGEucHV0KCJJU0tVIiwgbVZhbHVlKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBSZXRyaWV2ZXMgbWF0cml4IHZhbHVlIGJhc2VkIG9uIGl0ZW0gbnVtYmVyLCBzaXplLCBjb2xvciwgYW5kIHN1ZmZpeC4NCiAgICogQHBhcmFtIGl0bm8gVGhlIGl0ZW0gbnVtYmVyDQogICAqIEBwYXJhbSBzaXplIFRoZSBzaXplDQogICAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3INCiAgICogQHBhcmFtIHN1ZmZpeCBUaGUgc3VmZml4DQogICAqIEByZXR1cm4gVGhlIG1hdHJpeCB2YWx1ZQ0KICAgKi8NCg0KICBwdWJsaWMgU3RyaW5nIGdldE1hdHJpeFZhbHVlKFN0cmluZyBpdG5vLCBTdHJpbmcgc2l6ZSwgU3RyaW5nIGNvbG9yLCBTdHJpbmcgc3VmZml4KSB7DQogICAgU3RyaW5nIG1WYWx1ZSA9ICIiDQogICAgaW50IGNvdW50ID0gMA0KICAgIENsb3N1cmUgPCA/ID4gcnNNUE1YVkFEYXRhID0gew0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyIC0+DQogICAgICBTdHJpbmcgbXJjMSA9IGNvbnRhaW5lci5nZXQoIlFCTVJDMSIpLnRvU3RyaW5nKCkNCiAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICBpZiAobXJjMSAhPSBudWxsICYmIGNvdW50ID09IDEpIHsNCiAgICAgICAgaWYgKG1yYzEuc3RhcnRzV2l0aCgiMFAiKSkgew0KICAgICAgICAgIG1WYWx1ZSA9IG1yYzEuc3Vic3RyaW5nKDIpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUE1YVkEiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIlFCTVJDMSIsICJRQk1YSUQiKS5idWlsZCgpDQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBjb250YWluZXIuc2V0KCJRQkNPTk8iLCBpQ09OTykNCiAgICBjb250YWluZXIuc2V0KCJRQk1YSUQiLCBpdG5vICsgc3VmZml4KQ0KICAgIGNvbnRhaW5lci5zZXQoIlFCTVZDMSIsIHNpemUpDQogICAgY29udGFpbmVyLnNldCgiUUJNVkMyIiwgY29sb3IpDQogICAgY29udGFpbmVyLnNldCgiUUJNVk4xIiwgMCkNCiAgICBjb250YWluZXIuc2V0KCJRQk1WTjIiLCAwKQ0KICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCA2LCBtYXhQYWdlU2l6ZSwgcnNNUE1YVkFEYXRhKQ0KDQogICAgcmV0dXJuIG1WYWx1ZQ0KICB9DQoNCiAgLyoqDQogICAqIFJldHJpZXZlcyBkZWxpdmVyeSBpbmZvcm1hdGlvbiBiYXNlZCBvbiBvcmRlciBudW1iZXIsIGRlZmF1bHQgbW9kZWwsIHRyYW5zcG9ydCB0eXBlLCBwdXJjaGFzZSBvcmRlciBudW1iZXIsIHBvc2l0aW9uLCBhbmQgc3RhdHVzLg0KICAgKiBAcGFyYW0gb3JubyBUaGUgb3JkZXIgbnVtYmVyDQogICAqIEBwYXJhbSBkZWZNb2RsIFRoZSBkZWZhdWx0IG1vZGVsDQogICAqIEBwYXJhbSB0ZXB5IFRoZSB0cmFuc3BvcnQgdHlwZQ0KICAgKiBAcGFyYW0gcG9uciBUaGUgcHVyY2hhc2Ugb3JkZXIgbnVtYmVyDQogICAqIEBwYXJhbSBwb3N4IFRoZSBwb3NpdGlvbg0KICAgKiBAcGFyYW0gc3RhdHVzIFRoZSBzdGF0dXMNCiAgICovDQoNCiAgcHVibGljIHZvaWQgZ2V0RGVsaXZlcnlJbmZvKFN0cmluZyBvcm5vLCBTdHJpbmcgZGVmTW9kbCwgU3RyaW5nIHRlcHksIGludCBwb25yLCBpbnQgcG9zeCwgU3RyaW5nIHN0YXR1cykgew0KICAgIFN0cmluZyBjYXJyID0gIiINCiAgICBTdHJpbmcgbW9kbCA9ICIiDQogICAgU3RyaW5nIGV0cm4gPSAiIg0KICAgIFN0cmluZyBzaGlwRGF0ZSA9ICIiDQogICAgU3RyaW5nIGl2bm8gPSAiIg0KICAgIFN0cmluZyBkbGl4ID0gIiINCiAgICBpbnQgY291bnRlciA9IDANCg0KICAgIENsb3N1cmUgPCA/ID4gcnNNSERJU0hEYXRhID0gew0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyIC0+DQogICAgICBTdHJpbmcgZGxpeFRlbXAgPSBjb250YWluZXIuZ2V0KCJVUkRMSVgiKS50b1N0cmluZygpDQogICAgICBpZiAoZGxpeFRlbXAgIT0gbnVsbCAmJiBjb3VudGVyID09IDApIHsNCiAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxDQogICAgICAgIEhhc2hNYXAgZGVsaXZlcnkgPSBkZWxpdmVyeUxpc3QuZ2V0KGRsaXhUZW1wKQ0KICAgICAgICBpZiAoZGVsaXZlcnkgIT0gbnVsbCkgew0KICAgICAgICAgIGNhcnIgPSBkZWxpdmVyeS5nZXQoIkNBUlIiKQ0KICAgICAgICAgIG1vZGwgPSBkZWxpdmVyeS5nZXQoIk1PREwiKQ0KICAgICAgICAgIGV0cm4gPSBkZWxpdmVyeS5nZXQoIkVUUk4iKQ0KICAgICAgICAgIHNoaXBEYXRlID0gZGVsaXZlcnkuZ2V0KCJTSERUIikNCiAgICAgICAgICBpdm5vID0gZGVsaXZlcnkuZ2V0KCJJVk5PIikNCiAgICAgICAgICBjYXJyID0gZGVsaXZlcnkuZ2V0KCJDQVJSIikNCiAgICAgICAgICBkbGl4ID0gZGVsaXZlcnkuZ2V0KCJETElYIikNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBEQkFjdGlvbiBxdWVyeTEgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNIIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJPUURMSVgiLCAiT1FNT0RGIiwgIk9RTU9ETCIsICJPUURTRFQiLCAiT1FFVFJOIiwgIk9RUEdSUyIsICJPUVdITE8iKS5idWlsZCgpDQogICAgICAgICAgREJDb250YWluZXIgY29udGFpbmVyMSA9IHF1ZXJ5MS5nZXRDb250YWluZXIoKQ0KICAgICAgICAgIGNvbnRhaW5lcjEuc2V0KCJPUUNPTk8iLCBpQ09OTykNCiAgICAgICAgICBjb250YWluZXIxLnNldCgiT1FJTk9VIiwgMSkNCiAgICAgICAgICBkbGl4ID0gY29udGFpbmVyLmdldCgiVVJETElYIikudG9TdHJpbmcoKS50cmltKCkNCiAgICAgICAgICBjb250YWluZXIxLnNldCgiT1FETElYIiwgZGxpeCBhcyBMb25nKQ0KICAgICAgICAgIGlmIChxdWVyeTEucmVhZChjb250YWluZXIxKSkgew0KICAgICAgICAgICAgZXRybiA9IGNvbnRhaW5lcjEuZ2V0KCJPUUVUUk4iKQ0KICAgICAgICAgICAgU3RyaW5nIG1vZGYgPSBjb250YWluZXIxLmdldCgiT1FNT0RGIikudG9TdHJpbmcoKS50cmltKCkNCiAgICAgICAgICAgIGlmICghbW9kZi5pc0VtcHR5KCkpIHsNCiAgICAgICAgICAgICAgbW9kbCA9IG1vZGYNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1vZGwgPSBjb250YWluZXIxLmdldCgiT1FNT0RMIikudG9TdHJpbmcoKS50cmltKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbW9kbCA9IGRlZk1vZGwNCiAgICAgICAgICB9DQogICAgICAgICAgY2FyciA9IGdldENhcnJpZXIobW9kbCkNCiAgICAgICAgICBpbnQgcGdycyA9IChjb250YWluZXIxLmdldCgiT1FQR1JTIikudG9TdHJpbmcoKS50cmltKCkpIGFzIEludGVnZXINCiAgICAgICAgICBpZiAoc3RhdHVzLmVxdWFscygiU3VibWl0dGVkIikpIHsNCiAgICAgICAgICAgIHNoaXBEYXRlID0gY29udGFpbmVyMS5nZXQoIk9RRFNEVCIpLnRvU3RyaW5nKCkNCiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cy5lcXVhbHMoIlNoaXBwZWQiKSAmJiBwZ3JzID4gNTApIHsNCiAgICAgICAgICAgIERCQWN0aW9uIHF1ZXJ5MiA9IGRhdGFiYXNlLnRhYmxlKCJPREhFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIlVBRExEVCIsICJVQUlWTk8iKS5idWlsZCgpDQogICAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXIyID0gcXVlcnkyLmdldENvbnRhaW5lcigpDQogICAgICAgICAgICBjb250YWluZXIyLnNldCgiVUFDT05PIiwgaUNPTk8pDQogICAgICAgICAgICBjb250YWluZXIyLnNldCgiVUFPUk5PIiwgb3JubykNCiAgICAgICAgICAgIGNvbnRhaW5lcjIuc2V0KCJVQVdITE8iLCBjb250YWluZXIxLmdldCgiT1FXSExPIikpDQogICAgICAgICAgICBjb250YWluZXIyLnNldCgiVUFETElYIiwgZGxpeCBhcyBMb25nKQ0KICAgICAgICAgICAgY29udGFpbmVyMi5zZXQoIlVBVEVQWSIsIHRlcHkpDQogICAgICAgICAgICBpZiAocXVlcnkyLnJlYWQoY29udGFpbmVyMikpIHsNCiAgICAgICAgICAgICAgc2hpcERhdGUgPSBjb250YWluZXIyLmdldCgiVUFETERUIikudG9TdHJpbmcoKS50cmltKCkNCiAgICAgICAgICAgICAgaXZubyA9IGNvbnRhaW5lcjIuZ2V0KCJVQUlWTk8iKS50b1N0cmluZygpLnRyaW0oKQ0KICAgICAgICAgICAgICBpZiAoaXZuby5lcXVhbHMoIjAiKSkgew0KICAgICAgICAgICAgICAgIGl2bm8gPSAiIg0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGRlbGl2ZXJ5ID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+ICgpDQogICAgICAgICAgZGVsaXZlcnkucHV0KCJDQVJSIiwgY2FycikNCiAgICAgICAgICBkZWxpdmVyeS5wdXQoIk1PREwiLCBtb2RsKQ0KICAgICAgICAgIGRlbGl2ZXJ5LnB1dCgiRVRSTiIsIGV0cm4pDQogICAgICAgICAgZGVsaXZlcnkucHV0KCJTSERUIiwgc2hpcERhdGUpDQogICAgICAgICAgZGVsaXZlcnkucHV0KCJJVk5PIiwgaXZubykNCiAgICAgICAgICBkZWxpdmVyeS5wdXQoIkRMSVgiLCBkbGl4VGVtcCkNCiAgICAgICAgICBkZWxpdmVyeUxpc3QucHV0KGRsaXhUZW1wLCBkZWxpdmVyeSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1IRElTTCIpLmluZGV4KCIxMCIpLnNlbGVjdGlvbigiVVJETElYIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgY29udGFpbmVyLnNldCgiVVJDT05PIiwgaUNPTk8pDQogICAgY29udGFpbmVyLnNldCgiVVJST1JDIiwgMykNCiAgICBjb250YWluZXIuc2V0KCJVUlJJRE4iLCBvcm5vKQ0KICAgIGNvbnRhaW5lci5zZXQoIlVSUklETCIsIHBvbnIpDQogICAgY29udGFpbmVyLnNldCgiVVJSSURYIiwgcG9zeCkNCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgNSwgbWF4UGFnZVNpemUsIHJzTUhESVNIRGF0YSkNCg0KICAgIG1pLm91dERhdGEucHV0KCJDQVJSIiwgY2FycikNCiAgICBtaS5vdXREYXRhLnB1dCgiTU9ETCIsIG1vZGwpDQogICAgbWkub3V0RGF0YS5wdXQoIkVUUk4iLCBldHJuKQ0KICAgIG1pLm91dERhdGEucHV0KCJTSERUIiwgc2hpcERhdGUpDQogICAgbWkub3V0RGF0YS5wdXQoIklWTk8iLCBpdm5vKQ0KICAgIG1pLm91dERhdGEucHV0KCJETElYIiwgZGxpeCkNCiAgfQ0KDQogIC8qKg0KICAgKiBSZXRyaWV2ZXMgY2FycmllciBiYXNlZCBvbiBtb2RlbC4NCiAgICogQHBhcmFtIG1vZGwgVGhlIG1vZGVsDQogICAqIEByZXR1cm4gVGhlIGNhcnJpZXINCiAgICovDQogIHB1YmxpYyBTdHJpbmcgZ2V0Q2FycmllcihTdHJpbmcgbW9kbCkgew0KICAgIFN0cmluZyBjYXJyaWVyID0gIiINCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDU1lUQUIiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkNUVFgxNSIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIkNUQ09OTyIsIGlDT05PKQ0KICAgIGNvbnRhaW5lci5zZXQoIkNURElWSSIsICIiKQ0KICAgIGNvbnRhaW5lci5zZXQoIkNUTE5DRCIsICJHQiIpDQogICAgY29udGFpbmVyLnNldCgiQ1RTVENPIiwgIk1PREwiKQ0KICAgIGNvbnRhaW5lci5zZXQoIkNUU1RLWSIsIG1vZGwpDQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgew0KICAgICAgY2FycmllciA9IGNvbnRhaW5lci5nZXQoIkNUVFgxNSIpLnRvU3RyaW5nKCkNCiAgICB9DQogICAgcmV0dXJuIGNhcnJpZXINCiAgfQ0KfQ=="}}}