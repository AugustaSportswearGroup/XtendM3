{"programModules":{"EXT104MI":{"program":"EXT104MI","triggers":{},"transactions":{"LstHeadCharges":{"sourceUuid":"12bde049-9838-4b8e-a9c9-2f23267bd979","name":"LstHeadCharges","program":"EXT104MI","description":"Lst Order Head Charges","active":true,"multi":true,"modified":1699848777167,"modifiedBy":"SADANGJ","outputFields":[{"name":"OREF","description":"Ecommerce order number","length":30,"mandatory":false,"type":"A"},{"name":"ORNO","description":"Order number","length":10,"mandatory":false,"type":"A"},{"name":"CRID","description":"Charge","length":6,"mandatory":false,"type":"A"},{"name":"CRD0","description":"Description","length":30,"mandatory":false,"type":"A"},{"name":"CRAM","description":"Charge amount","length":16,"mandatory":false,"type":"A"}],"inputFields":[{"name":"ORNO","description":"Order number","length":30,"mandatory":true,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"12bde049-9838-4b8e-a9c9-2f23267bd979":{"uuid":"12bde049-9838-4b8e-a9c9-2f23267bd979","updated":1711989775796,"updatedBy":"ABHISHEK","created":1699592207324,"createdBy":"SADANGJ","apiVersion":"0.21","beVersion":"16.0.0.20240116163623.6","language":"GROOVY","codeHash":"5EBB4E75A1F559EE62BC660C6A512B060A2121593546A8DDD4C8E45DAF3F9D1B","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHVzZWQgdG8gbGlzdCBjdXN0b21lciBvcmRlciBsaW5lcw0KICoNCiAqIE5hbWU6IEVYVDEwNE1JLkxzdEhlYWRDaGFyZ2VzDQogKiBEZXNjcmlwdGlvbjogVHJhbnNhY3Rpb24gdXNlZCB0byBnZXQgaGVhZCBjaGFyZ2VzIGZvciBlY29tIG9yZGVycw0KICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uDQogKjIwMjMxMDE5ICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIEdldCBoZWFkIGNoYXJnZXMgZm9yIGVjb20gb3JkZXJzICovDQoNCnB1YmxpYyBjbGFzcyBMc3RIZWFkQ2hhcmdlcyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UNCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcg0KICBwcml2YXRlIGludCBpQ09OTywgbWF4UGFnZVNpemUgPSAxMDAwMA0KICBwcml2YXRlIFN0cmluZyBpT1JOTw0KICBwcml2YXRlIE1hcCA8IFN0cmluZywgSGFzaE1hcCA+IG9yZGVyTGlzdCA9IG5ldyBUcmVlTWFwIDwgU3RyaW5nLCBIYXNoTWFwID4gKCkNCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkSW5wdXQgPSB0cnVlDQoNCiAgcHVibGljIExzdEhlYWRDaGFyZ2VzKE1JQVBJIG1pLCBQcm9ncmFtQVBJIHByb2dyYW0sIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBNSUNhbGxlckFQSSBtaUNhbGxlcikgew0KICAgIHRoaXMubWkgPSBtaQ0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UNCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXINCiAgfQ0KDQogIC8qKg0KICAgKiBNYWluIG1ldGhvZCB0byBsaXN0IGhlYWQgY2hhcmdlcyBmb3IgZS1jb21tZXJjZSBvcmRlcnMuDQogICAqLw0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgaUNPTk8gPSBwcm9ncmFtLkxEQVpELkNPTk8gYXMgSW50ZWdlcg0KICAgIGlPUk5PID0gKG1pLmluRGF0YS5nZXQoIk9STk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JOTyIpLnRyaW0oKQ0KICAgIGlmICghdmFsaWRhdGVJbnB1dCgpKSB7DQogICAgICBpZiAoIXZhbGlkYXRlQmFzZWRPbk9SRUYoKSkgew0KICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBPcmRlciBOdW1iZXIgIiArIGlPUk5PKQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZvciAoTWFwLkVudHJ5IDwgU3RyaW5nLCBIYXNoTWFwID4gZW50cnk6IG9yZGVyTGlzdC5lbnRyeVNldCgpKSB7DQogICAgICBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBvcmRlciA9IChIYXNoTWFwKSBlbnRyeS5nZXRWYWx1ZSgpDQogICAgICBTdHJpbmcgb3JubyA9IG9yZGVyLmdldCgiT1JOTyIpDQogICAgICBTdHJpbmcgb3JlZiA9IG9yZGVyLmdldCgiT1JFRiIpDQogICAgICBsaXN0SGVhZENoYXJnZXMob3Jubywgb3JlZikNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogVmFsaWRhdGVzIHRoZSBpbnB1dCBwYXJhbWV0ZXJzLg0KICAgKg0KICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGlucHV0IGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2UuDQogICAqLw0KDQogIHB1YmxpYyBib29sZWFuIHZhbGlkYXRlSW5wdXQoKSB7DQogICAgaWYgKCFpT1JOTy50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAvL1ZhbGlkYXRlIE9yZGVyIE51bWJlcg0KICAgICAgTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBwYXJhbXMgPSBbIk9STk8iOiBpT1JOTy50b1N0cmluZygpLnRyaW0oKV0NCiAgICAgIENsb3N1cmUgPCA/ID4gY2FsbGJhY2sgPSB7DQogICAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gPT0gbnVsbCkgew0KICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+IG9yZGVyID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+ICgpDQogICAgICAgICAgb3JkZXIucHV0KCJPUk5PIiwgaU9STk8pDQogICAgICAgICAgb3JkZXIucHV0KCJPUlRQIiwgcmVzcG9uc2UuT1JUUCkNCiAgICAgICAgICBvcmRlci5wdXQoIkNVQ0QiLCByZXNwb25zZS5DVUNEKQ0KICAgICAgICAgIG9yZGVyLnB1dCgiT1JFRiIsIHJlc3BvbnNlLk9SRUYpDQogICAgICAgICAgb3JkZXJMaXN0LnB1dChpT1JOTywgb3JkZXIpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkdldE9yZGVySGVhZCIsIHBhcmFtcywgY2FsbGJhY2spDQogICAgfSBlbHNlIHsNCiAgICAgIG1pLmVycm9yKCJPcmRlciBudW1iZXIgbXVzdCBiZSBlbnRlcmVkLiIpDQogICAgICB2YWxpZElucHV0ID0gZmFsc2UNCiAgICB9DQogICAgcmV0dXJuIHZhbGlkSW5wdXQNCiAgfQ0KDQogIC8qKg0KICAgKiBWYWxpZGF0ZXMgdGhlIGlucHV0IGJhc2VkIG9uIG9yZGVyIHJlZmVyZW5jZS4NCiAgICoNCiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnB1dCBpcyB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlLg0KICAgKi8NCg0KICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZUJhc2VkT25PUkVGKCkgew0KICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cHJlc3Npb24gPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiT09IRUFEIikNCiAgICAvLyBzZXQgRWNvbSBvcmRlciBudW1iZXIgZmlsdGVyDQogICAgU3RyaW5nIG9yZWYgPSAiRUMiICsgaU9STk8NCiAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5lcSgiT0FPUkVGIiwgb3JlZikNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPT0hFQUQiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3Rpb24oIk9BT1JOTyIsICJPQU9SVFAiLCAiT0FDVUNEIiwgIk9BT1JFRiIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQ0KICAgIGNvbnRhaW5lci5zZXQoIk9BQ09OTyIsIGlDT05PKQ0KICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAxLCBtYXhQYWdlU2l6ZSwgcnNSZWFkT3JkZXJzKQ0KICAgIHJldHVybiB2YWxpZElucHV0DQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IHJzUmVhZE9yZGVycyA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgLT4NCiAgICBTdHJpbmcgb3JubyA9IGNvbnRhaW5lci5nZXQoIk9BT1JOTyIpLnRvU3RyaW5nKCkNCiAgICBpZiAob3JubyAhPSBudWxsKSB7DQogICAgICB2YWxpZElucHV0ID0gdHJ1ZQ0KICAgICAgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gb3JkZXIgPSBuZXcgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gKCkNCiAgICAgIG9yZGVyLnB1dCgiT1JOTyIsIG9ybm8pDQogICAgICBvcmRlci5wdXQoIk9SVFAiLCBjb250YWluZXIuZ2V0KCJPQU9SVFAiKS50b1N0cmluZygpKQ0KICAgICAgb3JkZXIucHV0KCJDVUNEIiwgY29udGFpbmVyLmdldCgiT0FDVUNEIikudG9TdHJpbmcoKSkNCiAgICAgIG9yZGVyLnB1dCgiT1JFRiIsIGNvbnRhaW5lci5nZXQoIk9BT1JFRiIpLnRvU3RyaW5nKCkpDQogICAgICBvcmRlckxpc3QucHV0KG9ybm8sIG9yZGVyKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBMaXN0cyBoZWFkIGNoYXJnZXMgZm9yIHRoZSBzcGVjaWZpZWQgb3JkZXIuDQogICAqDQogICAqIEBwYXJhbSBvcm5vIFRoZSBvcmRlciBudW1iZXIuDQogICAqIEBwYXJhbSBvcmVmIFRoZSBvcmRlciByZWZlcmVuY2UuDQogICAqLw0KDQogIHB1YmxpYyB2b2lkIGxpc3RIZWFkQ2hhcmdlcyhTdHJpbmcgb3JubywgU3RyaW5nIG9yZWYpIHsNCiAgICBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiT1JOTyI6IGlPUk5PLnRvU3RyaW5nKCkudHJpbSgpXQ0KICAgIENsb3N1cmUgPCA/ID4gY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPg0KICAgICAgaWYgKHJlc3BvbnNlLk9STk8gIT0gbnVsbCkgew0KICAgICAgICBsb25nIGRsaXggPSByZXNwb25zZS5ETElYID09IG51bGwgPyAwTCA6IHJlc3BvbnNlLkRMSVggYXMgTG9uZw0KICAgICAgICBkb3VibGUgY3JhbSA9IHJlc3BvbnNlLkNSQU0gPT0gbnVsbCA/IDBEIDogcmVzcG9uc2UuQ1JBTSBhcyBEb3VibGUNCiAgICAgICAgaW50IGNydHkgPSByZXNwb25zZS5DUlRZID09IG51bGwgPyAwIDogcmVzcG9uc2UuQ1JUWSBhcyBJbnRlZ2VyDQogICAgICAgIGlmIChkbGl4ID09IDAgJiYgY3J0eSA9PSAwICYmIGNyYW0gIT0gMCkgew0KICAgICAgICAgIGlmIChvcmVmLnN0YXJ0c1dpdGgoIkVDIikpIHsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCJPUkVGIiwgb3JlZikNCiAgICAgICAgICB9DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIk9STk8iLCByZXNwb25zZS5PUk5PKQ0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJDUklEIiwgcmVzcG9uc2UuQ1JJRCkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQ1JEMCIsIHJlc3BvbnNlLkNSRDApDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkNSQU0iLCByZXNwb25zZS5DUkFNKQ0KICAgICAgICAgIG1pLndyaXRlKCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJPSVMxMDBNSSIsICJMc3RDb25uQ09DaGFyZ2UiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICB9DQp9"}}}