{"programModules":{"EXT415MI":{"program":"EXT415MI","triggers":{},"transactions":{"UpdSwissCarton":{"sourceUuid":"4a619e68-62cb-477a-a45c-9bfd1c2d4630","name":"UpdSwissCarton","program":"EXT415MI","description":"Update Swiss Carton Label","active":true,"multi":false,"modified":1695809184866,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":true,"type":"A"},{"name":"TRTP","description":"Order Type","length":3,"mandatory":true,"type":"A"},{"name":"TTYP","description":"Stock Transaction Type","length":2,"mandatory":true,"type":"N"},{"name":"LFMT","description":"Carton Label Format","length":6,"mandatory":false,"type":"A"},{"name":"SFMT","description":"Ship/Stage Label Format","length":6,"mandatory":false,"type":"A"},{"name":"VOL3","description":"Volume","length":13,"mandatory":false,"type":"N"},{"name":"LANE","description":"Lane","length":4,"mandatory":false,"type":"N"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"4a619e68-62cb-477a-a45c-9bfd1c2d4630":{"uuid":"4a619e68-62cb-477a-a45c-9bfd1c2d4630","updated":1695895497512,"updatedBy":"M3CONSADMX","created":1695808825473,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20230719154728.6","language":"GROOVY","codeHash":"2D362AF8195A98AAB6665759A0E4C109E054FD2AEAD56F466392A6100E18C911","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVFlQRSB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDQxNU1JLlVwZFN3aXNzQ2FydG9uCiAqIERlc2NyaXB0aW9uOiBVcGRhdGluZyByZWNvcmRzIHRvIEVYVFlQRSB0YWJsZQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24KICoyMDIzMDkyNyAgU3VyaXlhTkBmb3J0dWRlLmNvICAgIFVwZGF0aW5nIHJlY29yZHMgdG8gRVhUWVBFIHRhYmxlCiAqCiAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgVXBkU3dpc3NDYXJ0b24gZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgoKICBwcml2YXRlIFN0cmluZyBpV0hMTywgaVRSVFAsIGlMRk1ULCBpU0ZNVAogIHByaXZhdGUgaW50IGlDT05PLCBpTEFORSwgaVRUWVAKICBwcml2YXRlIERvdWJsZSBpVk9MMwogIHByaXZhdGUgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQogIAogIHB1YmxpYyBVcGRTd2lzc0NhcnRvbihNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICB9CiAgLyoqCiAgICoqIE1haW4gZnVuY3Rpb24KICAgKiBAcGFyYW0KICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgbWFpbigpIHsKICAgIGlXSExPID0gKG1pLmluRGF0YS5nZXQoIldITE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpCiAgICBpVFJUUCA9IChtaS5pbkRhdGEuZ2V0KCJUUlRQIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJUUlRQIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRSVFAiKQogICAgaUxGTVQgPSAobWkuaW5EYXRhLmdldCgiTEZNVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTEZNVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJMRk1UIikKICAgIGlTRk1UID0gKG1pLmluRGF0YS5nZXQoIlNGTVQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNGTVQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiU0ZNVCIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaVZPTDMgPSAobWkuaW5EYXRhLmdldCgiVk9MMyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVk9MMyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlZPTDMiKSBhcyBEb3VibGUKICAgIGlMQU5FID0gKG1pLmluRGF0YS5nZXQoIkxBTkUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxBTkUiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJMQU5FIikgYXMgSW50ZWdlcgogICAgaVRUWVAgPSAobWkuaW5EYXRhLmdldCgiVFRZUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVFRZUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlRUWVAiKSBhcyBJbnRlZ2VyCiAgICAKICAgIHZhbGlkYXRlSW5wdXQoKQogICAgaWYgKHZhbGlkSW5wdXQpIHsKICAgICAgIHVwZGF0ZVJlY29yZCgpCiAgICB9CiAgIAogIH0KICAKICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdmFsaWRhdGVJbnB1dCgpIHsKCiAgICAvL1ZhbGlkYXRlIENvbXBhbnkgTnVtYmVyCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBkZWYgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBpQ09OTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIAogICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIldITE8iOiBpV0hMTy50b1N0cmluZygpLnRyaW0oKV0KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5XSExPID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBpV0hMTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDA1TUkiLCAiR2V0V2FyZWhvdXNlIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIAogICAgCiAgICAvL1ZhbGlkYXRlIE9yZGVyIFR5cGUKICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiVFJUUCI6IGlUUlRQLnRvU3RyaW5nKCkudHJpbSgpLCJUVFlQIjogaVRUWVAudG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuVFJUUCA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgT3JkZXIgVHlwZSAtIFRyYW5zYWN0aW9uIFR5cGUiKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJDUlMyMDBNSSIsICJMc3RPcmRlclR5cGUiLCBwYXJhbXMsIGNhbGxiYWNrKQogIAogIH0KICAKICAvKioKICAgKlVwZGF0ZSByZWNvcmRzIHRvIEVYVFlQRSB0YWJsZQogICAqIEBwYXJhbXMgCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdXBkYXRlUmVjb3JkKCkgewogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUWVBFIikuc2VsZWN0aW9uKCJFWENITk8iKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQoKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhXSExPIiwgaVdITE8pCiAgICBjb250YWluZXIuc2V0KCJFWFRSVFAiLCBpVFJUUCkKICAgIGNvbnRhaW5lci5zZXQoIkVYVFRZUCIsIGlUVFlQKQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgewogICAgICBxdWVyeS5yZWFkTG9jayhjb250YWluZXIsIHVwZGF0ZUNhbGxCYWNrKQogICAgfSBlbHNlIHsKICAgICAgbWkuZXJyb3IoIlJlY29yZCBkb2VzIG5vdCBFeGlzdC4iKQogICAgICByZXR1cm4KICAgIH0KICB9CgogIENsb3N1cmUgPCA/ID4gdXBkYXRlQ2FsbEJhY2sgPSB7CiAgICBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+CiAgICBpbnQgQ0hOTyA9IGxvY2tlZFJlc3VsdC5nZXQoIkVYQ0hOTyIpCiAgICBpZiAoIWlMRk1ULnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgaWYgKGlMRk1ULnRyaW0oKS5lcXVhbHMoIj8iKSkgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTEZNVCIsICIiKQogICAgICB9IGVsc2UgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTEZNVCIsIGlMRk1UKQogICAgICB9CiAgICB9CiAgICBpZiAoIWlTRk1ULnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgaWYgKGlTRk1ULnRyaW0oKS5lcXVhbHMoIj8iKSkgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYU0ZNVCIsICIiKQogICAgICB9IGVsc2UgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYU0ZNVCIsIGlTRk1UKQogICAgICB9CiAgICB9CiAgICBpZiAobWkuaW5EYXRhLmdldCgiVk9MMyIpICE9IG51bGwgJiYgIW1pLmluRGF0YS5nZXQoIlZPTDMiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYVk9MMyIsIGlWT0wzKQogICAgfSAKICAgIGlmKG1pLmluRGF0YS5nZXQoIkxBTkUiKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJMQU5FIikudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExBTkUiLCBpTEFORSkKICAgIH0gCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTVRNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENITk8iLCBDSE5PICsgMSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgfQp9"}}}