{"programModules":{"EXT415MI":{"program":"EXT415MI","triggers":{},"transactions":{"AddSwissCarton":{"sourceUuid":"4a619e68-62cb-477a-a44c-9bfd1c2d4630","name":"AddSwissCarton","program":"EXT415MI","description":"Add Swiss Carton Label","active":true,"multi":false,"modified":1695809162132,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":true,"type":"A"},{"name":"TRTP","description":"Order Type","length":3,"mandatory":true,"type":"A"},{"name":"TTYP","description":"Stock Transaction Type","length":2,"mandatory":true,"type":"N"},{"name":"LFMT","description":"Carton Label Format","length":6,"mandatory":false,"type":"A"},{"name":"SFMT","description":"Ship/Stage Label Format","length":6,"mandatory":false,"type":"A"},{"name":"VOL3","description":"Volume","length":13,"mandatory":false,"type":"N"},{"name":"LANE","description":"Lane","length":4,"mandatory":false,"type":"N"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"4a619e68-62cb-477a-a44c-9bfd1c2d4630":{"uuid":"4a619e68-62cb-477a-a44c-9bfd1c2d4630","updated":1695895167993,"updatedBy":"M3CONSADMX","created":1695808294020,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20230719154728.6","language":"GROOVY","codeHash":"5D498E1152A90FC5C63F7E51D2AF68A277CA000464170469BE4882BD3011882A","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVFlQRSB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDQxNU1JLkFkZFN3aXNzQ2FydG9uCiAqIERlc2NyaXB0aW9uOiBBZGRpbmcgcmVjb3JkcyB0byBFWFRZUEUgdGFibGUgCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwOTI3ICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIEFkZGluZyByZWNvcmRzIHRvIEVYVFlQRSB0YWJsZSAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgQWRkU3dpc3NDYXJ0b24gZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgoKICBwcml2YXRlIFN0cmluZyBpV0hMTywgaVRSVFAsIGlMRk1ULCBpU0ZNVAogIHByaXZhdGUgaW50IGlDT05PLCBpTEFORSwgaVRUWVAKICBwcml2YXRlIERvdWJsZSBpVk9MMwogIHByaXZhdGUgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQoKICBwdWJsaWMgQWRkU3dpc3NDYXJ0b24oTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0sIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7CiAgICB0aGlzLm1pID0gbWkKICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyCiAgfQogIC8qKgogICAqKiBNYWluIGZ1bmN0aW9uCiAgICogQHBhcmFtCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIG1haW4oKSB7CiAgICBpV0hMTyA9IChtaS5pbkRhdGEuZ2V0KCJXSExPIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJXSExPIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIldITE8iKQogICAgaVRSVFAgPSAobWkuaW5EYXRhLmdldCgiVFJUUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVFJUUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJUUlRQIikKICAgIGlMRk1UID0gKG1pLmluRGF0YS5nZXQoIkxGTVQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxGTVQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTEZNVCIpCiAgICBpU0ZNVCA9IChtaS5pbkRhdGEuZ2V0KCJTRk1UIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTRk1UIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNGTVQiKQoKICAgIGlDT05PID0gKG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/IHByb2dyYW0uTERBWkQuQ09OTyBhcyBJbnRlZ2VyIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXIKICAgIGlWT0wzID0gKG1pLmluRGF0YS5nZXQoIlZPTDMiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlZPTDMiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJWT0wzIikgYXMgRG91YmxlCiAgICBpTEFORSA9IChtaS5pbkRhdGEuZ2V0KCJMQU5FIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJMQU5FIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiTEFORSIpIGFzIEludGVnZXIKICAgIGlUVFlQID0gKG1pLmluRGF0YS5nZXQoIlRUWVAiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRUWVAiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJUVFlQIikgYXMgSW50ZWdlcgoKICAgIHZhbGlkYXRlSW5wdXQoKQogICAgaWYgKHZhbGlkSW5wdXQpIHsKICAgICAgaW5zZXJ0UmVjb3JkKCkKICAgIH0KICB9CiAgCiAgLyoqCiAgICpWYWxpZGF0ZSBSZWNvcmRzCiAgICogQHBhcmFtcwogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIHZhbGlkYXRlSW5wdXQoKSB7CgogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIldITE8iOiBpV0hMTy50b1N0cmluZygpLnRyaW0oKV0KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5XSExPID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBpV0hMTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDA1TUkiLCAiR2V0V2FyZWhvdXNlIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIAogICAgLy9WYWxpZGF0ZSBPcmRlciBUeXBlCiAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIlRSVFAiOiBpVFJUUC50b1N0cmluZygpLnRyaW0oKSwiVFRZUCI6IGlUVFlQLnRvU3RyaW5nKCkudHJpbSgpXQogICAgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLlRSVFAgPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE9yZGVyIFR5cGUgLSBUcmFuc2FjdGlvbiBUeXBlIikKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTMjAwTUkiLCAiTHN0T3JkZXJUeXBlIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIAogIH0KICAKICAvKioKICAgKkluc2VydCByZWNvcmRzIHRvIEVYVFlQRSB0YWJsZQogICAqIEBwYXJhbXMgCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgaW5zZXJ0UmVjb3JkKCkgewogICAgREJBY3Rpb24gYWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkVYVFlQRSIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIHF1ZXJ5ID0gYWN0aW9uLmdldENvbnRhaW5lcigpCgogICAgcXVlcnkuc2V0KCJFWFdITE8iLCBpV0hMTykKICAgIHF1ZXJ5LnNldCgiRVhUUlRQIiwgaVRSVFApCiAgICBxdWVyeS5zZXQoIkVYTEZNVCIsIGlMRk1UKQogICAgcXVlcnkuc2V0KCJFWFNGTVQiLCBpU0ZNVCkKICAgIHF1ZXJ5LnNldCgiRVhDT05PIiwgaUNPTk8gYXMgSW50ZWdlcikKICAgIHF1ZXJ5LnNldCgiRVhWT0wzIiwgaVZPTDMgYXMgRG91YmxlKQogICAgcXVlcnkuc2V0KCJFWExBTkUiLCBpTEFORSBhcyBJbnRlZ2VyKQogICAgcXVlcnkuc2V0KCJFWFRUWVAiLCBpVFRZUCBhcyBJbnRlZ2VyKQogICAgcXVlcnkuc2V0KCJFWFJHRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWFJHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhMTVRNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYQ0hOTyIsIDApCiAgICBxdWVyeS5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogICAgYWN0aW9uLmluc2VydChxdWVyeSwgcmVjb3JkRXhpc3RzKQogIH0KCiAgQ2xvc3VyZSByZWNvcmRFeGlzdHMgPSB7CiAgICBtaS5lcnJvcigiUmVjb3JkIEFscmVhZHkgRXhpc3RzIikKICAgIHJldHVybgogIH0KfQ=="}}}