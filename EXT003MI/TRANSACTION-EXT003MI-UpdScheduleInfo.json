{"programModules":{"EXT003MI":{"program":"EXT003MI","triggers":{},"transactions":{"UpdScheduleInfo":{"sourceUuid":"cc9c921f-5739-4363-8dce-a9d2a08484cc","name":"UpdScheduleInfo","program":"EXT003MI","description":"Update Schedule related details.","active":true,"multi":false,"modified":1678816351988,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"SCHN","description":"Schedule Number","length":11,"mandatory":true,"type":"N"},{"name":"MFNO","description":"Manufacturing Number","length":7,"mandatory":true,"type":"N"},{"name":"MTNO","description":"Fabric","length":15,"mandatory":true,"type":"A"},{"name":"FACI","description":"Facility. ","length":3,"mandatory":false,"type":"A"},{"name":"STYL","description":"Style","length":8,"mandatory":false,"type":"A"},{"name":"FMT1","description":"Body Part","length":30,"mandatory":false,"type":"A"},{"name":"FABR","description":"Fabric Code","length":8,"mandatory":false,"type":"A"},{"name":"COLR","description":"Fabric Color","length":3,"mandatory":false,"type":"A"},{"name":"SIZE","description":"Size","length":8,"mandatory":false,"type":"A"},{"name":"PRNO","description":"Product Number","length":15,"mandatory":false,"type":"A"},{"name":"PRCL","description":"Product Color","length":3,"mandatory":false,"type":"A"},{"name":"DWPO","description":"Fabric Type","length":10,"mandatory":false,"type":"A"},{"name":"FMT2","description":"Model","length":30,"mandatory":false,"type":"A"},{"name":"MSEQ","description":"Sequence Number","length":4,"mandatory":false,"type":"N"},{"name":"CNQT","description":"Usage Quantity","length":15,"mandatory":false,"type":"A"},{"name":"DIM1","description":"Fabric Width","length":15,"mandatory":false,"type":"A"},{"name":"DIM2","description":"Ply Height","length":15,"mandatory":false,"type":"A"},{"name":"DIM3","description":"Bundle Height","length":15,"mandatory":false,"type":"A"},{"name":"ORQA","description":"Quantity for Size","length":10,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"SPE1","description":"Model Size","length":25,"mandatory":false,"type":"A"},{"name":"SPE2","description":"Spreading","length":25,"mandatory":false,"type":"A"},{"name":"STDT","description":"Start Date","length":8,"mandatory":false,"type":"N"},{"name":"FIDT","description":"Finish Date","length":8,"mandatory":false,"type":"N"},{"name":"ITCL","description":"Product Group","length":5,"mandatory":false,"type":"A"},{"name":"SQNX","description":"Sort Sequence","length":3,"mandatory":false,"type":"N"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"cc9c921f-5739-4363-8dce-a9d2a08484cc":{"uuid":"cc9c921f-5739-4363-8dce-a9d2a08484cc","updated":1702887935386,"updatedBy":"ABHISHEK","created":1675663050566,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20231018093440.6","language":"GROOVY","codeHash":"93C32BDE07693D7ABF3DE0EE4700BDA45648D7A23449B8A39A3D3AC6BE61C448","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVE9QVCB0YWJsZSBmb3IgRURJIHR1cm5hcm91bmQgZGF0YS4gCiAqCiAqIE5hbWU6IEVYVDAwM01JLlVwZFNjaGVkdWxlSW5mbwogKiBEZXNjcmlwdGlvbjogVXBkYXRlIHJlY29yZHMgdG8gRVhUT1BUIHRhYmxlCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIzLTAyLTAzICAgIFN1cml5YU5AZm9ydHVkZS5jbyAgICAgICAgIFVwZGF0ZSByZWNvcmRzIHRvIEVYVE9QVCB0YWJsZQogKgogKi8KCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcgoKcHVibGljIGNsYXNzIFVwZFNjaGVkdWxlSW5mbyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCiAgcHJpdmF0ZSBmaW5hbCBVdGlsaXR5QVBJIHV0aWxpdHkKCiAgcHJpdmF0ZSBTdHJpbmcgaUZBQ0ksIGlTVFlMLCBpRk1UMSwgaUZBQlIsIGlDT0xSLCBpU0laRSwgaVBSTk8sIGlQUkNMLCBpTVROTywgaURXUE8sIGlGTVQyLCBpQ05RVCwgaURJTTEsIGlESU0yLCBpRElNMywgaVdITE8sIGlTUEUxLCBpU1BFMiwgaUlUQ0wKICBwcml2YXRlIGludCBpQ09OTywgaVNDSE4sIGlNRk5PLCBpTVNFUSwgaVNURFQsIGlGSURULCBpU1FOWAogIHByaXZhdGUgZG91YmxlIGlPUlFBCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkRGF0ZSA9IHRydWUKCiAgcHVibGljIFVwZFNjaGVkdWxlSW5mbyhNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFV0aWxpdHlBUEkgdXRpbGl0eSkgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewoKICAgIGlGQUNJID0gKG1pLmluRGF0YS5nZXQoIkZBQ0kiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZBQ0kiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkFDSSIpCiAgICBpU1RZTCA9IChtaS5pbkRhdGEuZ2V0KCJTVFlMIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTVFlMIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNUWUwiKQogICAgaUZNVDEgPSAobWkuaW5EYXRhLmdldCgiRk1UMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRk1UMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGTVQxIikKICAgIGlGQUJSID0gKG1pLmluRGF0YS5nZXQoIkZBQlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZBQlIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkFCUiIpCiAgICBpQ09MUiA9IChtaS5pbkRhdGEuZ2V0KCJDT0xSIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT0xSIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNPTFIiKQogICAgaVNJWkUgPSAobWkuaW5EYXRhLmdldCgiU0laRSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU0laRSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTSVpFIikKICAgIGlQUk5PID0gKG1pLmluRGF0YS5nZXQoIlBSTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBSTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUFJOTyIpCiAgICBpUFJDTCA9IChtaS5pbkRhdGEuZ2V0KCJQUkNMIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQUkNMIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBSQ0wiKQogICAgaU1UTk8gPSAobWkuaW5EYXRhLmdldCgiTVROTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTVROTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJNVE5PIikKICAgIGlEV1BPID0gKG1pLmluRGF0YS5nZXQoIkRXUE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRXUE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRFdQTyIpCiAgICBpRk1UMiA9IChtaS5pbkRhdGEuZ2V0KCJGTVQyIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGTVQyIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZNVDIiKQogICAgaUNOUVQgPSAobWkuaW5EYXRhLmdldCgiQ05RVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ05RVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJDTlFUIikKICAgIGlESU0xID0gKG1pLmluRGF0YS5nZXQoIkRJTTEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJTTEiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRElNMSIpCiAgICBpRElNMiA9IChtaS5pbkRhdGEuZ2V0KCJESU0yIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJESU0yIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkRJTTIiKQogICAgaURJTTMgPSAobWkuaW5EYXRhLmdldCgiRElNMyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElNMyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJESU0zIikKICAgIGlXSExPID0gKG1pLmluRGF0YS5nZXQoIldITE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpCiAgICBpU1BFMSA9IChtaS5pbkRhdGEuZ2V0KCJTUEUxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTUEUxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNQRTEiKQogICAgaVNQRTIgPSAobWkuaW5EYXRhLmdldCgiU1BFMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU1BFMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTUEUyIikKICAgIGlJVENMID0gKG1pLmluRGF0YS5nZXQoIklUQ0wiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIklUQ0wiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVRDTCIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaVNDSE4gPSAobWkuaW5EYXRhLmdldCgiU0NITiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU0NITiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlNDSE4iKSBhcyBJbnRlZ2VyCiAgICBpTUZOTyA9IChtaS5pbkRhdGEuZ2V0KCJNRk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNRk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiTUZOTyIpIGFzIEludGVnZXIKICAgIGlNU0VRID0gKG1pLmluRGF0YS5nZXQoIk1TRVEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk1TRVEiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJNU0VRIikgYXMgSW50ZWdlcgogICAgaU9SUUEgPSAobWkuaW5EYXRhLmdldCgiT1JRQSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JRQSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk9SUUEiKSBhcyBEb3VibGUKICAgIGlTVERUID0gKG1pLmluRGF0YS5nZXQoIlNURFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNURFQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJTVERUIikgYXMgSW50ZWdlcgogICAgaUZJRFQgPSAobWkuaW5EYXRhLmdldCgiRklEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRklEVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkZJRFQiKSBhcyBJbnRlZ2VyCiAgICBpU1FOWCA9IChtaS5pbkRhdGEuZ2V0KCJTUU5YIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTUU5YIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiU1FOWCIpIGFzIEludGVnZXIKCiAgICBib29sZWFuIHZhbGlkSW5wdXQgPSB2YWxpZGF0ZUlucHV0KGlDT05PLCBpU0NITiwgaU1GTk8sIGlNVE5PLCBpRkFDSSwgaVdITE8sIGlTVERULCBpRklEVCwgaUlUQ0wsIGlQUk5PKQogICAgaWYgKHZhbGlkSW5wdXQpIHsKICAgICAgdXBkYXRlUmVjb3JkKCkKICAgIH0KICB9CgogIC8qKgogICAqVmFsaWRhdGUgaW5wdXRzCiAgICogQHBhcmFtcyBpbnQgQ09OTyAsIGludCBTQ0hOLCBpbnQgTUZOTywgU3RyaW5nIE1UTk8KICAgKiBAcmV0dXJuIGJvb2xlYW4KICAgKi8KICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVJbnB1dChpbnQgQ09OTywgaW50IFNDSE4sIGludCBNRk5PLCBTdHJpbmcgTVROTywgU3RyaW5nIEZBQ0ksIFN0cmluZyBXSExPLCBpbnQgU1REVCwgaW50IEZJRFQsIFN0cmluZyBJVENMLCBTdHJpbmcgUFJOTykgewogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuQ09OTyA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcGFueSBOdW1iZXIgIiArIENPTk8pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBTY2hlZHVsZSBOdW1iZXIKICAgIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksICJTQ0hOIjogU0NITi50b1N0cmluZygpLnRyaW0oKV0KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5TQ0hOID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBTY2hlZHVsZSBOdW1iZXIgIiArIFNDSE4pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIlBNUzI3ME1JIiwgIkdldFNjaGVkdWxlTm8iLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIC8vVmFsaWRhdGUgTWFudWZhY3R1cmluZyBOdW1iZXIKICAgIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksICJRRVJZIjogIlZITUZOTyBmcm9tIE1XT0hFRCB3aGVyZSBWSE1GTk8gPSAnIiArIE1GTk8gKyAiJyJdCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuUkVQTCA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgTWFudWZhY3R1cmluZyBOdW1iZXIgIiArIE1GTk8pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIkVYUE9SVE1JIiwgIlNlbGVjdCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBJdGVtIE51bWJlcgogICAgcGFyYW1zID0gWyJJVE5PIjogTVROT10KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5JVE5PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wb25lbnQgTnVtYmVyICIgKyBNVE5PKQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJNTVMyMDBNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIGlmICghRkFDSS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgRmFjaWxpdHkgTnVtYmVyIAogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRkFDSSI6IEZBQ0kudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5GQUNJID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIEZhY2lsaXR5ICAiICsgRkFDSSkKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlMwMDhNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQogICAgaWYgKCFXSExPLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksICJXSExPIjogV0hMTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFja1dITE8gPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLldITE8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgV2FyZWhvdXNlIE51bWJlciAiICsgV0hMTykKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJNTVMwMDVNSSIsICJHZXRXYXJlaG91c2UiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmICghU1REVC50b1N0cmluZygpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBTdGFydCBkYXRlCiAgICAgIFN0cmluZyBzb3VyY2VGb3JtYXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImdldEZ1bGxGb3JtYXQiLCBtaS5nZXREYXRlRm9ybWF0KCkpCiAgICAgIHZhbGlkRGF0ZSA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiaXNEYXRlVmFsaWQiLCBTVERULnRvU3RyaW5nKCkudHJpbSgpLCBzb3VyY2VGb3JtYXQudG9TdHJpbmcoKSkKICAgICAgaWYgKCF2YWxpZERhdGUpIHsKICAgICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIFNURFQpCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCFzb3VyY2VGb3JtYXQudHJpbSgpLmVxdWFscygieXl5eU1NZGQiKSkgewogICAgICAgICAgU1REVCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiY29udmVydERhdGUiLCBzb3VyY2VGb3JtYXQsICJ5eXl5TU1kZCIsIFNURFQudG9TdHJpbmcoKS50cmltKCkpIC8vTWFpbnRhaW4gZGF0ZSBpbiBZTUQ4IGZvcm1hdCBpbiB0aGUgdGFibGUKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIUZJRFQudG9TdHJpbmcoKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgRmluaXNoIGRhdGUKICAgICAgU3RyaW5nIHNvdXJjZUZvcm1hdCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiZ2V0RnVsbEZvcm1hdCIsIG1pLmdldERhdGVGb3JtYXQoKSkKICAgICAgdmFsaWREYXRlID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJpc0RhdGVWYWxpZCIsIEZJRFQudG9TdHJpbmcoKS50cmltKCksIHNvdXJjZUZvcm1hdC50b1N0cmluZygpKQogICAgICBpZiAoIXZhbGlkRGF0ZSkgewogICAgICAgIG1pLmVycm9yKCJPcmRlciBEYXRlIG5vdCBpbiAiICsgc291cmNlRm9ybWF0ICsgIiBmb3JtYXQuIFBsZWFzZSBDaGVjayAiICsgRklEVCkKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXNvdXJjZUZvcm1hdC50cmltKCkuZXF1YWxzKCJ5eXl5TU1kZCIpKSB7CiAgICAgICAgICBGSURUID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJjb252ZXJ0RGF0ZSIsIHNvdXJjZUZvcm1hdCwgInl5eXlNTWRkIiwgRklEVC50b1N0cmluZygpLnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vVmFsaWRhdGUgUHJvZHVjdCBncm91cAogICAgaWYgKCFJVENMLnRvU3RyaW5nKCkudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBwYXJhbXMgPSBbIklUQ0wiOiBJVENMLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuSVRDTCA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBQcm9kdWN0IEdyb3VwICIgKyBJVENMKQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzAzNU1JIiwgIkdldFByb2R1Y3RHcm91cCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgLy9WYWxpZGF0ZSBQcm9kdWN0IE51bWJlcgogICAgaWYgKCFQUk5PLnRvU3RyaW5nKCkudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiUUVSWSI6ICJQSFBSTk8gZnJvbSBNUERIRUQgd2hlcmUgUEhSTk8gPSAnICIgKyBQUk5PICsgIiBhbmQgUEhGQUNJID0gIiArIEZBQ0kgKyAiICciXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuUkVQTCA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBQcm9kdWN0IE51bWJlciAiICsgUFJOTykKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJFWFBPUlRNSSIsICJTZWxlY3QiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIHJldHVybiB0cnVlCgogIH0KCiAgLyoqCiAgICpVcGRhdGUgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUKICAgKiBAcGFyYW1zIAogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIHVwZGF0ZVJlY29yZCgpIHsKICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVE9QVCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYU0NITiIsIGlTQ0hOKQogICAgY29udGFpbmVyLnNldCgiRVhNRk5PIiwgaU1GTk8pCiAgICBpZiAoIXF1ZXJ5LnJlYWRMb2NrKGNvbnRhaW5lciwgdXBkYXRlQ2FsbEJhY2spKSB7CiAgICAgIG1pLmVycm9yKCJSZWNvcmQgZG9lcyBub3QgRXhpc3QuIikKICAgICAgcmV0dXJuCiAgICB9CiAgfQoKICBDbG9zdXJlIDwgPyA+IHVwZGF0ZUNhbGxCYWNrID0gewogICAgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgogICAgaW50IENITk8gPSBsb2NrZWRSZXN1bHQuZ2V0KCJFWENITk8iKQoKICAgIGlmICghaUZBQ0kudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUZBQ0kudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGQUNJIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGQUNJIiwgaUZBQ0kpCiAgICAgIH0KICAgIH0KICAgIGlmICghaVNUWUwudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVNUWUwudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTVFlMIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTVFlMIiwgaVNUWUwpCiAgICAgIH0KICAgIH0KICAgIGlmICghaUZNVDEudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUZNVDEudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGTVQxIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGTVQxIiwgaUZNVDEpCiAgICAgIH0KICAgIH0KICAgIGlmICghaUZBQlIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUZBQlIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGQUJSIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGQUJSIiwgaUZBQlIpCiAgICAgIH0KICAgIH0KICAgIGlmICghaUNPTFIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUNPTFIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDT0xSIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDT0xSIiwgaUNPTFIpCiAgICAgIH0KICAgIH0KICAgIGlmICghaVNJWkUudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVNJWkUudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTSVpFIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTSVpFIiwgaVNJWkUpCiAgICAgIH0KICAgIH0KICAgIGlmICghaVBSTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVBSTk8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhQUk5PIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhQUk5PIiwgaVBSTk8pCiAgICAgIH0KICAgIH0KICAgIGlmICghaVBSQ0wudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVBSQ0wudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhQUkNMIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhQUkNMIiwgaVBSQ0wpCiAgICAgIH0KICAgIH0KICAgIGlmICghaURXUE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaURXUE8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhEV1BPIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhEV1BPIiwgaURXUE8pCiAgICAgIH0KICAgIH0KICAgIGlmICghaUZNVDIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUZNVDIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGTVQyIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGTVQyIiwgaUZNVDIpCiAgICAgIH0KICAgIH0KICAgIGlmICghaUNOUVQudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUNOUVQudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDTlFUIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDTlFUIiwgaUNOUVQpCiAgICAgIH0KICAgIH0KICAgIGlmICghaURJTTEudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaURJTTEudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhESU0xIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhESU0xIiwgaURJTTEpCiAgICAgIH0KICAgIH0KICAgIGlmICghaURJTTIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaURJTTIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhESU0yIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhESU0yIiwgaURJTTIpCiAgICAgIH0KICAgIH0KICAgIGlmICghaURJTTMudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaURJTTMudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhESU0zIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhESU0zIiwgaURJTTMpCiAgICAgIH0KICAgIH0KICAgIGlmICghaVdITE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVdITE8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhXSExPIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhXSExPIiwgaVdITE8pCiAgICAgIH0KICAgIH0KICAgIGlmICghaVNQRTEudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVNQRTEudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTUEUxIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTUEUxIiwgaVNQRTEpCiAgICAgIH0KICAgIH0KICAgIGlmICghaVNQRTIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVNQRTIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTUEUyIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTUEUyIiwgaVNQRTIpCiAgICAgIH0KICAgIH0KICAgIGlmICghaUlUQ0wudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaUlUQ0wudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhJVENMIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhJVENMIiwgaUlUQ0wpCiAgICAgIH0KICAgIH0KCiAgICBpZiAobWkuaW5EYXRhLmdldCgiTVNFUSIpICE9IG51bGwgJiYgIW1pLmluRGF0YS5nZXQoIk1TRVEiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTVNFUSIsIGlNU0VRKQogICAgfQoKICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJPUlFBIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiT1JRQSIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhPUlFBIiwgaU9SUUEpCiAgICB9CgogICAgaWYgKG1pLmluRGF0YS5nZXQoIlNURFQiKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJTVERUIikudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNURFQiLCBpU1REVCkKICAgIH0KCiAgICBpZiAobWkuaW5EYXRhLmdldCgiRklEVCIpICE9IG51bGwgJiYgIW1pLmluRGF0YS5nZXQoIkZJRFQiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRklEVCIsIGlGSURUKQogICAgfQoKICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJTUU5YIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiU1FOWCIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTUU5YIiwgaVNRTlgpCiAgICB9CgogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1UTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSE5PIiwgQ0hOTyArIDEpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkKICAgIGxvY2tlZFJlc3VsdC51cGRhdGUoKQogIH0KfQ=="}}}