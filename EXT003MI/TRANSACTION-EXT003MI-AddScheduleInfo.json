{"programModules":{"EXT003MI":{"program":"EXT003MI","triggers":{},"transactions":{"AddScheduleInfo":{"sourceUuid":"cc9c921f-5739-4363-8dce-a9d2a08485cc","name":"AddScheduleInfo","program":"EXT003MI","description":"Add Schedule related details.","active":true,"multi":false,"modified":1678816024006,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"SCHN","description":"Schedule Number","length":11,"mandatory":true,"type":"N"},{"name":"MFNO","description":"Manufacturing Number","length":7,"mandatory":true,"type":"N"},{"name":"MTNO","description":"Fabric","length":15,"mandatory":true,"type":"A"},{"name":"FACI","description":"Facility. ","length":3,"mandatory":false,"type":"A"},{"name":"STYL","description":"Style","length":8,"mandatory":false,"type":"A"},{"name":"FMT1","description":"Body Part","length":30,"mandatory":false,"type":"A"},{"name":"FABR","description":"Fabric Code","length":8,"mandatory":false,"type":"A"},{"name":"COLR","description":"Fabric Color","length":3,"mandatory":false,"type":"A"},{"name":"SIZE","description":"Size","length":8,"mandatory":false,"type":"A"},{"name":"PRNO","description":"Product Number","length":15,"mandatory":false,"type":"A"},{"name":"PRCL","description":"Product Color","length":3,"mandatory":false,"type":"A"},{"name":"DWPO","description":"Fabric Type","length":10,"mandatory":false,"type":"A"},{"name":"FMT2","description":"Model","length":30,"mandatory":false,"type":"A"},{"name":"MSEQ","description":"Sequence Number","length":4,"mandatory":false,"type":"N"},{"name":"CNQT","description":"Usage Quantity","length":15,"mandatory":false,"type":"A"},{"name":"DIM1","description":"Fabric Width","length":15,"mandatory":false,"type":"A"},{"name":"DIM2","description":"Ply Height","length":15,"mandatory":false,"type":"A"},{"name":"DIM3","description":"Bundle Height","length":15,"mandatory":false,"type":"A"},{"name":"ORQA","description":"Quantity for Size","length":10,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"SPE1","description":"Model Size","length":25,"mandatory":false,"type":"A"},{"name":"SPE2","description":"Spreading","length":25,"mandatory":false,"type":"A"},{"name":"STDT","description":"Start Date","length":8,"mandatory":false,"type":"N"},{"name":"FIDT","description":"Finish Date","length":8,"mandatory":false,"type":"N"},{"name":"ITCL","description":"Product Group","length":5,"mandatory":false,"type":"A"},{"name":"SQNX","description":"Sort Sequence","length":3,"mandatory":false,"type":"N"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"cc9c921f-5739-4363-8dce-a9d2a08485cc":{"uuid":"cc9c921f-5739-4363-8dce-a9d2a08485cc","updated":1702887862975,"updatedBy":"ABHISHEK","created":1675407379414,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20231018093440.6","language":"GROOVY","codeHash":"21B711FDF81E41C348EEADFFBA09A3D1551A931C1D4E83115A646DC805777B07","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHVzZWQgdG8gQWRkIHJlY29yZHMgdG8gRVhUT1BUIHRhYmxlLiANCiAqDQogKiBOYW1lOiBFWFQwMDNNSS5BZGRTY2hlZHVsZUluZm8NCiAqIERlc2NyaXB0aW9uOiBBZGRpbmcgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUNCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbg0KICoyMy0wMi0wMyAgICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgICAgICBBZGRpbmcgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUNCiAqDQogKi8NCg0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcg0KDQpwdWJsaWMgY2xhc3MgQWRkU2NoZWR1bGVJbmZvIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyDQogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5DQoNCiAgcHJpdmF0ZSBTdHJpbmcgaUZBQ0ksIGlTVFlMLCBpRk1UMSwgaUZBQlIsIGlDT0xSLCBpU0laRSwgaVBSTk8sIGlQUkNMLCBpTVROTywgaURXUE8sIGlGTVQyLCBpQ05RVCwgaURJTTEsIGlESU0yLCBpRElNMywgaVdITE8sIGlTUEUxLCBpU1BFMiwgaUlUQ0wNCiAgcHJpdmF0ZSBpbnQgaUNPTk8sIGlTQ0hOLCBpTUZOTywgaU1TRVEsIGlTVERULCBpRklEVCwgaVNRTlgNCiAgcHJpdmF0ZSBkb3VibGUgaU9SUUENCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkRGF0ZSA9IHRydWUNCg0KICBwdWJsaWMgQWRkU2NoZWR1bGVJbmZvKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgVXRpbGl0eUFQSSB1dGlsaXR5KSB7DQogICAgdGhpcy5taSA9IG1pDQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcg0KICAgIHRoaXMudXRpbGl0eSA9IHV0aWxpdHkNCiAgfQ0KICAvKioNCiAgICoqIE1haW4gZnVuY3Rpb24NCiAgICogQHBhcmFtDQogICAqIEByZXR1cm4NCiAgICovDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcg0KICAgIGlGQUNJID0gKG1pLmluRGF0YS5nZXQoIkZBQ0kiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZBQ0kiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkFDSSIpDQogICAgaVNUWUwgPSAobWkuaW5EYXRhLmdldCgiU1RZTCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU1RZTCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTVFlMIikNCiAgICBpRk1UMSA9IChtaS5pbkRhdGEuZ2V0KCJGTVQxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGTVQxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZNVDEiKQ0KICAgIGlGQUJSID0gKG1pLmluRGF0YS5nZXQoIkZBQlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZBQlIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkFCUiIpDQogICAgaUNPTFIgPSAobWkuaW5EYXRhLmdldCgiQ09MUiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09MUiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJDT0xSIikNCiAgICBpU0laRSA9IChtaS5pbkRhdGEuZ2V0KCJTSVpFIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTSVpFIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNJWkUiKQ0KICAgIGlQUk5PID0gKG1pLmluRGF0YS5nZXQoIlBSTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBSTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUFJOTyIpDQogICAgaVBSQ0wgPSAobWkuaW5EYXRhLmdldCgiUFJDTCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUFJDTCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQUkNMIikNCiAgICBpTVROTyA9IChtaS5pbkRhdGEuZ2V0KCJNVE5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNVE5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk1UTk8iKQ0KICAgIGlEV1BPID0gKG1pLmluRGF0YS5nZXQoIkRXUE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRXUE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRFdQTyIpDQogICAgaUZNVDIgPSAobWkuaW5EYXRhLmdldCgiRk1UMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRk1UMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGTVQyIikNCiAgICBpQ05RVCA9IChtaS5pbkRhdGEuZ2V0KCJDTlFUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDTlFUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNOUVQiKQ0KICAgIGlESU0xID0gKG1pLmluRGF0YS5nZXQoIkRJTTEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJTTEiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRElNMSIpDQogICAgaURJTTIgPSAobWkuaW5EYXRhLmdldCgiRElNMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElNMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJESU0yIikNCiAgICBpRElNMyA9IChtaS5pbkRhdGEuZ2V0KCJESU0zIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJESU0zIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkRJTTMiKQ0KICAgIGlXSExPID0gKG1pLmluRGF0YS5nZXQoIldITE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpDQogICAgaVNQRTEgPSAobWkuaW5EYXRhLmdldCgiU1BFMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU1BFMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTUEUxIikNCiAgICBpU1BFMiA9IChtaS5pbkRhdGEuZ2V0KCJTUEUyIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTUEUyIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNQRTIiKQ0KICAgIGlJVENMID0gKG1pLmluRGF0YS5nZXQoIklUQ0wiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIklUQ0wiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVRDTCIpDQoNCiAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXINCiAgICBpU0NITiA9IChtaS5pbkRhdGEuZ2V0KCJTQ0hOIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTQ0hOIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiU0NITiIpIGFzIEludGVnZXINCiAgICBpTUZOTyA9IChtaS5pbkRhdGEuZ2V0KCJNRk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNRk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiTUZOTyIpIGFzIEludGVnZXINCiAgICBpTVNFUSA9IChtaS5pbkRhdGEuZ2V0KCJNU0VRIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNU0VRIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiTVNFUSIpIGFzIEludGVnZXINCiAgICBpT1JRQSA9IChtaS5pbkRhdGEuZ2V0KCJPUlFBIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUlFBIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiT1JRQSIpIGFzIERvdWJsZQ0KICAgIGlTVERUID0gKG1pLmluRGF0YS5nZXQoIlNURFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNURFQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJTVERUIikgYXMgSW50ZWdlcg0KICAgIGlGSURUID0gKG1pLmluRGF0YS5nZXQoIkZJRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZJRFQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJGSURUIikgYXMgSW50ZWdlcg0KICAgIGlTUU5YID0gKG1pLmluRGF0YS5nZXQoIlNRTlgiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNRTlgiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJTUU5YIikgYXMgSW50ZWdlcg0KDQogICAgYm9vbGVhbiB2YWxpZElucHV0ID0gdmFsaWRhdGVJbnB1dChpQ09OTywgaVNDSE4sIGlNRk5PLCBpTVROTywgaUZBQ0ksIGlXSExPLCBpU1REVCwgaUZJRFQsIGlJVENMLCBpUFJOTykNCiAgICBpZiAodmFsaWRJbnB1dCkgew0KICAgICAgaW5zZXJ0UmVjb3JkKCkNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICpWYWxpZGF0ZSBpbnB1dHMNCiAgICogQHBhcmFtcyBpbnQgQ09OTyAsIGludCBTQ0hOLCBpbnQgTUZOTywgU3RyaW5nIE1UTk8NCiAgICogQHJldHVybiBib29sZWFuDQogICAqLw0KICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVJbnB1dChpbnQgQ09OTywgaW50IFNDSE4sIGludCBNRk5PLCBTdHJpbmcgTVROTywgU3RyaW5nIEZBQ0ksIFN0cmluZyBXSExPLCBpbnQgU1REVCwgaW50IEZJRFQsIFN0cmluZyBJVENMLCBTdHJpbmcgUFJOTykgew0KICAgIC8vVmFsaWRhdGUgQ29tcGFueSBOdW1iZXINCiAgICBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHBhcmFtcyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCldDQogICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICBpZiAocmVzcG9uc2UuQ09OTyA9PSBudWxsKSB7DQogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBDT05PKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykNCg0KICAgIC8vVmFsaWRhdGUgU2NoZWR1bGUgTnVtYmVyDQogICAgcGFyYW1zID0gWyJDT05PIjogQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIlNDSE4iOiBTQ0hOLnRvU3RyaW5nKCkudHJpbSgpXQ0KICAgIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5TQ0hOID09IG51bGwpIHsNCiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgU2NoZWR1bGUgTnVtYmVyICIgKyBTQ0hOKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiUE1TMjcwTUkiLCAiR2V0U2NoZWR1bGVObyIsIHBhcmFtcywgY2FsbGJhY2spDQoNCiAgICAvL1ZhbGlkYXRlIE1hbnVmYWN0dXJpbmcgTnVtYmVyDQogICAgcGFyYW1zID0gWyJDT05PIjogQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIlFFUlkiOiAiVkhNRk5PIGZyb20gTVdPSEVEIHdoZXJlIFZITUZOTyA9ICciICsgTUZOTyArICInIl0NCiAgICBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICBpZiAocmVzcG9uc2UuUkVQTCA9PSBudWxsKSB7DQogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE1hbnVmYWN0dXJpbmcgTnVtYmVyICIgKyBNRk5PKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiRVhQT1JUTUkiLCAiU2VsZWN0IiwgcGFyYW1zLCBjYWxsYmFjaykNCg0KICAgIC8vVmFsaWRhdGUgSXRlbSBOdW1iZXINCiAgICBwYXJhbXMgPSBbIklUTk8iOiBNVE5PXQ0KICAgIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5JVE5PID09IG51bGwpIHsNCiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcG9uZW50IE51bWJlciAiICsgTVROTykNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIwME1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spDQoNCiAgICBpZiAoIUZBQ0kudHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgLy9WYWxpZGF0ZSBGYWNpbGl0eSBOdW1iZXIgDQogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRkFDSSI6IEZBQ0kudG9TdHJpbmcoKS50cmltKCldDQogICAgICBjYWxsYmFjayA9IHsNCiAgICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPg0KICAgICAgICBpZiAocmVzcG9uc2UuRkFDSSA9PSBudWxsKSB7DQogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRmFjaWxpdHkgICIgKyBGQUNJKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaUNhbGxlci5jYWxsKCJDUlMwMDhNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIH0NCiAgICBpZiAoIVdITE8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyDQogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiV0hMTyI6IFdITE8udG9TdHJpbmcoKS50cmltKCldDQogICAgICBjYWxsYmFjayA9IHsNCiAgICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPg0KICAgICAgICBpZiAocmVzcG9uc2UuV0hMTyA9PSBudWxsKSB7DQogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgV2FyZWhvdXNlIE51bWJlciAiICsgV0hMTykNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbWlDYWxsZXIuY2FsbCgiTU1TMDA1TUkiLCAiR2V0V2FyZWhvdXNlIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgICB9DQoNCiAgICBpZiAoIVNURFQudG9TdHJpbmcoKS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAvL1ZhbGlkYXRlIFN0YXJ0IGRhdGUNCiAgICAgIFN0cmluZyBzb3VyY2VGb3JtYXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImdldEZ1bGxGb3JtYXQiLCBtaS5nZXREYXRlRm9ybWF0KCkpDQogICAgICB2YWxpZERhdGUgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgU1REVC50b1N0cmluZygpLnRyaW0oKSwgc291cmNlRm9ybWF0LnRvU3RyaW5nKCkpDQogICAgICBpZiAoIXZhbGlkRGF0ZSkgew0KICAgICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIFNURFQpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCFzb3VyY2VGb3JtYXQudHJpbSgpLmVxdWFscygieXl5eU1NZGQiKSkgew0KICAgICAgICAgIFNURFQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImNvbnZlcnREYXRlIiwgc291cmNlRm9ybWF0LCAieXl5eU1NZGQiLCBTVERULnRvU3RyaW5nKCkudHJpbSgpKSAvL01haW50YWluIGRhdGUgaW4gWU1EOCBmb3JtYXQgaW4gdGhlIHRhYmxlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIUZJRFQudG9TdHJpbmcoKS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAvL1ZhbGlkYXRlIEZpbmlzaCBkYXRlDQogICAgICBTdHJpbmcgc291cmNlRm9ybWF0ID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJnZXRGdWxsRm9ybWF0IiwgbWkuZ2V0RGF0ZUZvcm1hdCgpKQ0KICAgICAgdmFsaWREYXRlID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJpc0RhdGVWYWxpZCIsIEZJRFQudG9TdHJpbmcoKS50cmltKCksIHNvdXJjZUZvcm1hdC50b1N0cmluZygpKQ0KICAgICAgaWYgKCF2YWxpZERhdGUpIHsNCiAgICAgICAgbWkuZXJyb3IoIk9yZGVyIERhdGUgbm90IGluICIgKyBzb3VyY2VGb3JtYXQgKyAiIGZvcm1hdC4gUGxlYXNlIENoZWNrICIgKyBGSURUKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICghc291cmNlRm9ybWF0LnRyaW0oKS5lcXVhbHMoInl5eXlNTWRkIikpIHsNCiAgICAgICAgICBGSURUID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJjb252ZXJ0RGF0ZSIsIHNvdXJjZUZvcm1hdCwgInl5eXlNTWRkIiwgRklEVC50b1N0cmluZygpLnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgLy9WYWxpZGF0ZSBQcm9kdWN0IGdyb3VwDQogICAgaWYgKCFJVENMLnRvU3RyaW5nKCkudHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgcGFyYW1zID0gWyJJVENMIjogSVRDTC50b1N0cmluZygpLnRyaW0oKV0NCiAgICAgIGNhbGxiYWNrID0gew0KICAgICAgICBNYXAgPCBTdHJpbmcsDQogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICAgIGlmIChyZXNwb25zZS5JVENMID09IG51bGwpIHsNCiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBQcm9kdWN0IEdyb3VwICIgKyBJVENMKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaUNhbGxlci5jYWxsKCJDUlMwMzVNSSIsICJHZXRQcm9kdWN0R3JvdXAiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIH0NCg0KICAgIC8vVmFsaWRhdGUgUHJvZHVjdCBOdW1iZXINCiAgICBpZiAoIVBSTk8udG9TdHJpbmcoKS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiUUVSWSI6ICJQSFBSTk8gZnJvbSBNUERIRUQgd2hlcmUgUEhSTk8gPSAnICIgKyBQUk5PICsgIiBhbmQgUEhGQUNJID0gIiArIEZBQ0kgKyAiICciXQ0KICAgICAgY2FsbGJhY2sgPSB7DQogICAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgICAgaWYgKHJlc3BvbnNlLlJFUEwgPT0gbnVsbCkgew0KICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIFByb2R1Y3QgTnVtYmVyICIgKyBQUk5PKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaUNhbGxlci5jYWxsKCJFWFBPUlRNSSIsICJTZWxlY3QiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlDQoNCiAgfQ0KDQogIC8qKg0KICAgKkluc2VydCByZWNvcmRzIHRvIEVYVE9QVCB0YWJsZQ0KICAgKiBAcGFyYW1zIA0KICAgKiBAcmV0dXJuIA0KICAgKi8NCiAgcHVibGljIGluc2VydFJlY29yZCgpIHsNCiAgICBEQkFjdGlvbiBhY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiRVhUT1BUIikuaW5kZXgoIjAwIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIHF1ZXJ5ID0gYWN0aW9uLmdldENvbnRhaW5lcigpDQogICAgcXVlcnkuc2V0KCJFWENPTk8iLCBpQ09OTykNCiAgICBxdWVyeS5zZXQoIkVYRkFDSSIsIGlGQUNJKQ0KICAgIHF1ZXJ5LnNldCgiRVhTVFlMIiwgaVNUWUwpDQogICAgcXVlcnkuc2V0KCJFWEZNVDEiLCBpRk1UMSkNCiAgICBxdWVyeS5zZXQoIkVYRkFCUiIsIGlGQUJSKQ0KICAgIHF1ZXJ5LnNldCgiRVhDT0xSIiwgaUNPTFIpDQogICAgcXVlcnkuc2V0KCJFWFNJWkUiLCBpU0laRSkNCiAgICBxdWVyeS5zZXQoIkVYUFJOTyIsIGlQUk5PKQ0KICAgIHF1ZXJ5LnNldCgiRVhQUkNMIiwgaVBSQ0wpDQogICAgcXVlcnkuc2V0KCJFWE1UTk8iLCBpTVROTykNCiAgICBxdWVyeS5zZXQoIkVYRFdQTyIsIGlEV1BPKQ0KICAgIHF1ZXJ5LnNldCgiRVhGTVQyIiwgaUZNVDIpDQogICAgcXVlcnkuc2V0KCJFWENOUVQiLCBpQ05RVCkNCiAgICBxdWVyeS5zZXQoIkVYRElNMSIsIGlESU0xKQ0KICAgIHF1ZXJ5LnNldCgiRVhESU0yIiwgaURJTTIpDQogICAgcXVlcnkuc2V0KCJFWERJTTMiLCBpRElNMykNCiAgICBxdWVyeS5zZXQoIkVYV0hMTyIsIGlXSExPKQ0KICAgIHF1ZXJ5LnNldCgiRVhTUEUxIiwgaVNQRTEpDQogICAgcXVlcnkuc2V0KCJFWFNQRTIiLCBpU1BFMikNCiAgICBxdWVyeS5zZXQoIkVYSVRDTCIsIGlJVENMKQ0KICAgIHF1ZXJ5LnNldCgiRVhDT05PIiwgaUNPTk8gYXMgSW50ZWdlcikNCiAgICBxdWVyeS5zZXQoIkVYU0NITiIsIGlTQ0hOIGFzIEludGVnZXIpDQogICAgcXVlcnkuc2V0KCJFWE1GTk8iLCBpTUZOTyBhcyBJbnRlZ2VyKQ0KICAgIHF1ZXJ5LnNldCgiRVhNU0VRIiwgaU1TRVEgYXMgSW50ZWdlcikNCiAgICBxdWVyeS5zZXQoIkVYT1JRQSIsIGlPUlFBIGFzIERvdWJsZSkNCiAgICBxdWVyeS5zZXQoIkVYU1REVCIsIGlTVERUIGFzIEludGVnZXIpDQogICAgcXVlcnkuc2V0KCJFWEZJRFQiLCBpRklEVCBhcyBJbnRlZ2VyKQ0KICAgIHF1ZXJ5LnNldCgiRVhTUU5YIiwgaVNRTlggYXMgSW50ZWdlcikNCiAgICBxdWVyeS5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpDQogICAgcXVlcnkuc2V0KCJFWFJHVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkNCiAgICBxdWVyeS5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpDQogICAgcXVlcnkuc2V0KCJFWENITk8iLCAwKQ0KICAgIHF1ZXJ5LnNldCgiRVhMTVRNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpDQogICAgcXVlcnkuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCiAgICBxdWVyeS5zZXQoIkVYQ1JJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQ0KICAgIGFjdGlvbi5pbnNlcnQocXVlcnksIHJlY29yZEV4aXN0cykNCiAgfQ0KDQogIENsb3N1cmUgcmVjb3JkRXhpc3RzID0gew0KICAgIG1pLmVycm9yKCJSZWNvcmQgQWxyZWFkeSBFeGlzdHMiKQ0KICAgIHJldHVybg0KICB9DQp9"}}}