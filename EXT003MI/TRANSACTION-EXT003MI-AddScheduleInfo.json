{"programModules":{"EXT003MI":{"program":"EXT003MI","triggers":{},"transactions":{"AddScheduleInfo":{"sourceUuid":"cc9c921f-5739-4363-8dce-a9d2a08485cc","name":"AddScheduleInfo","program":"EXT003MI","description":"Add Schedule related details.","active":true,"multi":false,"modified":1678816024006,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"SCHN","description":"Schedule Number","length":11,"mandatory":true,"type":"N"},{"name":"MFNO","description":"Manufacturing Number","length":7,"mandatory":true,"type":"N"},{"name":"MTNO","description":"Fabric","length":15,"mandatory":true,"type":"A"},{"name":"FACI","description":"Facility. ","length":3,"mandatory":false,"type":"A"},{"name":"STYL","description":"Style","length":8,"mandatory":false,"type":"A"},{"name":"FMT1","description":"Body Part","length":30,"mandatory":false,"type":"A"},{"name":"FABR","description":"Fabric Code","length":8,"mandatory":false,"type":"A"},{"name":"COLR","description":"Fabric Color","length":3,"mandatory":false,"type":"A"},{"name":"SIZE","description":"Size","length":8,"mandatory":false,"type":"A"},{"name":"PRNO","description":"Product Number","length":15,"mandatory":false,"type":"A"},{"name":"PRCL","description":"Product Color","length":3,"mandatory":false,"type":"A"},{"name":"DWPO","description":"Fabric Type","length":10,"mandatory":false,"type":"A"},{"name":"FMT2","description":"Model","length":30,"mandatory":false,"type":"A"},{"name":"MSEQ","description":"Sequence Number","length":4,"mandatory":false,"type":"N"},{"name":"CNQT","description":"Usage Quantity","length":15,"mandatory":false,"type":"A"},{"name":"DIM1","description":"Fabric Width","length":15,"mandatory":false,"type":"A"},{"name":"DIM2","description":"Ply Height","length":15,"mandatory":false,"type":"A"},{"name":"DIM3","description":"Bundle Height","length":15,"mandatory":false,"type":"A"},{"name":"ORQA","description":"Quantity for Size","length":10,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"SPE1","description":"Model Size","length":25,"mandatory":false,"type":"A"},{"name":"SPE2","description":"Spreading","length":25,"mandatory":false,"type":"A"},{"name":"STDT","description":"Start Date","length":8,"mandatory":false,"type":"N"},{"name":"FIDT","description":"Finish Date","length":8,"mandatory":false,"type":"N"},{"name":"ITCL","description":"Product Group","length":5,"mandatory":false,"type":"A"},{"name":"SQNX","description":"Sort Sequence","length":3,"mandatory":false,"type":"N"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"cc9c921f-5739-4363-8dce-a9d2a08485cc":{"uuid":"cc9c921f-5739-4363-8dce-a9d2a08485cc","updated":1701782347511,"updatedBy":"M3CONSADMX","created":1675407379414,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20230918173517.9","language":"GROOVY","codeHash":"FBA0408A71EB6B97A0E39958F51D04392399CF84275DC868C8B5233F7B5C9435","code":"LyoqDQogKiBSRUFETUUNCiAqIFRoaXMgZXh0ZW5zaW9uIGlzIGJlaW5nIHVzZWQgdG8gQWRkIHJlY29yZHMgdG8gRVhUT1BUIHRhYmxlLiANCiAqDQogKiBOYW1lOiBFWFQwMDNNSS5BZGRTY2hlZHVsZUluZm8NCiAqIERlc2NyaXB0aW9uOiBBZGRpbmcgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUNCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbg0KICoyMy0wMi0wMyAgICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgICAgICBBZGRpbmcgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUNCiAqDQogKi8NCg0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcg0KDQpwdWJsaWMgY2xhc3MgQWRkU2NoZWR1bGVJbmZvIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7DQogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQ0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyDQogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5DQoNCiAgcHJpdmF0ZSBTdHJpbmcgaUZBQ0ksIGlTVFlMLCBpRk1UMSwgaUZBQlIsIGlDT0xSLCBpU0laRSwgaVBSTk8sIGlQUkNMLCBpTVROTywgaURXUE8sIGlGTVQyLCBpQ05RVCwgaURJTTEsIGlESU0yLCBpRElNMywgaVdITE8sIGlTUEUxLCBpU1BFMiwgaUlUQ0wNCiAgcHJpdmF0ZSBpbnQgaUNPTk8sIGlTQ0hOLCBpTUZOTywgaU1TRVEsIGlTVERULCBpRklEVCwgaVNRTlgNCiAgcHJpdmF0ZSBkb3VibGUgaU9SUUENCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkRGF0ZSA9IHRydWUNCg0KICBwdWJsaWMgQWRkU2NoZWR1bGVJbmZvKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgVXRpbGl0eUFQSSB1dGlsaXR5KSB7DQogICAgdGhpcy5taSA9IG1pDQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcg0KICAgIHRoaXMudXRpbGl0eSA9IHV0aWxpdHkNCiAgfQ0KICAvKioNCiAgICoqIE1haW4gZnVuY3Rpb24NCiAgICogQHBhcmFtDQogICAqIEByZXR1cm4NCiAgICovDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcg0KICAgIGlGQUNJID0gKG1pLmluRGF0YS5nZXQoIkZBQ0kiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZBQ0kiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkFDSSIpDQogICAgaVNUWUwgPSAobWkuaW5EYXRhLmdldCgiU1RZTCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU1RZTCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTVFlMIikNCiAgICBpRk1UMSA9IChtaS5pbkRhdGEuZ2V0KCJGTVQxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGTVQxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZNVDEiKQ0KICAgIGlGQUJSID0gKG1pLmluRGF0YS5nZXQoIkZBQlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZBQlIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkFCUiIpDQogICAgaUNPTFIgPSAobWkuaW5EYXRhLmdldCgiQ09MUiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09MUiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJDT0xSIikNCiAgICBpU0laRSA9IChtaS5pbkRhdGEuZ2V0KCJTSVpFIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTSVpFIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNJWkUiKQ0KICAgIGlQUk5PID0gKG1pLmluRGF0YS5nZXQoIlBSTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBSTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUFJOTyIpDQogICAgaVBSQ0wgPSAobWkuaW5EYXRhLmdldCgiUFJDTCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUFJDTCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQUkNMIikNCiAgICBpTVROTyA9IChtaS5pbkRhdGEuZ2V0KCJNVE5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNVE5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk1UTk8iKQ0KICAgIGlEV1BPID0gKG1pLmluRGF0YS5nZXQoIkRXUE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRXUE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRFdQTyIpDQogICAgaUZNVDIgPSAobWkuaW5EYXRhLmdldCgiRk1UMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRk1UMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGTVQyIikNCiAgICBpQ05RVCA9IChtaS5pbkRhdGEuZ2V0KCJDTlFUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDTlFUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNOUVQiKQ0KICAgIGlESU0xID0gKG1pLmluRGF0YS5nZXQoIkRJTTEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJTTEiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRElNMSIpDQogICAgaURJTTIgPSAobWkuaW5EYXRhLmdldCgiRElNMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElNMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJESU0yIikNCiAgICBpRElNMyA9IChtaS5pbkRhdGEuZ2V0KCJESU0zIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJESU0zIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkRJTTMiKQ0KICAgIGlXSExPID0gKG1pLmluRGF0YS5nZXQoIldITE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpDQogICAgaVNQRTEgPSAobWkuaW5EYXRhLmdldCgiU1BFMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU1BFMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTUEUxIikNCiAgICBpU1BFMiA9IChtaS5pbkRhdGEuZ2V0KCJTUEUyIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTUEUyIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNQRTIiKQ0KICAgIGlJVENMID0gKG1pLmluRGF0YS5nZXQoIklUQ0wiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIklUQ0wiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVRDTCIpDQoNCiAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXINCiAgICBpU0NITiA9IChtaS5pbkRhdGEuZ2V0KCJTQ0hOIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTQ0hOIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiU0NITiIpIGFzIEludGVnZXINCiAgICBpTUZOTyA9IChtaS5pbkRhdGEuZ2V0KCJNRk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNRk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiTUZOTyIpIGFzIEludGVnZXINCiAgICBpTVNFUSA9IChtaS5pbkRhdGEuZ2V0KCJNU0VRIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNU0VRIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiTVNFUSIpIGFzIEludGVnZXINCiAgICBpT1JRQSA9IChtaS5pbkRhdGEuZ2V0KCJPUlFBIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUlFBIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiT1JRQSIpIGFzIERvdWJsZQ0KICAgIGlTVERUID0gKG1pLmluRGF0YS5nZXQoIlNURFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNURFQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJTVERUIikgYXMgSW50ZWdlcg0KICAgIGlGSURUID0gKG1pLmluRGF0YS5nZXQoIkZJRFQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZJRFQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJGSURUIikgYXMgSW50ZWdlcg0KICAgIGlTUU5YID0gKG1pLmluRGF0YS5nZXQoIlNRTlgiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNRTlgiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJTUU5YIikgYXMgSW50ZWdlcg0KDQogICAgYm9vbGVhbiB2YWxpZElucHV0ID0gdmFsaWRhdGVJbnB1dChpQ09OTywgaVNDSE4sIGlNRk5PLCBpTVROTywgaUZBQ0ksIGlXSExPLCBpU1REVCwgaUZJRFQpDQogICAgaWYgKHZhbGlkSW5wdXQpIHsNCiAgICAgIGluc2VydFJlY29yZCgpDQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqVmFsaWRhdGUgaW5wdXRzDQogICAqIEBwYXJhbXMgaW50IENPTk8gLCBpbnQgU0NITiwgaW50IE1GTk8sIFN0cmluZyBNVE5PDQogICAqIEByZXR1cm4gYm9vbGVhbg0KICAgKi8NCiAgcHJpdmF0ZSBib29sZWFuIHZhbGlkYXRlSW5wdXQoaW50IENPTk8sIGludCBTQ0hOLCBpbnQgTUZOTywgU3RyaW5nIE1UTk8sIFN0cmluZyBGQUNJLCBTdHJpbmcgV0hMTywgaW50IFNURFQsIGludCBGSURUKSB7DQogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcg0KICAgIE1hcCA8IFN0cmluZywgU3RyaW5nID4gcGFyYW1zID0gWyJDT05PIjogQ09OTy50b1N0cmluZygpLnRyaW0oKV0NCiAgICBDbG9zdXJlIDwgPyA+IGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsNCiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcGFueSBOdW1iZXIgIiArIENPTk8pDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJNTlMwOTVNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KDQogICAgLy9WYWxpZGF0ZSBTY2hlZHVsZSBOdW1iZXINCiAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiU0NITiI6IFNDSE4udG9TdHJpbmcoKS50cmltKCldDQogICAgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPg0KICAgICAgaWYgKHJlc3BvbnNlLlNDSE4gPT0gbnVsbCkgew0KICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBTY2hlZHVsZSBOdW1iZXIgIiArIFNDSE4pDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJQTVMyNzBNSSIsICJHZXRTY2hlZHVsZU5vIiwgcGFyYW1zLCBjYWxsYmFjaykNCg0KICAgIC8vVmFsaWRhdGUgTWFudWZhY3R1cmluZyBOdW1iZXINCiAgICBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiUUVSWSI6ICJWSE1GTk8gZnJvbSBNV09IRUQgd2hlcmUgVkhNRk5PID0gJyIgKyBNRk5PICsgIiciXQ0KICAgIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4NCiAgICAgIGlmIChyZXNwb25zZS5SRVBMID09IG51bGwpIHsNCiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgTWFudWZhY3R1cmluZyBOdW1iZXIgIiArIE1GTk8pDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJFWFBPUlRNSSIsICJTZWxlY3QiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KDQogICAgLy9WYWxpZGF0ZSBJdGVtIE51bWJlcg0KICAgIHBhcmFtcyA9IFsiSVROTyI6IE1UTk9dDQogICAgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPg0KICAgICAgaWYgKHJlc3BvbnNlLklUTk8gPT0gbnVsbCkgew0KICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wb25lbnQgTnVtYmVyICIgKyBNVE5PKQ0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykNCg0KICAgIGlmICghRkFDSS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAvL1ZhbGlkYXRlIEZhY2lsaXR5IE51bWJlciANCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksICJGQUNJIjogRkFDSS50b1N0cmluZygpLnRyaW0oKV0NCiAgICAgIGNhbGxiYWNrID0gew0KICAgICAgICBNYXAgPCBTdHJpbmcsDQogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICAgIGlmIChyZXNwb25zZS5GQUNJID09IG51bGwpIHsNCiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBGYWNpbGl0eSAgIiArIEZBQ0kpDQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzAwOE1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spDQogICAgfQ0KICAgIGlmICghV0hMTy50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXINCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksICJXSExPIjogV0hMTy50b1N0cmluZygpLnRyaW0oKV0NCiAgICAgIGNhbGxiYWNrID0gew0KICAgICAgICBNYXAgPCBTdHJpbmcsDQogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+DQogICAgICAgIGlmIChyZXNwb25zZS5XSExPID09IG51bGwpIHsNCiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBXSExPKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaUNhbGxlci5jYWxsKCJNTVMwMDVNSSIsICJHZXRXYXJlaG91c2UiLCBwYXJhbXMsIGNhbGxiYWNrKQ0KICAgIH0NCg0KICAgIGlmICghU1REVC50b1N0cmluZygpLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIC8vVmFsaWRhdGUgU3RhcnQgZGF0ZQ0KICAgICAgU3RyaW5nIHNvdXJjZUZvcm1hdCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiZ2V0RnVsbEZvcm1hdCIsIG1pLmdldERhdGVGb3JtYXQoKSkNCiAgICAgIHZhbGlkRGF0ZSA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiaXNEYXRlVmFsaWQiLCBTVERULnRvU3RyaW5nKCkudHJpbSgpLCBzb3VyY2VGb3JtYXQudG9TdHJpbmcoKSkNCiAgICAgIGlmICghdmFsaWREYXRlKSB7DQogICAgICAgIG1pLmVycm9yKCJPcmRlciBEYXRlIG5vdCBpbiAiICsgc291cmNlRm9ybWF0ICsgIiBmb3JtYXQuIFBsZWFzZSBDaGVjayAiICsgU1REVCkNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoIXNvdXJjZUZvcm1hdC50cmltKCkuZXF1YWxzKCJ5eXl5TU1kZCIpKSB7DQogICAgICAgICAgU1REVCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiY29udmVydERhdGUiLCBzb3VyY2VGb3JtYXQsICJ5eXl5TU1kZCIsIFNURFQudG9TdHJpbmcoKS50cmltKCkpIC8vTWFpbnRhaW4gZGF0ZSBpbiBZTUQ4IGZvcm1hdCBpbiB0aGUgdGFibGUNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghRklEVC50b1N0cmluZygpLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIC8vVmFsaWRhdGUgRmluaXNoIGRhdGUNCiAgICAgIFN0cmluZyBzb3VyY2VGb3JtYXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImdldEZ1bGxGb3JtYXQiLCBtaS5nZXREYXRlRm9ybWF0KCkpDQogICAgICB2YWxpZERhdGUgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgRklEVC50b1N0cmluZygpLnRyaW0oKSwgc291cmNlRm9ybWF0LnRvU3RyaW5nKCkpDQogICAgICBpZiAoIXZhbGlkRGF0ZSkgew0KICAgICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIEZJRFQpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCFzb3VyY2VGb3JtYXQudHJpbSgpLmVxdWFscygieXl5eU1NZGQiKSkgew0KICAgICAgICAgIEZJRFQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImNvbnZlcnREYXRlIiwgc291cmNlRm9ybWF0LCAieXl5eU1NZGQiLCBGSURULnRvU3RyaW5nKCkudHJpbSgpKSAvL01haW50YWluIGRhdGUgaW4gWU1EOCBmb3JtYXQgaW4gdGhlIHRhYmxlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZQ0KDQogIH0NCg0KICAvKioNCiAgICpJbnNlcnQgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUNCiAgICogQHBhcmFtcyANCiAgICogQHJldHVybiANCiAgICovDQogIHB1YmxpYyBpbnNlcnRSZWNvcmQoKSB7DQogICAgREJBY3Rpb24gYWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkVYVE9QVCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBxdWVyeSA9IGFjdGlvbi5nZXRDb250YWluZXIoKQ0KICAgIHF1ZXJ5LnNldCgiRVhDT05PIiwgaUNPTk8pDQogICAgcXVlcnkuc2V0KCJFWEZBQ0kiLCBpRkFDSSkNCiAgICBxdWVyeS5zZXQoIkVYU1RZTCIsIGlTVFlMKQ0KICAgIHF1ZXJ5LnNldCgiRVhGTVQxIiwgaUZNVDEpDQogICAgcXVlcnkuc2V0KCJFWEZBQlIiLCBpRkFCUikNCiAgICBxdWVyeS5zZXQoIkVYQ09MUiIsIGlDT0xSKQ0KICAgIHF1ZXJ5LnNldCgiRVhTSVpFIiwgaVNJWkUpDQogICAgcXVlcnkuc2V0KCJFWFBSTk8iLCBpUFJOTykNCiAgICBxdWVyeS5zZXQoIkVYUFJDTCIsIGlQUkNMKQ0KICAgIHF1ZXJ5LnNldCgiRVhNVE5PIiwgaU1UTk8pDQogICAgcXVlcnkuc2V0KCJFWERXUE8iLCBpRFdQTykNCiAgICBxdWVyeS5zZXQoIkVYRk1UMiIsIGlGTVQyKQ0KICAgIHF1ZXJ5LnNldCgiRVhDTlFUIiwgaUNOUVQpDQogICAgcXVlcnkuc2V0KCJFWERJTTEiLCBpRElNMSkNCiAgICBxdWVyeS5zZXQoIkVYRElNMiIsIGlESU0yKQ0KICAgIHF1ZXJ5LnNldCgiRVhESU0zIiwgaURJTTMpDQogICAgcXVlcnkuc2V0KCJFWFdITE8iLCBpV0hMTykNCiAgICBxdWVyeS5zZXQoIkVYU1BFMSIsIGlTUEUxKQ0KICAgIHF1ZXJ5LnNldCgiRVhTUEUyIiwgaVNQRTIpDQogICAgcXVlcnkuc2V0KCJFWElUQ0wiLCBpSVRDTCkNCiAgICBxdWVyeS5zZXQoIkVYQ09OTyIsIGlDT05PIGFzIEludGVnZXIpDQogICAgcXVlcnkuc2V0KCJFWFNDSE4iLCBpU0NITiBhcyBJbnRlZ2VyKQ0KICAgIHF1ZXJ5LnNldCgiRVhNRk5PIiwgaU1GTk8gYXMgSW50ZWdlcikNCiAgICBxdWVyeS5zZXQoIkVYTVNFUSIsIGlNU0VRIGFzIEludGVnZXIpDQogICAgcXVlcnkuc2V0KCJFWE9SUUEiLCBpT1JRQSBhcyBEb3VibGUpDQogICAgcXVlcnkuc2V0KCJFWFNURFQiLCBpU1REVCBhcyBJbnRlZ2VyKQ0KICAgIHF1ZXJ5LnNldCgiRVhGSURUIiwgaUZJRFQgYXMgSW50ZWdlcikNCiAgICBxdWVyeS5zZXQoIkVYU1FOWCIsIGlTUU5YIGFzIEludGVnZXIpDQogICAgcXVlcnkuc2V0KCJFWFJHRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KICAgIHF1ZXJ5LnNldCgiRVhSR1RNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpDQogICAgcXVlcnkuc2V0KCJFWExNRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQ0KICAgIHF1ZXJ5LnNldCgiRVhDSE5PIiwgMCkNCiAgICBxdWVyeS5zZXQoIkVYTE1UTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQ0KICAgIHF1ZXJ5LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpDQogICAgcXVlcnkuc2V0KCJFWENSSUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCiAgICBhY3Rpb24uaW5zZXJ0KHF1ZXJ5LCByZWNvcmRFeGlzdHMpDQogIH0NCg0KICBDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsNCiAgICBtaS5lcnJvcigiUmVjb3JkIEFscmVhZHkgRXhpc3RzIikNCiAgICByZXR1cm4NCiAgfQ0KfQ=="}}}