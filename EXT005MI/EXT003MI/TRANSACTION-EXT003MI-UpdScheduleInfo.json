{"programModules":{"EXT003MI":{"program":"EXT003MI","triggers":{},"transactions":{"UpdScheduleInfo":{"sourceUuid":"cc9c921f-5739-4363-8dce-a9d2a08484cc","name":"UpdScheduleInfo","program":"EXT003MI","description":"Update Schedule related details.","active":true,"multi":false,"modified":1678816351988,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"SCHN","description":"Schedule Number","length":11,"mandatory":true,"type":"N"},{"name":"MFNO","description":"Manufacturing Number","length":7,"mandatory":true,"type":"N"},{"name":"MTNO","description":"Fabric","length":15,"mandatory":true,"type":"A"},{"name":"FACI","description":"Facility. ","length":3,"mandatory":false,"type":"A"},{"name":"STYL","description":"Style","length":8,"mandatory":false,"type":"A"},{"name":"FMT1","description":"Body Part","length":30,"mandatory":false,"type":"A"},{"name":"FABR","description":"Fabric Code","length":8,"mandatory":false,"type":"A"},{"name":"COLR","description":"Fabric Color","length":3,"mandatory":false,"type":"A"},{"name":"SIZE","description":"Size","length":8,"mandatory":false,"type":"A"},{"name":"PRNO","description":"Product Number","length":15,"mandatory":false,"type":"A"},{"name":"PRCL","description":"Product Color","length":3,"mandatory":false,"type":"A"},{"name":"DWPO","description":"Fabric Type","length":10,"mandatory":false,"type":"A"},{"name":"FMT2","description":"Model","length":30,"mandatory":false,"type":"A"},{"name":"MSEQ","description":"Sequence Number","length":4,"mandatory":false,"type":"N"},{"name":"CNQT","description":"Usage Quantity","length":15,"mandatory":false,"type":"A"},{"name":"DIM1","description":"Fabric Width","length":15,"mandatory":false,"type":"A"},{"name":"DIM2","description":"Ply Height","length":15,"mandatory":false,"type":"A"},{"name":"DIM3","description":"Bundle Height","length":15,"mandatory":false,"type":"A"},{"name":"ORQA","description":"Quantity for Size","length":10,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"SPE1","description":"Model Size","length":25,"mandatory":false,"type":"A"},{"name":"SPE2","description":"Spreading","length":25,"mandatory":false,"type":"A"},{"name":"STDT","description":"Start Date","length":8,"mandatory":false,"type":"N"},{"name":"FIDT","description":"Finish Date","length":8,"mandatory":false,"type":"N"},{"name":"ITCL","description":"Product Group","length":5,"mandatory":false,"type":"A"},{"name":"SQNX","description":"Sort Sequence","length":3,"mandatory":false,"type":"N"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"cc9c921f-5739-4363-8dce-a9d2a08484cc":{"uuid":"cc9c921f-5739-4363-8dce-a9d2a08484cc","updated":1701776002085,"updatedBy":"ABHISHEK","created":1675663050566,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20230918173517.9","language":"GROOVY","codeHash":"412CAACA740ED580ACB78280BEF486A5CC76F964B5AB19E1050F8A7D6A9F602F","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVE9QVCB0YWJsZSBmb3IgRURJIHR1cm5hcm91bmQgZGF0YS4gCiAqCiAqIE5hbWU6IEVYVDAwM01JLlVwZFNjaGVkdWxlSW5mbwogKiBEZXNjcmlwdGlvbjogVXBkYXRlIHJlY29yZHMgdG8gRVhUT1BUIHRhYmxlCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIzLTAyLTAzICAgIFN1cml5YU5AZm9ydHVkZS5jbyAgICAgICAgIFVwZGF0ZSByZWNvcmRzIHRvIEVYVE9QVCB0YWJsZQogKgogKi8KCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcgoKCnB1YmxpYyBjbGFzcyBVcGRTY2hlZHVsZUluZm8gZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICAgIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICAgIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UKICAgIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCiAgICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQoKICAgIHByaXZhdGUgU3RyaW5nIGlGQUNJLCBpU1RZTCwgaUZNVDEsIGlGQUJSLCBpQ09MUiwgaVNJWkUsIGlQUk5PLCBpUFJDTCwgaU1UTk8sIGlEV1BPLCBpRk1UMiwgaUNOUVQsIGlESU0xLCBpRElNMiwgaURJTTMsIGlXSExPLCBpU1BFMSwgaVNQRTIsIGlJVENMCiAgICBwcml2YXRlIGludCBpQ09OTywgaVNDSE4sIGlNRk5PLCBpTVNFUSwgaVNURFQsIGlGSURULCBpU1FOWAogICAgcHJpdmF0ZSBkb3VibGUgaU9SUUEKICAgIHByaXZhdGUgYm9vbGVhbiB2YWxpZERhdGUgPSB0cnVlCiAgICAKICAgIHB1YmxpYyBVcGRTY2hlZHVsZUluZm8oTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0sIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyLCBVdGlsaXR5QVBJIHV0aWxpdHkpIHsKICAgICAgICB0aGlzLm1pID0gbWkKICAgICAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICAgICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyCiAgICAgICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQogICAgfQogICAgLyoqCiAgICAgKiogTWFpbiBmdW5jdGlvbgogICAgICogQHBhcmFtCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIG1haW4oKSB7CiAgICAgICAgCiAgICAgICAgaUZBQ0kgPSAobWkuaW5EYXRhLmdldCgiRkFDSSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRkFDSSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGQUNJIikKICAgICAgICBpU1RZTCA9IChtaS5pbkRhdGEuZ2V0KCJTVFlMIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTVFlMIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNUWUwiKQogICAgICAgIGlGTVQxID0gKG1pLmluRGF0YS5nZXQoIkZNVDEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZNVDEiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRk1UMSIpCiAgICAgICAgaUZBQlIgPSAobWkuaW5EYXRhLmdldCgiRkFCUiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRkFCUiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGQUJSIikKICAgICAgICBpQ09MUiA9IChtaS5pbkRhdGEuZ2V0KCJDT0xSIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT0xSIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNPTFIiKQogICAgICAgIGlTSVpFID0gKG1pLmluRGF0YS5nZXQoIlNJWkUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNJWkUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiU0laRSIpCiAgICAgICAgaVBSTk8gPSAobWkuaW5EYXRhLmdldCgiUFJOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUFJOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQUk5PIikKICAgICAgICBpUFJDTCA9IChtaS5pbkRhdGEuZ2V0KCJQUkNMIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQUkNMIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBSQ0wiKQogICAgICAgIGlNVE5PID0gKG1pLmluRGF0YS5nZXQoIk1UTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk1UTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTVROTyIpCiAgICAgICAgaURXUE8gPSAobWkuaW5EYXRhLmdldCgiRFdQTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRFdQTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJEV1BPIikKICAgICAgICBpRk1UMiA9IChtaS5pbkRhdGEuZ2V0KCJGTVQyIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGTVQyIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZNVDIiKQogICAgICAgIGlDTlFUID0gKG1pLmluRGF0YS5nZXQoIkNOUVQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNOUVQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ05RVCIpCiAgICAgICAgaURJTTEgPSAobWkuaW5EYXRhLmdldCgiRElNMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElNMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJESU0xIikKICAgICAgICBpRElNMiA9IChtaS5pbkRhdGEuZ2V0KCJESU0yIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJESU0yIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkRJTTIiKQogICAgICAgIGlESU0zID0gKG1pLmluRGF0YS5nZXQoIkRJTTMiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJTTMiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRElNMyIpCiAgICAgICAgaVdITE8gPSAobWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJXSExPIikKICAgICAgICBpU1BFMSA9IChtaS5pbkRhdGEuZ2V0KCJTUEUxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTUEUxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNQRTEiKQogICAgICAgIGlTUEUyID0gKG1pLmluRGF0YS5nZXQoIlNQRTIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNQRTIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiU1BFMiIpCiAgICAgICAgaUlUQ0wgPSAobWkuaW5EYXRhLmdldCgiSVRDTCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiSVRDTCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVENMIikKICAgICAgICAKICAgICAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyBwcm9ncmFtLkxEQVpELkNPTk8gYXMgSW50ZWdlciA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKSBhcyBJbnRlZ2VyCiAgICAgICAgaVNDSE4gPSAobWkuaW5EYXRhLmdldCgiU0NITiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU0NITiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlNDSE4iKSBhcyBJbnRlZ2VyCiAgICAgICAgaU1GTk8gPSAobWkuaW5EYXRhLmdldCgiTUZOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTUZOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk1GTk8iKSBhcyBJbnRlZ2VyCiAgICAgICAgaU1TRVEgPSAobWkuaW5EYXRhLmdldCgiTVNFUSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTVNFUSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk1TRVEiKSBhcyBJbnRlZ2VyCiAgICAgICAgaU9SUUEgPSAobWkuaW5EYXRhLmdldCgiT1JRQSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JRQSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk9SUUEiKSBhcyBEb3VibGUKICAgICAgICBpU1REVCA9IChtaS5pbkRhdGEuZ2V0KCJTVERUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTVERUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiU1REVCIpIGFzIEludGVnZXIKICAgICAgICBpRklEVCA9IChtaS5pbkRhdGEuZ2V0KCJGSURUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGSURUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRklEVCIpIGFzIEludGVnZXIKICAgICAgICBpU1FOWCA9IChtaS5pbkRhdGEuZ2V0KCJTUU5YIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTUU5YIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiU1FOWCIpIGFzIEludGVnZXIKCiAgICAgICAgYm9vbGVhbiB2YWxpZElucHV0ID0gdmFsaWRhdGVJbnB1dChpQ09OTyxpU0NITixpTUZOTyxpTVROTywgaUZBQ0ksIGlXSExPLCBpU1REVCwgaUZJRFQpCiAgICAgICAgaWYodmFsaWRJbnB1dCkKICAgICAgICB7CiAgICAgICAgICB1cGRhdGVSZWNvcmQoKQogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKlZhbGlkYXRlIGlucHV0cwogICAgICogQHBhcmFtcyBpbnQgQ09OTyAsIGludCBTQ0hOLCBpbnQgTUZOTywgU3RyaW5nIE1UTk8KICAgICAqIEByZXR1cm4gYm9vbGVhbgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVJbnB1dChpbnQgQ09OTywgaW50IFNDSE4sIGludCBNRk5PLCBTdHJpbmcgTVROTywgU3RyaW5nIEZBQ0ksIFN0cmluZyBXSExPLCBpbnQgU1REVCwgaW50IEZJRFQpIHsKICAgICAgICAvL1ZhbGlkYXRlIENvbXBhbnkgTnVtYmVyCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zID0gWyJDT05PIjogQ09OTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgICBDbG9zdXJlPD8+IGNhbGxiYWNrID0gewogICAgICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBDT05PKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICAgICAgLy9WYWxpZGF0ZSBTY2hlZHVsZSBOdW1iZXIKICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiAgcGFyYW1zU0NITiA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksICJTQ0hOIjogU0NITi50b1N0cmluZygpLnRyaW0oKV0KICAgICAgICBDbG9zdXJlPD8+IGNhbGxiYWNrU0NITiA9IHsKICAgICAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgICBpZiAocmVzcG9uc2UuU0NITiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBTY2hlZHVsZSBOdW1iZXIgIiArIFNDSE4pCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBtaUNhbGxlci5jYWxsKCJQTVMyNzBNSSIsICJHZXRTY2hlZHVsZU5vIiwgcGFyYW1zU0NITiwgY2FsbGJhY2tTQ0hOKQogICAgICAgIAogICAgICAgIAogICAgICAgICAvL1ZhbGlkYXRlIE1hbnVmYWN0dXJpbmcgTnVtYmVyCiAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtc01GTk8gPSBbIkNPTk8iOiBDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiUUVSWSI6ICJWSE1GTk8gZnJvbSBNV09IRUQgd2hlcmUgVkhNRk5PID0gJyIrTUZOTysiJyJdCiAgICAgICAgQ2xvc3VyZTw/PiBjYWxsYmFja01GTk8gPSB7CiAgICAgICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlJFUEwgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgTWFudWZhY3R1cmluZyBOdW1iZXIgIiArIE1GTk8pCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBtaUNhbGxlci5jYWxsKCJFWFBPUlRNSSIsICJTZWxlY3QiLCBwYXJhbXNNRk5PLCBjYWxsYmFja01GTk8pCiAgICAgICAgCiAgICAgICAgLy9WYWxpZGF0ZSBJdGVtIE51bWJlcgogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zTVROTyA9IFsiSVROTyI6IE1UTk9dCiAgICAgICAgQ2xvc3VyZTw/PiBjYWxsYmFja01UTk8gPSB7CiAgICAgICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgICAgaWYgKHJlc3BvbnNlLklUTk8gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcG9uZW50IE51bWJlciAiICsgTVROTykKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIwME1JIiwgIkdldCIsIHBhcmFtc01UTk8sIGNhbGxiYWNrTVROTykKICAgICAgICAKICAgICAgICBpZighRkFDSS50cmltKCkuaXNFbXB0eSgpKQogICAgewogICAgICAgICAgLy9WYWxpZGF0ZSBGYWNpbGl0eSBOdW1iZXIgCiAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXNGQUNJID0gWyJDT05PIjogQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkZBQ0kiOiBGQUNJLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICAgIENsb3N1cmU8Pz4gY2FsbGJhY2tGQUNJID0gewogICAgICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5GQUNJID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRmFjaWxpdHkgICIgKyBGQUNJKQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTMDA4TUkiLCAiR2V0IiwgcGFyYW1zRkFDSSwgY2FsbGJhY2spCiAgICB9CiAgICAgICAgaWYoIVdITE8udHJpbSgpLmlzRW1wdHkoKSkKICAgIHsKICAgICAgICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zV0hMTyA9IFsiQ09OTyI6IENPTk8udG9TdHJpbmcoKS50cmltKCksIldITE8iOldITE8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIENsb3N1cmU8Pz4gY2FsbGJhY2tXSExPID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgICBpZiAocmVzcG9uc2UuV0hMTyA9PSBudWxsKSB7CiAgICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIFdhcmVob3VzZSBOdW1iZXIgIiArIFdITE8pCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAwNU1JIiwgIkdldFdhcmVob3VzZSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CiAgICAKICAgIGlmKCFTVERULnRvU3RyaW5nKCkudHJpbSgpLmlzRW1wdHkoKSkgIAogICAgewogICAgLy9WYWxpZGF0ZSBTdGFydCBkYXRlCiAgICBTdHJpbmcgc291cmNlRm9ybWF0ID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJnZXRGdWxsRm9ybWF0IiwgbWkuZ2V0RGF0ZUZvcm1hdCgpKQogICAgdmFsaWREYXRlID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJpc0RhdGVWYWxpZCIsIFNURFQudG9TdHJpbmcoKS50cmltKCksIHNvdXJjZUZvcm1hdC50b1N0cmluZygpKQogICAgaWYgKCF2YWxpZERhdGUpIHsKICAgICAgbWkuZXJyb3IoIk9yZGVyIERhdGUgbm90IGluICIgKyBzb3VyY2VGb3JtYXQgKyAiIGZvcm1hdC4gUGxlYXNlIENoZWNrICIgKyBTVERUKQogICAgICByZXR1cm4gZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgIGlmICghc291cmNlRm9ybWF0LnRyaW0oKS5lcXVhbHMoInl5eXlNTWRkIikpIHsKICAgICAgICBTVERUID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJjb252ZXJ0RGF0ZSIsIHNvdXJjZUZvcm1hdCwgInl5eXlNTWRkIiwgU1REVC50b1N0cmluZygpLnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQogICAgICB9CiAgICB9CiAgICB9CiAgICAKICAgICAgICBpZighRklEVC50b1N0cmluZygpLnRyaW0oKS5pc0VtcHR5KCkpICAKICAgIHsKICAgIC8vVmFsaWRhdGUgRmluaXNoIGRhdGUKICAgIFN0cmluZyBzb3VyY2VGb3JtYXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImdldEZ1bGxGb3JtYXQiLCBtaS5nZXREYXRlRm9ybWF0KCkpCiAgICB2YWxpZERhdGUgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgRklEVC50b1N0cmluZygpLnRyaW0oKSwgc291cmNlRm9ybWF0LnRvU3RyaW5nKCkpCiAgICBpZiAoIXZhbGlkRGF0ZSkgewogICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIEZJRFQpCiAgICAgIHJldHVybiBmYWxzZQogICAgfSBlbHNlIHsKICAgICAgaWYgKCFzb3VyY2VGb3JtYXQudHJpbSgpLmVxdWFscygieXl5eU1NZGQiKSkgewogICAgICAgIEZJRFQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImNvbnZlcnREYXRlIiwgc291cmNlRm9ybWF0LCAieXl5eU1NZGQiLCBGSURULnRvU3RyaW5nKCkudHJpbSgpKSAvL01haW50YWluIGRhdGUgaW4gWU1EOCBmb3JtYXQgaW4gdGhlIHRhYmxlCiAgICAgIH0KICAgIH0KICAgIH0KICAKCiAgICAgICAgcmV0dXJuIHRydWUKCiAgICB9CiAgICAKICAgIC8qKgogICAgICpVcGRhdGUgcmVjb3JkcyB0byBFWFRPUFQgdGFibGUKICAgICAqIEBwYXJhbXMgCiAgICAgKiBAcmV0dXJuIAogICAgICovCiAgICBwdWJsaWMgdXBkYXRlUmVjb3JkKCkgewogICAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVE9QVCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgICAgIGNvbnRhaW5lci5zZXQoIkVYU0NITiIsIGlTQ0hOKQogICAgICAgIGNvbnRhaW5lci5zZXQoIkVYTUZOTyIsIGlNRk5PKQogICAgICAgIGlmICghcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykpIHsKICAgICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IEV4aXN0LiIpCiAgICAgICAgcmV0dXJuCiAgICB9CiAgICB9CgogICAgQ2xvc3VyZTw/PiB1cGRhdGVDYWxsQmFjayA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgogICAgICAgIAogICAgICAgIGlmICghaUZBQ0kudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUZBQ0kudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZBQ0kiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRkFDSSIsIGlGQUNJKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVNUWUwudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVNUWUwudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNUWUwiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYU1RZTCIsIGlTVFlMKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaUZNVDEudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUZNVDEudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZNVDEiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRk1UMSIsIGlGTVQxKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaUZBQlIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUZBQlIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZBQlIiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRkFCUiIsIGlGQUJSKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaUNPTFIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUNPTFIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENPTFIiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ09MUiIsIGlDT0xSKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVNJWkUudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVNJWkUudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNJWkUiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYU0laRSIsIGlTSVpFKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVBSTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVBSTk8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBSTk8iLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYUFJOTyIsIGlQUk5PKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVBSQ0wudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVBSQ0wudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBSQ0wiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYUFJDTCIsIGlQUkNMKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaURXUE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaURXUE8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERXUE8iLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRFdQTyIsIGlEV1BPKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaUZNVDIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUZNVDIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZNVDIiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRk1UMiIsIGlGTVQyKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaUNOUVQudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUNOUVQudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENOUVQiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ05RVCIsIGlDTlFUKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaURJTTEudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaURJTTEudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERJTTEiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRElNMSIsIGlESU0xKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaURJTTIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaURJTTIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERJTTIiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRElNMiIsIGlESU0yKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaURJTTMudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaURJTTMudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERJTTMiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRElNMyIsIGlESU0zKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVdITE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVdITE8udHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFdITE8iLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYV0hMTyIsIGlXSExPKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVNQRTEudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVNQRTEudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNQRTEiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYU1BFMSIsIGlTUEUxKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaVNQRTIudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaVNQRTIudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNQRTIiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYU1BFMiIsIGlTUEUyKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaUlUQ0wudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoaUlUQ0wudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWElUQ0wiLCAiIikKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYSVRDTCIsIGlJVENMKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKG1pLmluRGF0YS5nZXQoIk1TRVEiKSE9bnVsbCYmIW1pLmluRGF0YS5nZXQoIk1TRVEiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhNU0VRIiwgaU1TRVEpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKG1pLmluRGF0YS5nZXQoIk9SUUEiKSE9bnVsbCYmIW1pLmluRGF0YS5nZXQoIk9SUUEiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhPUlFBIiwgaU9SUUEpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKG1pLmluRGF0YS5nZXQoIlNURFQiKSE9bnVsbCYmIW1pLmluRGF0YS5nZXQoIlNURFQiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTVERUIiwgaVNURFQpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKG1pLmluRGF0YS5nZXQoIkZJRFQiKSE9bnVsbCYmIW1pLmluRGF0YS5nZXQoIkZJRFQiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhGSURUIiwgaUZJRFQpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKG1pLmluRGF0YS5nZXQoIlNRTlgiKSE9bnVsbCYmIW1pLmluRGF0YS5nZXQoIlNRTlgiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhTUU5YIiwgaVNRTlgpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTVRNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpCiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpCiAgICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgICB9Cn0="}}}