{"programModules":{"EXT004MI":{"program":"EXT004MI","triggers":{},"transactions":{"GetAllocData":{"sourceUuid":"b8c4f4cd-c2b8-48df-84e7-e176b8cc5f95","name":"GetAllocData","program":"EXT004MI","description":"Get Allocation Data","active":true,"multi":false,"modified":1692629744981,"modifiedBy":"SADANGJ","outputFields":[{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"ITNO","description":"Item number","length":15,"mandatory":false,"type":"A"},{"name":"WHSL","description":"Location","length":10,"mandatory":false,"type":"A"},{"name":"BANO","description":"Lot number","length":20,"mandatory":false,"type":"A"},{"name":"CAMU","description":"Container","length":20,"mandatory":false,"type":"A"},{"name":"TTYP","description":"Stock transaction type","length":2,"mandatory":false,"type":"N"},{"name":"RIDN","description":"Order number","length":10,"mandatory":false,"type":"A"},{"name":"RIDO","description":"Operation number","length":6,"mandatory":false,"type":"N"},{"name":"RIDI","description":"Delivery number","length":11,"mandatory":false,"type":"N"},{"name":"PLSX","description":"Picking list suffix","length":3,"mandatory":false,"type":"N"},{"name":"RIDL","description":"Order line","length":6,"mandatory":false,"type":"N"},{"name":"STAT","description":"Status","length":2,"mandatory":false,"type":"A"},{"name":"SLTP","description":"Stock zone","length":2,"mandatory":false,"type":"A"},{"name":"ALQT","description":"Allocated qty","length":17,"mandatory":false,"type":"N"},{"name":"WHLT","description":"Location type","length":2,"mandatory":false,"type":"A"},{"name":"TWSL","description":"To Warehouse Location","length":10,"mandatory":false,"type":"A"},{"name":"SLT2","description":"To stock zone type","length":2,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"RIDI","description":"Delivery number","length":11,"mandatory":true,"type":"N"},{"name":"ITNO","description":"Item number","length":15,"mandatory":true,"type":"A"},{"name":"RIDN","description":"Order number","length":10,"mandatory":false,"type":"A"},{"name":"CAMU","description":"Container","length":20,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"b8c4f4cd-c2b8-48df-84e7-e176b8cc5f95":{"uuid":"b8c4f4cd-c2b8-48df-84e7-e176b8cc5f95","updated":1707724450606,"updatedBy":"ABHISHEK","created":1689607578507,"createdBy":"SADANGJ","apiVersion":"0.9","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"9CA4B9AA3596ED21D889A0DC6C92418D7ECEA79233F39928FC65484368BC975D","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIGdldCB0aGUgY2FydG9uIHNlcXVlbmNlIE51bWJlciBmcm9tIE0zCiAqCiAqIE5hbWU6IEVYVDAwNE1JLkdldEFsbG9jRGF0YQogKiBEZXNjcmlwdGlvbjogIEdldCB0aGUgYWxsb2NhdGlvbiBkYXRhIGZyb20gTTMKICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwNzE3ICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIEdldCB0aGUgYWxsb2NhdGlvbiBkYXRhIGZyb20gTTMKICoyMDI0MDIxMiAgQWJoaXNoZWtBQGZvcnR1ZGUuY28gICBVcGRhdGluZyBWYWxpZGF0aW9uIGxvZ2ljCiAqLwoKCgpwdWJsaWMgY2xhc3MgR2V0QWxsb2NEYXRhIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UKICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIKCiAgcHJpdmF0ZSBTdHJpbmcgaUlUTk8sIGlSSUROLCBpQ0FNVQogIHByaXZhdGUgaW50IGlDT05PLCBjb3VudAogIHByaXZhdGUgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQogIHByaXZhdGUgbG9uZyBpRExJWAoKICBwdWJsaWMgR2V0QWxsb2NEYXRhKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlcikgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogIH0KICAKICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaURMSVggPSAobWkuaW5EYXRhLmdldCgiUklESSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUklESSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMEwgOiBtaS5pbkRhdGEuZ2V0KCJSSURJIikgYXMgTG9uZwogICAgaUlUTk8gPSAobWkuaW5EYXRhLmdldCgiSVROTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiSVROTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVE5PIikgYXMgU3RyaW5nCiAgICBpUklETiA9IChtaS5pbkRhdGEuZ2V0KCJSSUROIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJSSUROIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlJJRE4iKSBhcyBTdHJpbmcKICAgIGlDQU1VID0gKG1pLmluRGF0YS5nZXQoIkNBTVUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNBTVUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ0FNVSIpIGFzIFN0cmluZwogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZih2YWxpZElucHV0KQogICAgewogICAgICBzZXRPdXRwdXQoKQogICAgfQogICAgCiAgfQoKICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIHZhbGlkYXRlSW5wdXQoKSB7CgogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKV0KICAgIENsb3N1cmUgPCA/ID4gY2FsbGJhY2tDT05PID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2tDT05PKQoKICAgIE1hcCA8IFN0cmluZywgU3RyaW5nID4gcGFyYW1zRExJWCA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRExJWCI6IGlETElYLnRvU3RyaW5nKCkudHJpbSgpXQogICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFja0RMSVggPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5ETElYID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIGRlbGl2ZXJ5IE51bWJlciAiICsgaURMSVgpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiAKICAgICAgICB9IAogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTVdTNDEwTUkiLCAiR2V0SGVhZCIsIHBhcmFtc0RMSVgsIGNhbGxiYWNrRExJWCkKICAgIAogICAgLy9WYWxpZGF0ZSBJdGVtIE51bWJlcgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIklUTk8iOmlJVE5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFja0lUTk8gPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5JVE5PID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIEl0ZW0gTnVtYmVyICIgKyBpSVROTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFja0lUTk8pCiAgICAKICAgIGlmKCFpUklETi50b1N0cmluZygpLnRyaW0oKS5pc0VtcHR5KCkpewogICAgICAgICAgLy9WYWxpZGF0ZSBPcmRlciBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJPUk5PIjogaVJJRE4udG9TdHJpbmcoKS50cmltKCldCiAgICAgIENsb3N1cmUgPCA/ID4gY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5PUk5PID09IG51bGwpIHsKICAgICAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkdldE9yZGVySGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICAgIAogICAgICAvL0lmIG5vdCBDTywgY2hlY2sgaWYgdmFsaWQgRE8KICAgICAgaWYoIXZhbGlkSW5wdXQpCiAgICAgIHsKICAgICAgICB2YWxpZElucHV0ID0gdHJ1ZQogICAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiVFJOUiI6IGlSSUROLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgICBpZiAocmVzcG9uc2UuVFJOUiA9PSBudWxsKSB7CiAgICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE9yZGVyIE51bWJlciAiICsgaVJJRE4pCiAgICAgICAgICAgIHZhbGlkSW5wdXQ9ZmFsc2UKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzEwME1JIiwgIkdldEhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgICB9CiAgICB9CiAgICAKICB9CiAgCiAgLyoqCiAgICpTZXRPdXRwdXQKICAgKiBAcGFyYW1zCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIHNldE91dHB1dCgpIHsKICAgIHJlYWRNSVRBTE8oKQogIH0KICAKICAKICAvKioKICAgKiBSZWFkIE1JVEFMTyByZWNvcmQKICAgKiBAcGFyYW1zIAogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIHZvaWQgcmVhZE1JVEFMTygpIHsKICAgIGNvdW50ID0gMAogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUQUxPIikuaW5kZXgoIjgwIikuc2VsZWN0aW9uKCJNUVdITE8iLCAiTVFJVE5PIiwgIk1RV0hTTCIsICJNUUJBTk8iLCAiTVFDQU1VIiwgIk1RVFRZUCIsICJNUVJJRE4iLCJNUVJJRE8iLCAiTVFSSURJIiwgIk1RUExTWCIsICJNUVJJREwiLCAiTVFTVEFUIiwgIk1RU0xUUCIsICJNUUFMUVQiLCAiTVFUV1NMIikuYnVpbGQoKQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgIGNvbnRhaW5lci5zZXQoIk1RQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiTVFSSURJIiwgaURMSVggYXMgTG9uZykKICAgIGNvbnRhaW5lci5zZXQoIk1RUExTWCIsIDEpCiAgICBjb250YWluZXIuc2V0KCJNUUNBTVUiLCBpQ0FNVSkKICAgIGNvbnRhaW5lci5zZXQoIk1RSVROTyIsIGlJVE5PKQogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDUsIHJlc3VsdHNldCkKICAgIAogIH0KICAKICBDbG9zdXJlIDwgPyA+IHJlc3VsdHNldCA9IHsKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPgogICAgU3RyaW5nIHJpZG4gPSBjb250YWluZXIuZ2V0KCJNUVJJRE4iKS50b1N0cmluZygpCiAgICBib29sZWFuIG91dHB1dCA9IGZhbHNlCiAgICBpZiAoIWlSSUROLmlzRW1wdHkoKSAmJiBpUklETi5lcXVhbHMocmlkbikpIHsKICAgICAgb3V0cHV0ID0gdHJ1ZQogICAgfQogICAgaWYgKGlSSUROLmlzRW1wdHkoKSkgewogICAgICBvdXRwdXQgPSB0cnVlCiAgICB9CiAgICBpZiAob3V0cHV0ICYmIGNvdW50ID09IDApIHsKICAgICAgY291bnQgPSBjb3VudCArIDEKICAgICAgU3RyaW5nIHdobG8gPSBjb250YWluZXIuZ2V0KCJNUVdITE8iKS50b1N0cmluZygpCiAgICAgIFN0cmluZyB3aHNsID0gY29udGFpbmVyLmdldCgiTVFXSFNMIikudG9TdHJpbmcoKQogICAgICBtaS5vdXREYXRhLnB1dCgiV0hMTyIsIHdobG8pCiAgICAgIG1pLm91dERhdGEucHV0KCJXSFNMIiwgd2hzbCkKICAgICAgbWkub3V0RGF0YS5wdXQoIklUTk8iLCBjb250YWluZXIuZ2V0KCJNUUlUTk8iKS50b1N0cmluZygpKQogICAgICBtaS5vdXREYXRhLnB1dCgiQkFOTyIsIGNvbnRhaW5lci5nZXQoIk1RQkFOTyIpLnRvU3RyaW5nKCkpCiAgICAgIG1pLm91dERhdGEucHV0KCJDQU1VIiwgY29udGFpbmVyLmdldCgiTVFDQU1VIikudG9TdHJpbmcoKSkKICAgICAgbWkub3V0RGF0YS5wdXQoIlRUWVAiLCBjb250YWluZXIuZ2V0KCJNUVRUWVAiKS50b1N0cmluZygpKQogICAgICBtaS5vdXREYXRhLnB1dCgiUklETiIsIGNvbnRhaW5lci5nZXQoIk1RUklETiIpLnRvU3RyaW5nKCkpCiAgICAgIG1pLm91dERhdGEucHV0KCJSSURPIiwgY29udGFpbmVyLmdldCgiTVFSSURPIikudG9TdHJpbmcoKSkKICAgICAgbWkub3V0RGF0YS5wdXQoIlJJREkiLCBjb250YWluZXIuZ2V0KCJNUVJJREkiKS50b1N0cmluZygpKQogICAgICBtaS5vdXREYXRhLnB1dCgiUExTWCIsIGNvbnRhaW5lci5nZXQoIk1RUExTWCIpLnRvU3RyaW5nKCkpCiAgICAgIG1pLm91dERhdGEucHV0KCJSSURMIiwgY29udGFpbmVyLmdldCgiTVFSSURMIikudG9TdHJpbmcoKSkKICAgICAgbWkub3V0RGF0YS5wdXQoIlNUQVQiLCBjb250YWluZXIuZ2V0KCJNUVNUQVQiKS50b1N0cmluZygpKQogICAgICBtaS5vdXREYXRhLnB1dCgiU0xUUCIsIGNvbnRhaW5lci5nZXQoIk1RU0xUUCIpLnRvU3RyaW5nKCkpCiAgICAgIG1pLm91dERhdGEucHV0KCJBTFFUIiwgY29udGFpbmVyLmdldCgiTVFBTFFUIikudG9TdHJpbmcoKSkKICAgICAgbWkub3V0RGF0YS5wdXQoIldITFQiLCBydHZMb2NhdGlvblR5cGUod2hsbywgd2hzbCkpCiAgICAgIFN0cmluZyB0d3NsID0gY29udGFpbmVyLmdldCgiTVFUV1NMIikudG9TdHJpbmcoKQogICAgICBTdHJpbmcgc2x0MiA9ICIiCiAgICAgIGlmICh0d3NsICE9IG51bGwgJiYgIXR3c2wuaXNFbXB0eSgpKSB7CiAgICAgICBzbHQyID0gcnR2U3RvY2tab25lKHdobG8sIHR3c2wpCiAgICAgIH0KICAgICAgbWkub3V0RGF0YS5wdXQoIlRXU0wiLCB0d3NsKQogICAgICBtaS5vdXREYXRhLnB1dCgiU0xUMiIsIHNsdDIpCiAgICAgIG1pLndyaXRlKCkKICAgIH0KICB9CiAgCiAgcHVibGljIFN0cmluZyBydHZMb2NhdGlvblR5cGUoU3RyaW5nIHdobG8sIFN0cmluZyB3aHNsKSB7IAogICAgU3RyaW5nIGxvY2F0aW9uVHlwZSA9ICIiCiAgICBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCJXSExPIjogd2hsbywgIldIU0wiOiB3aHNsXQogICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLldIU0wgIT0gbnVsbCkgewogICAgICAgICAgbG9jYXRpb25UeXBlID0gcmVzcG9uc2UuV0hMVAogICAgICAgIH0KICAgICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDEwTUkiLCAiR2V0TG9jYXRpb24iLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgcmV0dXJuIGxvY2F0aW9uVHlwZQogIH0KICAKICBwdWJsaWMgU3RyaW5nIHJ0dlN0b2NrWm9uZShTdHJpbmcgd2hsbywgU3RyaW5nIHdoc2wpIHsgCiAgICBTdHJpbmcgc3RvY2tab25lID0gIiIKICAgIE1hcCA8IFN0cmluZywgU3RyaW5nID4gcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIldITE8iOiB3aGxvLCAiV0hTTCI6IHdoc2xdCiAgICBDbG9zdXJlIDwgPyA+IGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuV0hTTCAhPSBudWxsKSB7CiAgICAgICAgICBzdG9ja1pvbmUgPSByZXNwb25zZS5TTFRQCiAgICAgICAgfQogICAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJNTVMwMTBNSSIsICJHZXRMb2NhdGlvbiIsIHBhcmFtcywgY2FsbGJhY2spCiAgICByZXR1cm4gc3RvY2tab25lCiAgfQogIAp9"}}}