{"programModules":{"EXT004MI":{"program":"EXT004MI","triggers":{},"transactions":{"UpdMLucasData":{"sourceUuid":"321fce06-4f47-412b-9b1c-eaf476daf8b9","name":"UpdMLucasData","program":"EXT004MI","description":"Update Lucas Data","active":true,"multi":false,"modified":1707728206261,"modifiedBy":"ABHISHEK","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"FACI","description":"Facility Number","length":3,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"RCID","description":"Route Carton ID","length":20,"mandatory":false,"type":"A"},{"name":"LICP","description":"License Plate","length":20,"mandatory":false,"type":"A"},{"name":"TTYP","description":"Stock Transaction Type","length":2,"mandatory":false,"type":"N"},{"name":"ORNO","description":"Order Number","length":10,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":false,"type":"N"},{"name":"BXNO","description":"Box Number","length":4,"mandatory":false,"type":"N"},{"name":"STAT","description":"Status","length":2,"mandatory":false,"type":"A"},{"name":"LMFS","description":"Last Message Sort","length":4,"mandatory":false,"type":"A"},{"name":"LMFD","description":"Last Msg Divert","length":4,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Bill to Customer","length":10,"mandatory":false,"type":"A"},{"name":"MODL","description":"Delivery Method","length":3,"mandatory":false,"type":"A"},{"name":"TEPY","description":"Payment Terms","length":3,"mandatory":false,"type":"A"},{"name":"ESTW","description":"Estimated Weight","length":9,"mandatory":false,"type":"N"},{"name":"ACTW","description":"Actual Weight","length":9,"mandatory":false,"type":"N"},{"name":"WGTO","description":"Weight Tolerance","length":3,"mandatory":false,"type":"N"},{"name":"WGFG","description":"Weight Flag","length":1,"mandatory":false,"type":"A"},{"name":"QAFG","description":"QA Flag","length":1,"mandatory":false,"type":"A"},{"name":"SMFG","description":"Sample Flag","length":1,"mandatory":false,"type":"A"},{"name":"ONFM","description":"Confirmed","length":1,"mandatory":false,"type":"A"},{"name":"PKDV","description":"Pick Divert","length":300,"mandatory":false,"type":"A"},{"name":"PSDV","description":"Prescale Divert","length":50,"mandatory":false,"type":"A"},{"name":"PTDV","description":"Postscale Divert","length":50,"mandatory":false,"type":"A"},{"name":"LNDV","description":"Ship Lane Divert","length":4,"mandatory":false,"type":"A"},{"name":"TXID","description":"Text Identity","length":13,"mandatory":false,"type":"N"},{"name":"FD01","description":"Future Divert 1","length":20,"mandatory":false,"type":"A"},{"name":"FD02","description":"Future Divert 2","length":20,"mandatory":false,"type":"A"},{"name":"ZONE","description":"Zone","length":1,"mandatory":false,"type":"A"},{"name":"ZON2","description":"Zone 1","length":1,"mandatory":false,"type":"A"},{"name":"UD01","description":"User Defined 1","length":50,"mandatory":false,"type":"A"},{"name":"UD02","description":"User Defined 2","length":50,"mandatory":false,"type":"A"},{"name":"UD03","description":"User Defined 3","length":15,"mandatory":false,"type":"N"},{"name":"TEPA","description":"Packaging Terms","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"321fce06-4f47-412b-9b1c-eaf476daf8b9":{"uuid":"321fce06-4f47-412b-9b1c-eaf476daf8b9","updated":1707728304980,"updatedBy":"ABHISHEK","created":1699558004759,"createdBy":"SADANGJ","apiVersion":"0.9","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"616F1CF2B21CABD6DBEC17A28049E217292A10977309A7A32C0A5EE60FAD2A64","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVE1LVCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDAwNE1JLlVwZEx1Y2FzRGF0YQogKiBEZXNjcmlwdGlvbjogVXBkYXRpbmcgcmVjb3JkcyB0byBFWFRNS1QgdGFibGUKICogRGF0ZSAgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uCiAqMjAyMzA2MjIgIFN1cml5YU5AZm9ydHVkZS5jbyAgICBVcGRhdGluZyByZWNvcmRzIHRvIEVYVE1LVCB0YWJsZQogKjIwMjQwMjEyICBBYmhpc2hla0FAZm9ydHVkZS5jbyAgVXBkYXRpbmcgVmFsaWRhdGlvbiBsb2dpYwogKi8KCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcgoKcHVibGljIGNsYXNzIFVwZE1MdWNhc0RhdGEgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgoKICBwcml2YXRlIFN0cmluZyBpRElWSSwgaUZBQ0ksIGlXSExPLCBpUkNJRCwgaUxJQ1AsIGlPUk5PLCBpU1RBVCwgaUxNRlMsIGlMTUZELCBpQ1VOTywgaU1PREwsIGlURVBZLCBpVEVQQSwgaVdHRkcsIGlRQUZHLCBpU01GRywgaU9ORk0sIGlQS0RWLCBpUFNEViwgaVBURFYsIGlMTkRWLCBpRkQwMSwgaUZEMDIsIGlaT05FLCBpWk9OMiwgaVVEMDEsIGlVRDAyCiAgcHJpdmF0ZSBpbnQgaUNPTk8sIGlUVFlQLCBpQlhOTywgaVdHVE8sIGlUWElELCBpVUQwMywgbWF4UGFnZVNpemUgPSAxMDAwMCwgY291bnQgPSAwCiAgcHJpdmF0ZSBsb25nIGlETElYCiAgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQogIHByaXZhdGUgRG91YmxlIGlFU1RXLCBpQUNUVwoKICBwdWJsaWMgVXBkTUx1Y2FzRGF0YShNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICB9CiAgLyoqCiAgICoqIE1haW4gZnVuY3Rpb24KICAgKiBAcGFyYW0KICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgbWFpbigpIHsKICAgIGlESVZJID0gKG1pLmluRGF0YS5nZXQoIkRJVkkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJVkkiKS50cmltKCkuaXNFbXB0eSgpKSA/IHByb2dyYW0uTERBWkQuRElWSSA6IG1pLmluRGF0YS5nZXQoIkRJVkkiKQogICAgaUZBQ0kgPSAobWkuaW5EYXRhLmdldCgiRkFDSSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRkFDSSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGQUNJIikKICAgIGlXSExPID0gKG1pLmluRGF0YS5nZXQoIldITE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpCiAgICBpUkNJRCA9IChtaS5pbkRhdGEuZ2V0KCJSQ0lEIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJSQ0lEIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlJDSUQiKQogICAgaUxJQ1AgPSAobWkuaW5EYXRhLmdldCgiTElDUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTElDUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJMSUNQIikKICAgIGlPUk5PID0gKG1pLmluRGF0YS5nZXQoIk9STk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JOTyIpCiAgICBpU1RBVCA9IChtaS5pbkRhdGEuZ2V0KCJTVEFUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTVEFUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNUQVQiKQogICAgaUxNRlMgPSAobWkuaW5EYXRhLmdldCgiTE1GUyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTE1GUyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJMTUZTIikKICAgIGlMTUZEID0gKG1pLmluRGF0YS5nZXQoIkxNRkQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxNRkQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTE1GRCIpCiAgICBpQ1VOTyA9IChtaS5pbkRhdGEuZ2V0KCJDVU5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDVU5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNVTk8iKQogICAgaU1PREwgPSAobWkuaW5EYXRhLmdldCgiTU9ETCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTU9ETCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJNT0RMIikKICAgIGlURVBZID0gKG1pLmluRGF0YS5nZXQoIlRFUFkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRFUFkiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVEVQWSIpCiAgICBpVEVQQSA9IChtaS5pbkRhdGEuZ2V0KCJURVBBIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJURVBBIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRFUEEiKQogICAgaVdHRkcgPSAobWkuaW5EYXRhLmdldCgiV0dGRyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0dGRyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiV0dGRyIpCiAgICBpUUFGRyA9IChtaS5pbkRhdGEuZ2V0KCJRQUZHIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJRQUZHIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiMCIgOiBtaS5pbkRhdGEuZ2V0KCJRQUZHIikKICAgIGlTTUZHID0gKG1pLmluRGF0YS5nZXQoIlNNRkciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNNRkciKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlNNRkciKQogICAgaU9ORk0gPSAobWkuaW5EYXRhLmdldCgiT05GTSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT05GTSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiT05GTSIpCiAgICBpUEtEViA9IChtaS5pbkRhdGEuZ2V0KCJQS0RWIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQS0RWIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBLRFYiKQogICAgaVBTRFYgPSAobWkuaW5EYXRhLmdldCgiUFNEViIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUFNEViIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQU0RWIikKICAgIGlQVERWID0gKG1pLmluRGF0YS5nZXQoIlBURFYiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBURFYiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUFREViIpCiAgICBpTE5EViA9IChtaS5pbkRhdGEuZ2V0KCJMTkRWIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJMTkRWIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkxORFYiKQogICAgaUZEMDEgPSAobWkuaW5EYXRhLmdldCgiRkQwMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRkQwMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGRDAxIikKICAgIGlGRDAyID0gKG1pLmluRGF0YS5nZXQoIkZEMDIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZEMDIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkQwMiIpCiAgICBpWk9ORSA9IChtaS5pbkRhdGEuZ2V0KCJaT05FIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJaT05FIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiMCIgOiBtaS5pbkRhdGEuZ2V0KCJaT05FIikKICAgIGlaT04yID0gKG1pLmluRGF0YS5nZXQoIlpPTjIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlpPTjIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlpPTjIiKQogICAgaVVEMDEgPSAobWkuaW5EYXRhLmdldCgiVUQwMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVUQwMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVRDAxIikKICAgIGlVRDAyID0gKG1pLmluRGF0YS5nZXQoIlVEMDIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVEMDIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVUQwMiIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaVRUWVAgPSAobWkuaW5EYXRhLmdldCgiVFRZUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVFRZUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlRUWVAiKSBhcyBJbnRlZ2VyCiAgICBpRExJWCA9IChtaS5pbkRhdGEuZ2V0KCJETElYIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJETElYIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRExJWCIpIGFzIExvbmcKICAgIGlCWE5PID0gKG1pLmluRGF0YS5nZXQoIkJYTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkJYTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJCWE5PIikgYXMgSW50ZWdlcgogICAgaUVTVFcgPSAobWkuaW5EYXRhLmdldCgiRVNUVyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRVNUVyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkVTVFciKSBhcyBEb3VibGUKICAgIGlBQ1RXID0gKG1pLmluRGF0YS5nZXQoIkFDVFciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkFDVFciKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJBQ1RXIikgYXMgRG91YmxlCiAgICBpV0dUTyA9IChtaS5pbkRhdGEuZ2V0KCJXR1RPIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJXR1RPIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiV0dUTyIpIGFzIEludGVnZXIKICAgIGlUWElEID0gKG1pLmluRGF0YS5nZXQoIlRYSUQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRYSUQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJUWElEIikgYXMgSW50ZWdlcgogICAgaVVEMDMgPSAobWkuaW5EYXRhLmdldCgiVUQwMyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVUQwMyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlVEMDMiKSBhcyBJbnRlZ2VyCgogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZiAodmFsaWRJbnB1dCkgewogICAgICB1cGRhdGVSZWNvcmQoKQogICAgfQoKICB9CgogIHB1YmxpYyB2b2lkIHZhbGlkYXRlSW5wdXQoKSB7CgogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKV0KICAgIENsb3N1cmUgPCA/ID4gY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBpQ09OTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICBpZiAoIWlDVU5PLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBDdXN0b21lciBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJDVU5PIjogaUNVTk8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5DVU5PID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIEN1c3RvbWVyIE51bWJlciAiICsgaUNVTk8pCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlM2MTBNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmICghaU9STk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIE9yZGVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIk9STk8iOiBpT1JOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gPT0gbnVsbCkgewogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkdldE9yZGVySGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICAgIC8vSWYgbm90IENPLCBjaGVjayBpZiB2YWxpZCBETwogICAgICBpZiAoIXZhbGlkSW5wdXQpIHsKICAgICAgICB2YWxpZElucHV0ID0gdHJ1ZQogICAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiVFJOUiI6IGlPUk5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICAgIGNhbGxiYWNrID0gewogICAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5UUk5SID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgT3JkZXIgTnVtYmVyICIgKyBpT1JOTykKICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBtaUNhbGxlci5jYWxsKCJNTVMxMDBNSSIsICJHZXRIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgICAgfQogICAgfQoKICAgIGlmICghaVdITE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJXSExPIjogaVdITE8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5XSExPID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIFdhcmVob3VzZSBOdW1iZXIgIiArIGlXSExPKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiTU1TMDA1TUkiLCAiR2V0V2FyZWhvdXNlIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCiAgICBpZiAoIWlGQUNJLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBGYWNpbGl0eSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJGQUNJIjogaUZBQ0kudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5GQUNJID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIEZhY2lsaXR5IE51bWJlciAiICsgaUZBQ0kpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlMwMDhNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmIChpRExJWCAhPSAwKSB7CiAgICAgIC8vVmFsaWRhdGUgRGVsaXZlcnkgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRExJWCI6IGlETElYLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuRExJWCA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBEZWxpdmVyeSBOdW1iZXIgIiArIGlETElYKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiTVdTNDEwTUkiLCAiR2V0SGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CiAgfQoKICAvKioKICAgKlVwZGF0ZSByZWNvcmRzIHRvIEVYVE1USyB0YWJsZQogICAqIEBwYXJhbXMgCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdm9pZCB1cGRhdGVSZWNvcmQoKSB7CiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRNVEsiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQoKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhESVZJIiwgaURJVkkpCiAgICBjb250YWluZXIuc2V0KCJFWFJDSUQiLCBpUkNJRCkKICAgIHF1ZXJ5LnJlYWRBbGxMb2NrKGNvbnRhaW5lciwgMywgdXBkYXRlQ2FsbEJhY2spCiAgICBpZiAoY291bnQgPT0gMCkgewogICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IEV4aXN0LiIpCiAgICAgIHJldHVybgogICAgfQogIH0KCiAgQ2xvc3VyZSA8ID8gPiB1cGRhdGVDYWxsQmFjayA9IHsKICAgIExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4KICAgIGNvdW50ID0gY291bnQgKyAxCiAgICBpbnQgQ0hOTyA9IGxvY2tlZFJlc3VsdC5nZXQoIkVYQ0hOTyIpCiAgICBpZiAoIWlGQUNJLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgaWYgKGlGQUNJLnRyaW0oKS5lcXVhbHMoIj8iKSkgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRkFDSSIsICIiKQogICAgICB9IGVsc2UgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRkFDSSIsIGlGQUNJKQogICAgICB9CiAgICB9CgogICAgaWYgKCFpU1RBVC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpU1RBVC50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNUQVQiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNUQVQiLCBpU1RBVCkKICAgICAgfQogICAgfQogICAgaWYgKCFpTE1GUy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTE1GUy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRlMiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRlMiLCBpTE1GUykKICAgICAgfQogICAgfQogICAgaWYgKCFpTE1GRC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTE1GRC50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRkQiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRkQiLCBpTE1GRCkKICAgICAgfQogICAgfQogICAgaWYgKCFpQ1VOTy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpQ1VOTy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENVTk8iLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENVTk8iLCBpQ1VOTykKICAgICAgfQogICAgfQogICAgaWYgKCFpTU9ETC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTU9ETC50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE1PREwiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE1PREwiLCBpTU9ETCkKICAgICAgfQogICAgfQogICAgaWYgKCFpVEVQWS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVEVQWS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUFkiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUFkiLCBpVEVQWSkKICAgICAgfQogICAgfQogICAgaWYgKCFpVEVQQS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVEVQQS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUEEiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUEEiLCBpVEVQQSkKICAgICAgfQogICAgfQogICAgaWYgKCFpV0dGRy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpV0dGRy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFdHRkciLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFdHRkciLCBpV0dGRykKICAgICAgfQogICAgfQogICAgaWYgKCFpUUFGRy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUUFGRy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFFBRkciLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFFBRkciLCBpUUFGRykKICAgICAgfQogICAgfQogICAgaWYgKCFpU01GRy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpU01GRy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNNRkciLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNNRkciLCBpU01GRykKICAgICAgfQogICAgfQogICAgaWYgKCFpT05GTS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpT05GTS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE9ORk0iLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE9ORk0iLCBpT05GTSkKICAgICAgfQogICAgfQogICAgaWYgKCFpUEtEVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUEtEVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBLRFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBLRFYiLCBpUEtEVikKICAgICAgfQogICAgfQogICAgaWYgKCFpUFNEVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUFNEVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBTRFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBTRFYiLCBpUFNEVikKICAgICAgfQogICAgfQogICAgaWYgKCFpUFREVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUFREVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBURFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBURFYiLCBpUFREVikKICAgICAgfQogICAgfQogICAgaWYgKCFpTE5EVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTE5EVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExORFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExORFYiLCBpTE5EVikKICAgICAgfQogICAgfQogICAgaWYgKCFpRkQwMS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpRkQwMS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDEiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDEiLCBpRkQwMSkKICAgICAgfQogICAgfQogICAgaWYgKCFpRkQwMi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpRkQwMi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDIiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDIiLCBpRkQwMikKICAgICAgfQogICAgfQogICAgaWYgKCFpWk9ORS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpWk9ORS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTkUiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTkUiLCBpWk9ORSkKICAgICAgfQogICAgfQogICAgaWYgKCFpWk9OMi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpWk9OMi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTjIiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTjIiLCBpWk9OMikKICAgICAgfQogICAgfQogICAgaWYgKCFpVUQwMS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVUQwMS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDEiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDEiLCBpVUQwMSkKICAgICAgfQogICAgfQogICAgaWYgKCFpVUQwMi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVUQwMi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDIiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDIiLCBpVUQwMikKICAgICAgfQogICAgfQogICAgaWYgKG1pLmluRGF0YS5nZXQoIkJYTk8iKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJCWE5PIikudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEJYTk8iLCBpQlhOTyBhcyBJbnRlZ2VyKQogICAgfQogICAgaWYgKG1pLmluRGF0YS5nZXQoIkVTVFciKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJFU1RXIikudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEVTVFciLCBpRVNUVyBhcyBEb3VibGUpCiAgICB9CiAgICBpZiAobWkuaW5EYXRhLmdldCgiQUNUVyIpICE9IG51bGwgJiYgIW1pLmluRGF0YS5nZXQoIkFDVFciKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQUNUVyIsIGlBQ1RXIGFzIERvdWJsZSkKICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJXR1RPIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiV0dUTyIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhXR1RPIiwgaVdHVE8gYXMgSW50ZWdlcikKICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJUWElEIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiVFhJRCIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhUWElEIiwgaVRYSUQgYXMgSW50ZWdlcikKICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJVRDAzIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiVUQwMyIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhVRDAzIiwgaVVEMDMgYXMgSW50ZWdlcikKICAgIH0KICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hOTyIsIENITk8gKyAxKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpCiAgICBsb2NrZWRSZXN1bHQudXBkYXRlKCkKICB9Cn0="}}}