{"programModules":{"EXT004MI":{"program":"EXT004MI","triggers":{},"transactions":{"AddLucasData":{"sourceUuid":"45a5e13b-e335-493c-8805-df1312473c41","name":"AddLucasData","program":"EXT004MI","description":"Add Lucas Data","active":true,"multi":false,"modified":1707723709447,"modifiedBy":"ABHISHEK","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"FACI","description":"Facility Number","length":3,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"RCID","description":"Route Carton ID","length":20,"mandatory":false,"type":"A"},{"name":"LICP","description":"License Plate","length":20,"mandatory":false,"type":"A"},{"name":"TTYP","description":"Stock Transaction Type","length":2,"mandatory":false,"type":"N"},{"name":"ORNO","description":"Order Number","length":10,"mandatory":true,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"},{"name":"BXNO","description":"Box Number","length":4,"mandatory":false,"type":"N"},{"name":"STAT","description":"Status","length":2,"mandatory":false,"type":"A"},{"name":"LMFS","description":"Last Message Sort","length":4,"mandatory":false,"type":"A"},{"name":"LMFD","description":"Last Msg Divert","length":4,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Bill to Customer","length":10,"mandatory":false,"type":"A"},{"name":"MODL","description":"Delivery Method","length":3,"mandatory":false,"type":"A"},{"name":"TEPY","description":"Payment Terms","length":3,"mandatory":false,"type":"A"},{"name":"ESTW","description":"Estimated Weight","length":9,"mandatory":false,"type":"N"},{"name":"ACTW","description":"Actual Weight","length":9,"mandatory":false,"type":"N"},{"name":"WGTO","description":"Weight Tolerance","length":3,"mandatory":false,"type":"N"},{"name":"WGFG","description":"Weight Flag","length":1,"mandatory":false,"type":"A"},{"name":"QAFG","description":"QA Flag","length":1,"mandatory":false,"type":"A"},{"name":"SMFG","description":"Sample Flag","length":1,"mandatory":false,"type":"A"},{"name":"ONFM","description":"Confirmed","length":1,"mandatory":false,"type":"A"},{"name":"PKDV","description":"Pick Divert","length":300,"mandatory":false,"type":"A"},{"name":"PSDV","description":"Prescale Divert","length":50,"mandatory":false,"type":"A"},{"name":"PTDV","description":"Postscale Divert","length":50,"mandatory":false,"type":"A"},{"name":"LNDV","description":"Ship Lane Divert","length":4,"mandatory":false,"type":"A"},{"name":"TXID","description":"Text Identity","length":13,"mandatory":false,"type":"N"},{"name":"FD01","description":"Future Divert 1","length":20,"mandatory":false,"type":"A"},{"name":"FD02","description":"Future Divert 2","length":20,"mandatory":false,"type":"A"},{"name":"ZONE","description":"Zone","length":1,"mandatory":false,"type":"A"},{"name":"ZON2","description":"Zone 1","length":1,"mandatory":false,"type":"A"},{"name":"UD01","description":"User Defined 1","length":50,"mandatory":false,"type":"A"},{"name":"UD02","description":"User Defined 2","length":50,"mandatory":false,"type":"A"},{"name":"UD03","description":"User Defined 3","length":15,"mandatory":false,"type":"N"},{"name":"TEPA","description":"Packaging Terms","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"45a5e13b-e335-493c-8805-df1312473c41":{"uuid":"45a5e13b-e335-493c-8805-df1312473c41","updated":1707723344464,"updatedBy":"ABHISHEK","created":1687455866861,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"977F7548744CCB7662366F8AE3B3CA1454A1AF94B36B98528E28C7895FD1804E","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVE1USyB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDAwNE1JLkFkZEx1Y2FzRGF0YQogKiBEZXNjcmlwdGlvbjogQWRkaW5nIHJlY29yZHMgdG8gRVhUTVRLIHRhYmxlIAogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24KICoyMDIzMDYyMiAgU3VyaXlhTkBmb3J0dWRlLmNvICAgICBBZGRpbmcgcmVjb3JkcyB0byBFWFRNVEsgdGFibGUgCiAqMjAyNDAyMTIgIEFiaGlzaGVrQUBmb3J0dWRlLmNvICAgVXBkYXRpbmcgVmFsaWRhdGlvbiBsb2dpYwogKi8KCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcgoKcHVibGljIGNsYXNzIEFkZEx1Y2FzRGF0YSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCgogIHByaXZhdGUgU3RyaW5nIGlESVZJLCBpRkFDSSwgaVdITE8sIGlSQ0lELCBpTElDUCwgaU9STk8sIGlTVEFULCBpTE1GUywgaUxNRkQsIGlDVU5PLCBpTU9ETCwgaVRFUFksIGlURVBBLCBpV0dGRywgaVFBRkcsIGlTTUZHLCBpT05GTSwgaVBLRFYsIGlQU0RWLCBpUFREViwgaUxORFYsIGlGRDAxLCBpRkQwMiwgaVpPTkUsIGlaT04yLCBpVUQwMSwgaVVEMDIKICBwcml2YXRlIGludCBpQ09OTywgaVRUWVAsIGlCWE5PLCBpV0dUTywgaVRYSUQKICBwcml2YXRlIGxvbmcgaURMSVgKICBwcml2YXRlIERvdWJsZSBpRVNUVywgaUFDVFcsIGlVRDAzCiAgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQoKICBwdWJsaWMgQWRkTHVjYXNEYXRhKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlcikgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaURJVkkgPSAobWkuaW5EYXRhLmdldCgiRElWSSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElWSSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5ESVZJIDogbWkuaW5EYXRhLmdldCgiRElWSSIpCiAgICBpRkFDSSA9IChtaS5pbkRhdGEuZ2V0KCJGQUNJIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGQUNJIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZBQ0kiKQogICAgaVdITE8gPSAobWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJXSExPIikKICAgIGlSQ0lEID0gKG1pLmluRGF0YS5nZXQoIlJDSUQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlJDSUQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUkNJRCIpCiAgICBpTElDUCA9IChtaS5pbkRhdGEuZ2V0KCJMSUNQIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJMSUNQIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkxJQ1AiKQogICAgaU9STk8gPSAobWkuaW5EYXRhLmdldCgiT1JOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUk5PIikKICAgIGlTVEFUID0gKG1pLmluRGF0YS5nZXQoIlNUQVQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNUQVQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiU1RBVCIpCiAgICBpU1RBVCA9IChtaS5pbkRhdGEuZ2V0KCJTVEFUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJTVEFUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNUQVQiKQogICAgaUxNRlMgPSAobWkuaW5EYXRhLmdldCgiTE1GUyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTE1GUyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJMTUZTIikKICAgIGlMTUZEID0gKG1pLmluRGF0YS5nZXQoIkxNRkQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxNRkQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTE1GRCIpCiAgICBpQ1VOTyA9IChtaS5pbkRhdGEuZ2V0KCJDVU5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDVU5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNVTk8iKQogICAgaU1PREwgPSAobWkuaW5EYXRhLmdldCgiTU9ETCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTU9ETCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJNT0RMIikKICAgIGlURVBZID0gKG1pLmluRGF0YS5nZXQoIlRFUFkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRFUFkiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVEVQWSIpCiAgICBpVEVQQSA9IChtaS5pbkRhdGEuZ2V0KCJURVBBIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJURVBBIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRFUEEiKQogICAgaVdHRkcgPSAobWkuaW5EYXRhLmdldCgiV0dGRyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0dGRyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiV0dGRyIpCiAgICBpUUFGRyA9IChtaS5pbkRhdGEuZ2V0KCJRQUZHIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJRQUZHIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiMCIgOiBtaS5pbkRhdGEuZ2V0KCJRQUZHIikKICAgIGlTTUZHID0gKG1pLmluRGF0YS5nZXQoIlNNRkciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNNRkciKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlNNRkciKQogICAgaU9ORk0gPSAobWkuaW5EYXRhLmdldCgiT05GTSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT05GTSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiT05GTSIpCiAgICBpUEtEViA9IChtaS5pbkRhdGEuZ2V0KCJQS0RWIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQS0RWIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBLRFYiKQogICAgaVBTRFYgPSAobWkuaW5EYXRhLmdldCgiUFNEViIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUFNEViIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQU0RWIikKICAgIGlQVERWID0gKG1pLmluRGF0YS5nZXQoIlBURFYiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBURFYiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUFREViIpCiAgICBpTE5EViA9IChtaS5pbkRhdGEuZ2V0KCJMTkRWIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJMTkRWIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkxORFYiKQogICAgaUZEMDEgPSAobWkuaW5EYXRhLmdldCgiRkQwMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRkQwMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGRDAxIikKICAgIGlGRDAyID0gKG1pLmluRGF0YS5nZXQoIkZEMDIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkZEMDIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRkQwMiIpCiAgICBpWk9ORSA9IChtaS5pbkRhdGEuZ2V0KCJaT05FIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJaT05FIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiMCIgOiBtaS5pbkRhdGEuZ2V0KCJaT05FIikKICAgIGlaT04yID0gKG1pLmluRGF0YS5nZXQoIlpPTjIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlpPTjIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlpPTjIiKQogICAgaVVEMDEgPSAobWkuaW5EYXRhLmdldCgiVUQwMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVUQwMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVRDAxIikKICAgIGlVRDAyID0gKG1pLmluRGF0YS5nZXQoIlVEMDIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVEMDIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVUQwMiIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaVRUWVAgPSAobWkuaW5EYXRhLmdldCgiVFRZUCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVFRZUCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlRUWVAiKSBhcyBJbnRlZ2VyCiAgICBpRExJWCA9IChtaS5pbkRhdGEuZ2V0KCJETElYIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJETElYIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRExJWCIpIGFzIExvbmcKICAgIGlCWE5PID0gKG1pLmluRGF0YS5nZXQoIkJYTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkJYTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJCWE5PIikgYXMgSW50ZWdlcgogICAgaUVTVFcgPSAobWkuaW5EYXRhLmdldCgiRVNUVyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRVNUVyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkVTVFciKSBhcyBEb3VibGUKICAgIGlBQ1RXID0gKG1pLmluRGF0YS5nZXQoIkFDVFciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkFDVFciKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJBQ1RXIikgYXMgRG91YmxlCiAgICBpV0dUTyA9IChtaS5pbkRhdGEuZ2V0KCJXR1RPIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJXR1RPIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiV0dUTyIpIGFzIEludGVnZXIKICAgIGlUWElEID0gKG1pLmluRGF0YS5nZXQoIlRYSUQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRYSUQiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJUWElEIikgYXMgSW50ZWdlcgogICAgaVVEMDMgPSAobWkuaW5EYXRhLmdldCgiVUQwMyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVUQwMyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlVEMDMiKSBhcyBEb3VibGUKCiAgICB2YWxpZGF0ZUlucHV0KCkKICAgIGlmICh2YWxpZElucHV0KSB7CiAgICAgIGluc2VydFJlY29yZCgpCiAgICB9CiAgfQoKICBwdWJsaWMgdm9pZCB2YWxpZGF0ZUlucHV0KCkgewoKICAgIC8vVmFsaWRhdGUgQ29tcGFueSBOdW1iZXIKICAgIE1hcCA8IFN0cmluZywgU3RyaW5nID4gcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBDbG9zdXJlIDwgPyA+IGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBEaXZpc2lvbgogICAgaWYgKCFpRElWSS50b1N0cmluZygpLnRyaW0oKSkgewogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkRJVkkiOiBpRElWSS50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkRJVkkgPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGl2aXNpb24gIiArIGlESVZJKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzEwME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgaWYgKCFpQ1VOTy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgQ3VzdG9tZXIgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiQ1VOTyI6IGlDVU5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuQ1VOTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDdXN0b21lciBOdW1iZXIgIiArIGlDVU5PKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjEwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCiAgICAvL1ZhbGlkYXRlIE9yZGVyIE51bWJlcgogICAgcGFyYW1zID0gWyJPUk5PIjogaU9STk8udG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuT1JOTyA9PSBudWxsKSB7CiAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkdldE9yZGVySGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9JZiBub3QgQ08sIGNoZWNrIGlmIHZhbGlkIERPCiAgICBpZiAoIXZhbGlkSW5wdXQpIHsKICAgICAgdmFsaWRJbnB1dCA9IHRydWUKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJUUk5SIjogaU9STk8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5UUk5SID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE9yZGVyIE51bWJlciAiICsgaU9STk8pCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJNTVMxMDBNSSIsICJHZXRIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCiAgICBpZiAoIWlXSExPLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiV0hMTyI6IGlXSExPLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuV0hMTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBpV0hMTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAwNU1JIiwgIkdldFdhcmVob3VzZSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgaWYgKCFpRkFDSS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgRmFjaWxpdHkgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRkFDSSI6IGlGQUNJLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuRkFDSSA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBGYWNpbGl0eSBOdW1iZXIgIiArIGlGQUNJKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiQ1JTMDA4TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCiAgICAvL1ZhbGlkYXRlIERlbGl2ZXJ5IE51bWJlcgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJETElYIjogaURMSVgudG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuRExJWCA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGVsaXZlcnkgTnVtYmVyICIgKyBpRExJWCkKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTVdTNDEwTUkiLCAiR2V0SGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCgogIH0KCiAgLyoqCiAgICpJbnNlcnQgcmVjb3JkcyB0byBFWFRNVEsgdGFibGUKICAgKiBAcGFyYW1zCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIGluc2VydFJlY29yZCgpIHsKICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJFWFRNVEsiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBxdWVyeSA9IGFjdGlvbi5nZXRDb250YWluZXIoKQoKICAgIHF1ZXJ5LnNldCgiRVhESVZJIiwgaURJVkkpCiAgICBxdWVyeS5zZXQoIkVYRkFDSSIsIGlGQUNJKQogICAgcXVlcnkuc2V0KCJFWFdITE8iLCBpV0hMTykKICAgIHF1ZXJ5LnNldCgiRVhSQ0lEIiwgaVJDSUQpCiAgICBxdWVyeS5zZXQoIkVYTElDUCIsIGlMSUNQKQogICAgcXVlcnkuc2V0KCJFWE9STk8iLCBpT1JOTykKICAgIHF1ZXJ5LnNldCgiRVhTVEFUIiwgaVNUQVQpCiAgICBxdWVyeS5zZXQoIkVYU1RBVCIsIGlTVEFUKQogICAgcXVlcnkuc2V0KCJFWExNRlMiLCBpTE1GUykKICAgIHF1ZXJ5LnNldCgiRVhMTUZEIiwgaUxNRkQpCiAgICBxdWVyeS5zZXQoIkVYQ1VOTyIsIGlDVU5PKQogICAgcXVlcnkuc2V0KCJFWE1PREwiLCBpTU9ETCkKICAgIHF1ZXJ5LnNldCgiRVhURVBZIiwgaVRFUFkpCiAgICBxdWVyeS5zZXQoIkVYVEVQQSIsIGlURVBBKQogICAgcXVlcnkuc2V0KCJFWFdHRkciLCBpV0dGRykKICAgIHF1ZXJ5LnNldCgiRVhRQUZHIiwgaVFBRkcpCiAgICBxdWVyeS5zZXQoIkVYU01GRyIsIGlTTUZHKQogICAgcXVlcnkuc2V0KCJFWE9ORk0iLCBpT05GTSkKICAgIHF1ZXJ5LnNldCgiRVhQS0RWIiwgaVBLRFYpCiAgICBxdWVyeS5zZXQoIkVYUFNEViIsIGlQU0RWKQogICAgcXVlcnkuc2V0KCJFWFBURFYiLCBpUFREVikKICAgIHF1ZXJ5LnNldCgiRVhMTkRWIiwgaUxORFYpCiAgICBxdWVyeS5zZXQoIkVYRkQwMSIsIGlGRDAxKQogICAgcXVlcnkuc2V0KCJFWEZEMDIiLCBpRkQwMikKICAgIHF1ZXJ5LnNldCgiRVhaT05FIiwgaVpPTkUpCiAgICBxdWVyeS5zZXQoIkVYWk9OMiIsIGlaT04yKQogICAgcXVlcnkuc2V0KCJFWFVEMDEiLCBpVUQwMSkKICAgIHF1ZXJ5LnNldCgiRVhVRDAyIiwgaVVEMDIpCiAgICBxdWVyeS5zZXQoIkVYQ09OTyIsIGlDT05PIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYVFRZUCIsIGlUVFlQIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYRExJWCIsIGlETElYIGFzIExvbmcpCiAgICBxdWVyeS5zZXQoIkVYQlhOTyIsIGlCWE5PIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYRVNUVyIsIGlFU1RXIGFzIERvdWJsZSkKICAgIHF1ZXJ5LnNldCgiRVhBQ1RXIiwgaUFDVFcgYXMgRG91YmxlKQogICAgcXVlcnkuc2V0KCJFWFdHVE8iLCBpV0dUTyBhcyBJbnRlZ2VyKQogICAgcXVlcnkuc2V0KCJFWFRYSUQiLCBpVFhJRCBhcyBJbnRlZ2VyKQogICAgcXVlcnkuc2V0KCJFWFVEMDMiLCBpVUQwMyBhcyBEb3VibGUpCiAgICBxdWVyeS5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYUkdUTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWExNRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhDSE5PIiwgMCkKICAgIHF1ZXJ5LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpCiAgICBhY3Rpb24uaW5zZXJ0KHF1ZXJ5LCByZWNvcmRFeGlzdHMpCiAgfQoKICBDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsKICAgIG1pLmVycm9yKCJSZWNvcmQgQWxyZWFkeSBFeGlzdHMiKQogICAgcmV0dXJuCiAgfQp9"}}}