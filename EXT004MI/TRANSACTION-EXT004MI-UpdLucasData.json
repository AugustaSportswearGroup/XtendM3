{"programModules":{"EXT004MI":{"program":"EXT004MI","triggers":{},"transactions":{"UpdLucasData":{"sourceUuid":"45a5e13b-e335-493c-8806-df1312473c41","name":"UpdLucasData","program":"EXT004MI","description":"Update Lucas Data","active":true,"multi":false,"modified":1707727956794,"modifiedBy":"ABHISHEK","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"FACI","description":"Facility Number","length":3,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":true,"type":"A"},{"name":"RCID","description":"Route Carton ID","length":20,"mandatory":false,"type":"A"},{"name":"LICP","description":"License Plate","length":20,"mandatory":false,"type":"A"},{"name":"TTYP","description":"Stock Transaction Type","length":2,"mandatory":false,"type":"N"},{"name":"ORNO","description":"Order Number","length":10,"mandatory":true,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"},{"name":"BXNO","description":"Box Number","length":4,"mandatory":false,"type":"N"},{"name":"STAT","description":"Status","length":2,"mandatory":false,"type":"A"},{"name":"LMFS","description":"Last Message Sort","length":4,"mandatory":false,"type":"A"},{"name":"LMFD","description":"Last Msg Divert","length":4,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Bill to Customer","length":10,"mandatory":false,"type":"A"},{"name":"MODL","description":"Delivery Method","length":3,"mandatory":false,"type":"A"},{"name":"TEPY","description":"Payment Terms","length":3,"mandatory":false,"type":"A"},{"name":"ESTW","description":"Estimated Weight","length":9,"mandatory":false,"type":"N"},{"name":"ACTW","description":"Actual Weight","length":9,"mandatory":false,"type":"N"},{"name":"WGTO","description":"Weight Tolerance","length":3,"mandatory":false,"type":"N"},{"name":"WGFG","description":"Weight Flag","length":1,"mandatory":false,"type":"A"},{"name":"QAFG","description":"QA Flag","length":1,"mandatory":false,"type":"A"},{"name":"SMFG","description":"Sample Flag","length":1,"mandatory":false,"type":"A"},{"name":"ONFM","description":"Confirmed","length":1,"mandatory":false,"type":"A"},{"name":"PKDV","description":"Pick Divert","length":300,"mandatory":false,"type":"A"},{"name":"PSDV","description":"Prescale Divert","length":50,"mandatory":false,"type":"A"},{"name":"PTDV","description":"Postscale Divert","length":50,"mandatory":false,"type":"A"},{"name":"LNDV","description":"Ship Lane Divert","length":4,"mandatory":false,"type":"A"},{"name":"TXID","description":"Text Identity","length":13,"mandatory":false,"type":"N"},{"name":"FD01","description":"Future Divert 1","length":20,"mandatory":false,"type":"A"},{"name":"FD02","description":"Future Divert 2","length":20,"mandatory":false,"type":"A"},{"name":"ZONE","description":"Zone","length":1,"mandatory":false,"type":"A"},{"name":"ZON2","description":"Zone 1","length":1,"mandatory":false,"type":"A"},{"name":"UD01","description":"User Defined 1","length":50,"mandatory":false,"type":"A"},{"name":"UD02","description":"User Defined 2","length":50,"mandatory":false,"type":"A"},{"name":"UD03","description":"User Defined 3","length":15,"mandatory":false,"type":"N"},{"name":"TEPA","description":"Packaging Terms","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"45a5e13b-e335-493c-8806-df1312473c41":{"uuid":"45a5e13b-e335-493c-8806-df1312473c41","updated":1707728076377,"updatedBy":"ABHISHEK","created":1687456222418,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"BA495C47F390AC9A9E2BCF51829B4827232FE64DA046012498F9999D93ECD643","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVE1LVCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDAwNE1JLlVwZEx1Y2FzRGF0YQogKiBEZXNjcmlwdGlvbjogVXBkYXRpbmcgcmVjb3JkcyB0byBFWFRNS1QgdGFibGUKICogRGF0ZSAgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uCiAqMjAyMzA2MjIgIFN1cml5YU5AZm9ydHVkZS5jbyAgICBVcGRhdGluZyByZWNvcmRzIHRvIEVYVE1LVCB0YWJsZQogKjIwMjQwMjEyICBBYmhpc2hla0FAZm9ydHVkZS5jbyAgVXBkYXRpbmcgVmFsaWRhdGlvbiBsb2dpYwogKi8KCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcgoKcHVibGljIGNsYXNzIFVwZEx1Y2FzRGF0YSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCgogIHByaXZhdGUgU3RyaW5nIGlESVZJLCBpRkFDSSwgaVdITE8sIGlSQ0lELCBpTElDUCwgaU9STk8sIGlTVEFULCBpTE1GUywgaUxNRkQsIGlDVU5PLCBpTU9ETCwgaVRFUFksIGlURVBBLCBpV0dGRywgaVFBRkcsIGlTTUZHLCBpT05GTSwgaVBLRFYsIGlQU0RWLCBpUFREViwgaUxORFYsIGlGRDAxLCBpRkQwMiwgaVpPTkUsIGlaT04yLCBpVUQwMSwgaVVEMDIKICBwcml2YXRlIGludCBpQ09OTywgaVRUWVAsIGlCWE5PLCBpV0dUTywgaVRYSUQsIGlVRDAzCiAgcHJpdmF0ZSBsb25nIGlETElYCiAgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQogIHByaXZhdGUgRG91YmxlIGlFU1RXLCBpQUNUVwoKICBwdWJsaWMgVXBkTHVjYXNEYXRhKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlcikgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaURJVkkgPSAobWkuaW5EYXRhLmdldCgiRElWSSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElWSSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5ESVZJIDogbWkuaW5EYXRhLmdldCgiRElWSSIpCiAgICBpRkFDSSA9IChtaS5pbkRhdGEuZ2V0KCJGQUNJIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGQUNJIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZBQ0kiKQogICAgaVdITE8gPSAobWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJXSExPIikKICAgIGlSQ0lEID0gKG1pLmluRGF0YS5nZXQoIlJDSUQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlJDSUQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUkNJRCIpCiAgICBpTElDUCA9IChtaS5pbkRhdGEuZ2V0KCJMSUNQIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJMSUNQIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkxJQ1AiKQogICAgaU9STk8gPSAobWkuaW5EYXRhLmdldCgiT1JOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUk5PIikKICAgIGlTVEFUID0gKG1pLmluRGF0YS5nZXQoIlNUQVQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNUQVQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiU1RBVCIpCiAgICBpTE1GUyA9IChtaS5pbkRhdGEuZ2V0KCJMTUZTIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJMTUZTIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkxNRlMiKQogICAgaUxNRkQgPSAobWkuaW5EYXRhLmdldCgiTE1GRCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTE1GRCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJMTUZEIikKICAgIGlDVU5PID0gKG1pLmluRGF0YS5nZXQoIkNVTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VOTyIpCiAgICBpTU9ETCA9IChtaS5pbkRhdGEuZ2V0KCJNT0RMIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJNT0RMIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk1PREwiKQogICAgaVRFUFkgPSAobWkuaW5EYXRhLmdldCgiVEVQWSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVEVQWSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJURVBZIikKICAgIGlURVBBID0gKG1pLmluRGF0YS5nZXQoIlRFUEEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlRFUEEiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVEVQQSIpCiAgICBpV0dGRyA9IChtaS5pbkRhdGEuZ2V0KCJXR0ZHIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJXR0ZHIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiMCIgOiBtaS5pbkRhdGEuZ2V0KCJXR0ZHIikKICAgIGlRQUZHID0gKG1pLmluRGF0YS5nZXQoIlFBRkciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlFBRkciKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlFBRkciKQogICAgaVNNRkcgPSAobWkuaW5EYXRhLmdldCgiU01GRyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU01GRyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiU01GRyIpCiAgICBpT05GTSA9IChtaS5pbkRhdGEuZ2V0KCJPTkZNIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPTkZNIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiMCIgOiBtaS5pbkRhdGEuZ2V0KCJPTkZNIikKICAgIGlQS0RWID0gKG1pLmluRGF0YS5nZXQoIlBLRFYiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBLRFYiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUEtEViIpCiAgICBpUFNEViA9IChtaS5pbkRhdGEuZ2V0KCJQU0RWIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQU0RWIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBTRFYiKQogICAgaVBURFYgPSAobWkuaW5EYXRhLmdldCgiUFREViIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUFREViIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQVERWIikKICAgIGlMTkRWID0gKG1pLmluRGF0YS5nZXQoIkxORFYiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxORFYiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTE5EViIpCiAgICBpRkQwMSA9IChtaS5pbkRhdGEuZ2V0KCJGRDAxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJGRDAxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkZEMDEiKQogICAgaUZEMDIgPSAobWkuaW5EYXRhLmdldCgiRkQwMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRkQwMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGRDAyIikKICAgIGlaT05FID0gKG1pLmluRGF0YS5nZXQoIlpPTkUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlpPTkUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlpPTkUiKQogICAgaVpPTjIgPSAobWkuaW5EYXRhLmdldCgiWk9OMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiWk9OMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiWk9OMiIpCiAgICBpVUQwMSA9IChtaS5pbkRhdGEuZ2V0KCJVRDAxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVRDAxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVEMDEiKQogICAgaVVEMDIgPSAobWkuaW5EYXRhLmdldCgiVUQwMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVUQwMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVRDAyIikKCiAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyBwcm9ncmFtLkxEQVpELkNPTk8gYXMgSW50ZWdlciA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKSBhcyBJbnRlZ2VyCiAgICBpVFRZUCA9IChtaS5pbkRhdGEuZ2V0KCJUVFlQIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJUVFlQIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiVFRZUCIpIGFzIEludGVnZXIKICAgIGlETElYID0gKG1pLmluRGF0YS5nZXQoIkRMSVgiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRMSVgiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJETElYIikgYXMgTG9uZwogICAgaUJYTk8gPSAobWkuaW5EYXRhLmdldCgiQlhOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQlhOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkJYTk8iKSBhcyBJbnRlZ2VyCiAgICBpRVNUVyA9IChtaS5pbkRhdGEuZ2V0KCJFU1RXIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJFU1RXIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRVNUVyIpIGFzIERvdWJsZQogICAgaUFDVFcgPSAobWkuaW5EYXRhLmdldCgiQUNUVyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQUNUVyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkFDVFciKSBhcyBEb3VibGUKICAgIGlXR1RPID0gKG1pLmluRGF0YS5nZXQoIldHVE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldHVE8iKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJXR1RPIikgYXMgSW50ZWdlcgogICAgaVRYSUQgPSAobWkuaW5EYXRhLmdldCgiVFhJRCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVFhJRCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlRYSUQiKSBhcyBJbnRlZ2VyCiAgICBpVUQwMyA9IChtaS5pbkRhdGEuZ2V0KCJVRDAzIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVRDAzIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiVUQwMyIpIGFzIEludGVnZXIKCiAgICB2YWxpZGF0ZUlucHV0KCkKICAgIGlmICh2YWxpZElucHV0KSB7CiAgICAgIHVwZGF0ZVJlY29yZCgpCiAgICB9CgogIH0KCiAgcHVibGljIHZvaWQgdmFsaWRhdGVJbnB1dCgpIHsKCiAgICAvL1ZhbGlkYXRlIENvbXBhbnkgTnVtYmVyCiAgICBNYXAgPCBTdHJpbmcsIFN0cmluZyA+IHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgQ2xvc3VyZSA8ID8gPiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuQ09OTyA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcGFueSBOdW1iZXIgIiArIGlDT05PKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybgogICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJNTlMwOTVNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIC8vVmFsaWRhdGUgRGl2aXNpb24KICAgIGlmICghaURJVkkudG9TdHJpbmcoKS50cmltKCkpIHsKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJESVZJIjogaURJVkkudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5ESVZJID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIERpdmlzaW9uICIgKyBpRElWSSkKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CgogICAgICBtaUNhbGxlci5jYWxsKCJNTlMxMDBNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmICghaUNVTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIEN1c3RvbWVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkNVTk8iOiBpQ1VOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkNVTk8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ3VzdG9tZXIgTnVtYmVyICIgKyBpQ1VOTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYxME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgaWYgKCFpT1JOTy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgT3JkZXIgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiT1JOTyI6IGlPUk5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuT1JOTyA9PSBudWxsKSB7CiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiT0lTMTAwTUkiLCAiR2V0T3JkZXJIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgICAgLy9JZiBub3QgQ08sIGNoZWNrIGlmIHZhbGlkIERPCiAgICAgIGlmICghdmFsaWRJbnB1dCkgewogICAgICAgIHZhbGlkSW5wdXQgPSB0cnVlCiAgICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJUUk5SIjogaU9STk8udG9TdHJpbmcoKS50cmltKCldCiAgICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgaWYgKHJlc3BvbnNlLlRSTlIgPT0gbnVsbCkgewogICAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBPcmRlciBOdW1iZXIgIiArIGlPUk5PKQogICAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzEwME1JIiwgIkdldEhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgICB9CiAgICB9CgogICAgaWYgKCFpV0hMTy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgV2FyZWhvdXNlIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIldITE8iOiBpV0hMTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLldITE8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgV2FyZWhvdXNlIE51bWJlciAiICsgaVdITE8pCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJNTVMwMDVNSSIsICJHZXRXYXJlaG91c2UiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmICghaUZBQ0kudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIEZhY2lsaXR5IE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkZBQ0kiOiBpRkFDSS50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkZBQ0kgPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRmFjaWxpdHkgTnVtYmVyICIgKyBpRkFDSSkKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzAwOE1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgaWYgKGlETElYICE9IDApIHsKICAgICAgLy9WYWxpZGF0ZSBEZWxpdmVyeSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJETElYIjogaURMSVgudG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5ETElYID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIERlbGl2ZXJ5IE51bWJlciAiICsgaURMSVgpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJNV1M0MTBNSSIsICJHZXRIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KICB9CgogIC8qKgogICAqVXBkYXRlIHJlY29yZHMgdG8gRVhUTUtUIHRhYmxlCiAgICogQHBhcmFtcyAKICAgKiBAcmV0dXJuIAogICAqLwogIHB1YmxpYyB2b2lkIHVwZGF0ZVJlY29yZCgpIHsKICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVE1USyIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCgogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJFWERJVkkiLCBpRElWSSkKICAgIGNvbnRhaW5lci5zZXQoIkVYV0hMTyIsIGlXSExPKQogICAgY29udGFpbmVyLnNldCgiRVhSQ0lEIiwgaVJDSUQpCiAgICBjb250YWluZXIuc2V0KCJFWExJQ1AiLCBpTElDUCkKICAgIGNvbnRhaW5lci5zZXQoIkVYVFRZUCIsIGlUVFlQKQogICAgY29udGFpbmVyLnNldCgiRVhPUk5PIiwgaU9STk8pCiAgICBjb250YWluZXIuc2V0KCJFWERMSVgiLCBpRExJWCkKICAgIGlmICghcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykpIHsKICAgICAgbWkuZXJyb3IoIlJlY29yZCBkb2VzIG5vdCBFeGlzdC4iKQogICAgICByZXR1cm4KICAgIH0KICB9CgogIENsb3N1cmUgPCA/ID4gdXBkYXRlQ2FsbEJhY2sgPSB7CiAgICBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+CiAgICBpbnQgQ0hOTyA9IGxvY2tlZFJlc3VsdC5nZXQoIkVYQ0hOTyIpCiAgICBpZiAoIWlGQUNJLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgaWYgKGlGQUNJLnRyaW0oKS5lcXVhbHMoIj8iKSkgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRkFDSSIsICIiKQogICAgICB9IGVsc2UgewogICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRkFDSSIsIGlGQUNJKQogICAgICB9CiAgICB9CgogICAgaWYgKCFpU1RBVC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpU1RBVC50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNUQVQiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNUQVQiLCBpU1RBVCkKICAgICAgfQogICAgfQogICAgaWYgKCFpTE1GUy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTE1GUy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRlMiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRlMiLCBpTE1GUykKICAgICAgfQogICAgfQogICAgaWYgKCFpTE1GRC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTE1GRC50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRkQiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRkQiLCBpTE1GRCkKICAgICAgfQogICAgfQogICAgaWYgKCFpQ1VOTy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpQ1VOTy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENVTk8iLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENVTk8iLCBpQ1VOTykKICAgICAgfQogICAgfQogICAgaWYgKCFpTU9ETC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTU9ETC50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE1PREwiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE1PREwiLCBpTU9ETCkKICAgICAgfQogICAgfQogICAgaWYgKCFpVEVQWS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVEVQWS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUFkiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUFkiLCBpVEVQWSkKICAgICAgfQogICAgfQogICAgaWYgKCFpVEVQQS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVEVQQS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUEEiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFRFUEEiLCBpVEVQQSkKICAgICAgfQogICAgfQogICAgaWYgKCFpV0dGRy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpV0dGRy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFdHRkciLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFdHRkciLCBpV0dGRykKICAgICAgfQogICAgfQogICAgaWYgKCFpUUFGRy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUUFGRy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFFBRkciLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFFBRkciLCBpUUFGRykKICAgICAgfQogICAgfQogICAgaWYgKCFpU01GRy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpU01GRy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNNRkciLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFNNRkciLCBpU01GRykKICAgICAgfQogICAgfQogICAgaWYgKCFpT05GTS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpT05GTS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE9ORk0iLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE9ORk0iLCBpT05GTSkKICAgICAgfQogICAgfQogICAgaWYgKCFpUEtEVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUEtEVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBLRFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBLRFYiLCBpUEtEVikKICAgICAgfQogICAgfQogICAgaWYgKCFpUFNEVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUFNEVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBTRFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBTRFYiLCBpUFNEVikKICAgICAgfQogICAgfQogICAgaWYgKCFpUFREVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpUFREVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBURFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFBURFYiLCBpUFREVikKICAgICAgfQogICAgfQogICAgaWYgKCFpTE5EVi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpTE5EVi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExORFYiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExORFYiLCBpTE5EVikKICAgICAgfQogICAgfQogICAgaWYgKCFpRkQwMS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpRkQwMS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDEiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDEiLCBpRkQwMSkKICAgICAgfQogICAgfQogICAgaWYgKCFpRkQwMi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpRkQwMi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDIiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEZEMDIiLCBpRkQwMikKICAgICAgfQogICAgfQogICAgaWYgKCFpWk9ORS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpWk9ORS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTkUiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTkUiLCBpWk9ORSkKICAgICAgfQogICAgfQogICAgaWYgKCFpWk9OMi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpWk9OMi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTjIiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFpPTjIiLCBpWk9OMikKICAgICAgfQogICAgfQogICAgaWYgKCFpVUQwMS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVUQwMS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDEiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDEiLCBpVUQwMSkKICAgICAgfQogICAgfQogICAgaWYgKCFpVUQwMi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVUQwMi50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDIiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVEMDIiLCBpVUQwMikKICAgICAgfQogICAgfQogICAgaWYgKG1pLmluRGF0YS5nZXQoIkJYTk8iKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJCWE5PIikudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEJYTk8iLCBpQlhOTyBhcyBJbnRlZ2VyKQogICAgfQogICAgaWYgKG1pLmluRGF0YS5nZXQoIkVTVFciKSAhPSBudWxsICYmICFtaS5pbkRhdGEuZ2V0KCJFU1RXIikudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWEVTVFciLCBpRVNUVyBhcyBEb3VibGUpCiAgICB9CiAgICBpZiAobWkuaW5EYXRhLmdldCgiQUNUVyIpICE9IG51bGwgJiYgIW1pLmluRGF0YS5nZXQoIkFDVFciKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQUNUVyIsIGlBQ1RXIGFzIERvdWJsZSkKICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJXR1RPIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiV0dUTyIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhXR1RPIiwgaVdHVE8gYXMgSW50ZWdlcikKICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJUWElEIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiVFhJRCIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhUWElEIiwgaVRYSUQgYXMgSW50ZWdlcikKICAgIH0KICAgIGlmIChtaS5pbkRhdGEuZ2V0KCJVRDAzIikgIT0gbnVsbCAmJiAhbWkuaW5EYXRhLmdldCgiVUQwMyIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhVRDAzIiwgaVVEMDMgYXMgSW50ZWdlcikKICAgIH0KICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hOTyIsIENITk8gKyAxKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpCiAgICBsb2NrZWRSZXN1bHQudXBkYXRlKCkKICB9Cn0="}}}