{"programModules":{"EXT201MI":{"program":"EXT201MI","triggers":{},"transactions":{"UpdATPQuantity":{"sourceUuid":"bf7349a9-07c4-4b8f-bf94-a97055762fe3","name":"UpdATPQuantity","program":"EXT201MI","description":"Update ATP Quantity Data","active":true,"multi":false,"modified":1684180629046,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":true,"type":"A"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"VAL9","description":"ATP Quantity","length":15,"mandatory":false,"type":"N"},{"name":"UPDS","description":"Update Flag","length":1,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"bf7349a9-07c4-4b8f-bf94-a97055762fe3":{"uuid":"bf7349a9-07c4-4b8f-bf94-a97055762fe3","updated":1701768333649,"updatedBy":"M3CONSADMX","created":1680866857258,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20230918173517.9","language":"GROOVY","codeHash":"016E15C4D26561A593EBBBD6732BA31A5E884C4E7A4F2AAC7F454724719B08D1","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVFBRVCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDIwMU1JLlVwZEFUUFF1YW50aXR5CiAqIERlc2NyaXB0aW9uOiBVcGRhdGluZyByZWNvcmRzIHRvIEVYVFBRVCB0YWJsZQogKiBEYXRlCSAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24KICoyMDIzMDQwNyAgU3VyaXlhTkBmb3J0dWRlLmNvICAgIFVwZGF0aW5nIHJlY29yZHMgdG8gRVhUUFFUIHRhYmxlCiAqCiAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgVXBkQVRQUXVhbnRpdHkgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgoKICBwcml2YXRlIFN0cmluZyBpV0hMTywgaUlUTk8sIGlVUERTCgogIHByaXZhdGUgaW50IGlDT05PCiAgcHJpdmF0ZSBkb3VibGUgaVZBTDkKICBwcml2YXRlIGJvb2xlYW4gdmFsaWRJbnB1dCA9IHRydWUKICAKICBwdWJsaWMgVXBkQVRQUXVhbnRpdHkoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBQcm9ncmFtQVBJIHByb2dyYW0sIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7CiAgICB0aGlzLm1pID0gbWkKICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyCiAgfQogIC8qKgogICAqKiBNYWluIGZ1bmN0aW9uCiAgICogQHBhcmFtCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIG1haW4oKSB7CiAgICBpV0hMTyA9IChtaS5pbkRhdGEuZ2V0KCJXSExPIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJXSExPIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIldITE8iKQogICAgaUlUTk8gPSAobWkuaW5EYXRhLmdldCgiSVROTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiSVROTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVE5PIikKICAgIGlVUERTID0gKG1pLmluRGF0YS5nZXQoIlVQRFMiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVQRFMiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIwIiA6IG1pLmluRGF0YS5nZXQoIlVQRFMiKQoKICAgIGlDT05PID0gKG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/IHByb2dyYW0uTERBWkQuQ09OTyBhcyBJbnRlZ2VyIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXIKICAgIGlWQUw5ID0gKG1pLmluRGF0YS5nZXQoIlZBTDkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlZBTDkiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJWQUw5IikgYXMgRG91YmxlCiAgICAKICAgIHZhbGlkYXRlSW5wdXQoKQogICAgaWYgKHZhbGlkSW5wdXQpIHsKICAgIHVwZGF0ZVJlY29yZCgpCiAgICB9CiAgfQogIAogICAgIC8qKgogICAqVmFsaWRhdGUgcmVjb3JkcyAKICAgKiBAcGFyYW1zIAogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIHZhbGlkYXRlSW5wdXQoKSB7CiAgICAvL1ZhbGlkYXRlIENvbXBhbnkgTnVtYmVyCiAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgQ2xvc3VyZTw/PiAgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBpQ09OTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICAvL1ZhbGlkYXRlIEl0ZW0gTnVtYmVyCiAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiSVROTyI6aUlUTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLklUTk8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgSXRlbSBOdW1iZXIgIiArIGlJVE5PKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICB9CiAgICAKICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIwME1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCiAgICAKICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIldITE8iOmlXSExPLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgaWYgKHJlc3BvbnNlLldITE8gPT0gbnVsbCkgewogICAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBXYXJlaG91c2UgTnVtYmVyICIgKyBpV0hMTykKICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAwNU1JIiwgIkdldFdhcmVob3VzZSIsIHBhcmFtcywgY2FsbGJhY2spCiAgfQogIC8qKgogICAqVXBkYXRlIHJlY29yZHMgdG8gRVhUUFFUIHRhYmxlCiAgICogQHBhcmFtcyAKICAgKiBAcmV0dXJuIAogICAqLwogIHB1YmxpYyB1cGRhdGVSZWNvcmQoKSB7CiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRQUVQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQoKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhXSExPIiwgaVdITE8pCiAgICBjb250YWluZXIuc2V0KCJFWElUTk8iLCBpSVROTykKICAgIGlmICghcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykpIHsKICAgICAgbWkuZXJyb3IoIlJlY29yZCBkb2VzIG5vdCBFeGlzdC4iKQogICAgICByZXR1cm4KICAgIH0KICB9CgogIENsb3N1cmUgPCA/ID4gdXBkYXRlQ2FsbEJhY2sgPSB7CiAgICBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+CiAgICBpbnQgQ0hOTyA9IGxvY2tlZFJlc3VsdC5nZXQoIkVYQ0hOTyIpCiAgICAKICAgIGlmICghaVVQRFMudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBpZiAoaVVQRFMudHJpbSgpLmVxdWFscygiPyIpKSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhVUERTIiwgIiIpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhVUERTIiwgaVVQRFMpCiAgICAgIH0KICAgIH0KICAgIAogICAgaWYgKG1pLmluRGF0YS5nZXQoIlZBTDkiKSE9bnVsbCYmIW1pLmluRGF0YS5nZXQoIlZBTDkiKS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYVkFMOSIsIGlWQUw5KQogICAgICAgIH0KICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hOTyIsIENITk8rMSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgfQp9"}}}