{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"AddPlayerLine":{"sourceUuid":"aa8eeeae-a980-4684-90f1-5316a6f33c09","name":"AddPlayerLine","program":"EXT001MI","description":"Add Player Line Details","active":true,"multi":false,"modified":1682017241820,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company ","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"PLID","description":"Player ID","length":15,"mandatory":true,"type":"A"},{"name":"ORNR","description":"Temporary Order Number","length":10,"mandatory":true,"type":"A"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"ORNO","description":"Customer Order Number","length":10,"mandatory":false,"type":"A"},{"name":"PONR","description":"Order Line Number","length":5,"mandatory":true,"type":"N"},{"name":"POSX","description":"Line Suffix","length":2,"mandatory":false,"type":"N"},{"name":"KLOC","description":"Kit Location","length":10,"mandatory":false,"type":"A"},{"name":"ORQT","description":"Order Quantity","length":16,"mandatory":false,"type":"N"},{"name":"SNUM","description":"S Number","length":30,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":false,"type":"N"},{"name":"RORN","description":"Reference Order Number","length":10,"mandatory":false,"type":"A"},{"name":"RORL","description":"Reference Order Line","length":6,"mandatory":false,"type":"N"},{"name":"RORX","description":"Line Suffix","length":3,"mandatory":false,"type":"N"},{"name":"UDF1","description":"User-defined field 1","length":5,"mandatory":false,"type":"A"},{"name":"UDF2","description":"User-defined field 2","length":5,"mandatory":false,"type":"A"},{"name":"UDF3","description":"User-defined field 3","length":10,"mandatory":false,"type":"A"},{"name":"UDF4","description":"User-defined field 4","length":15,"mandatory":false,"type":"A"},{"name":"UDF5","description":"User-defined field 5","length":20,"mandatory":false,"type":"A"},{"name":"UDF6","description":"User-defined field 6","length":30,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"aa8eeeae-a980-4684-90f1-5316a6f33c09":{"uuid":"aa8eeeae-a980-4684-90f1-5316a6f33c09","updated":1683626420542,"updatedBy":"M3CONSADMX","created":1680543841185,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20230216180900.6","language":"GROOVY","codeHash":"4962A3850196E5AB671F70F2B591BB20D22701161BA837613172E42574A7F4DA","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVFNUTCB0YWJsZS4KICoKICogTmFtZTogRVhUMDAxTUkuQWRkUGxheWVyTGluZQogKiBEZXNjcmlwdGlvbjogQWRkaW5nIHJlY29yZHMgdG8gRVhUU1RMIHRhYmxlCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwNDAzICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIEFkZGluZyByZWNvcmRzIHRvIEVYVFNUTCB0YWJsZSAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgQWRkUGxheWVyTGluZSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCgogIHByaXZhdGUgU3RyaW5nIGlESVZJLCBpUExJRCwgaUtMT0MsIGlPUk5PLCBpSVROTywgaVNOVU0sIGlXSExPLCBpUk9STiwgaVVERjEsIGlVREYyLCBpVURGMywgaVVERjQsIGlVREY1LCBpVURGNiwgaU9STlIsIGtsb2NWYWx1ZSA9ICIiCiAgcHJpdmF0ZSBpbnQgaUNPTk8saVBPTlIsaVBPU1gsaVJPUkwsaVJPUlgsaW50ZXJ2YWwgPSAwCiAgcHJpdmF0ZSBkb3VibGUgaU9SUVQKICBwcml2YXRlIGJvb2xlYW4gdmFsaWRJbnB1dCA9IHRydWUKICBwcml2YXRlIGxvbmcgaURMSVgKCgogIHB1YmxpYyBBZGRQbGF5ZXJMaW5lKE1JQVBJIG1pLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgUHJvZ3JhbUFQSSBwcm9ncmFtLE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7CiAgICB0aGlzLm1pID0gbWkKICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyCiAgfQogIC8qKgogICAqKiBNYWluIGZ1bmN0aW9uCiAgICogQHBhcmFtCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIG1haW4oKSB7CiAgICBpRElWSSA9IChtaS5pbkRhdGEuZ2V0KCJESVZJIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJESVZJIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkRJVkkiKQogICAgaVBMSUQgPSAobWkuaW5EYXRhLmdldCgiUExJRCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUExJRCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQTElEIikKICAgIGlLTE9DID0gKG1pLmluRGF0YS5nZXQoIktMT0MiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIktMT0MiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiS0xPQyIpCiAgICBpT1JOUiA9IChtaS5pbkRhdGEuZ2V0KCJPUk5SIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5SIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STlIiKQogICAgaU9STk8gPSAobWkuaW5EYXRhLmdldCgiT1JOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUk5PIikKICAgIGlQT05SID0gKG1pLmluRGF0YS5nZXQoIlBPTlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBPTlIiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJQT05SIikgYXMgSW50ZWdlcgogICAgaVBPU1ggPSAobWkuaW5EYXRhLmdldCgiUE9TWCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUE9TWCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlBPU1giKSBhcyBJbnRlZ2VyCiAgICBpSVROTyA9IChtaS5pbkRhdGEuZ2V0KCJJVE5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJJVE5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIklUTk8iKQogICAgaU9SUVQgPSAobWkuaW5EYXRhLmdldCgiT1JRVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JRVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk9SUVQiKSBhcyBkb3VibGUKICAgIGlTTlVNID0gKG1pLmluRGF0YS5nZXQoIlNOVU0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlNOVU0iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiU05VTSIpCiAgICBpV0hMTyA9IChtaS5pbkRhdGEuZ2V0KCJXSExPIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJXSExPIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIldITE8iKQogICAgaURMSVggPSAobWkuaW5EYXRhLmdldCgiRExJWCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRExJWCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIkRMSVgiKSBhcyBMb25nCiAgICBpUk9STiA9IChtaS5pbkRhdGEuZ2V0KCJST1JOIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJST1JOIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlJPUk4iKQogICAgaVJPUkwgPSAobWkuaW5EYXRhLmdldCgiUk9STCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUk9STCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlJPUkwiKSBhcyBJbnRlZ2VyCiAgICBpUk9SWCA9IChtaS5pbkRhdGEuZ2V0KCJST1JYIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJST1JYIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiUk9SWCIpIGFzIEludGVnZXIKICAgIGlVREYxID0gKG1pLmluRGF0YS5nZXQoIlVERjEiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjEiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGMSIpCiAgICBpVURGMiA9IChtaS5pbkRhdGEuZ2V0KCJVREYyIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREYyIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjIiKQogICAgaVVERjMgPSAobWkuaW5EYXRhLmdldCgiVURGMyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGMyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREYzIikKICAgIGlVREY0ID0gKG1pLmluRGF0YS5nZXQoIlVERjQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGNCIpCiAgICBpVURGNSA9IChtaS5pbkRhdGEuZ2V0KCJVREY1IikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREY1IikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjUiKQogICAgaVVERjYgPSAobWkuaW5EYXRhLmdldCgiVURGNiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGNiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREY2IikKCiAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyBwcm9ncmFtLkxEQVpELkNPTk8gYXMgSW50ZWdlciA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKSBhcyBJbnRlZ2VyCiAgICB2YWxpZGF0ZUlucHV0KCkKICAgIGlmIChpS0xPQy50cmltKCkuaXNFbXB0eSgpJiZ2YWxpZElucHV0KSB7CiAgICAgIGdldExvY2F0aW9uKCkKICAgIH0KICAgIGlmKHZhbGlkSW5wdXQpIHsKICAgICAgaW5zZXJ0UmVjb3JkKCkKICAgIH0KICB9CiAgLyoqCiAgICpWYWxpZGF0ZSBSZWNvcmRzCiAgICogQHBhcmFtcwogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdmFsaWRhdGVJbnB1dCgpIHsKCiAgICAvL1ZhbGlkYXRlIENvbXBhbnkgTnVtYmVyCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBkZWYgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBpQ09OTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIC8vVmFsaWRhdGUgUGxheWVyIE51bWJlcgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIkRJVkkiOmlESVZJLnRvU3RyaW5nKCkudHJpbSgpLCJQTElEIjppUExJRC50b1N0cmluZygpLnRyaW0oKV0KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuUExJRCA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBQbGF5ZXJJRCBOdW1iZXIgIiArIGlQTElEKyIuIEhlYWRlciBSZWNvcmQgbm90IEZvdW5kLiIpCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIkVYVDAwMU1JIiwgIkdldFBsYXllckhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIC8vVmFsaWRhdGUgSXRlbSBOdW1iZXIKICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCJJVE5PIjppSVROTy50b1N0cmluZygpLnRyaW0oKV0KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuSVROTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBJdGVtIE51bWJlciAiICsgaUlUTk8pCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIwME1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgaWYoaURMSVghPTApCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgRGVsaXZlcnkgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCJETElYIjppRExJWC50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5ETElYID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGVsaXZlcnkgTnVtYmVyICIgKyBpRExJWCkKICAgICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1XUzQxME1JIiwgIkdldEhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQogICAgaWYoIWlXSExPLnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgV2FyZWhvdXNlIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiV0hMTyI6aVdITE8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgICBpZiAocmVzcG9uc2UuV0hMTyA9PSBudWxsKSB7CiAgICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIFdhcmVob3VzZSBOdW1iZXIgIiArIGlXSExPKQogICAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiTU1TMDA1TUkiLCAiR2V0V2FyZWhvdXNlIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCgogICAgLy9WYWxpZGF0ZSBUZW1wb3JhcnkgT3JkZXIgTnVtYmVyCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPWEhFQUQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgY29udGFpbmVyLnNldCgiT0FDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJPQU9STk8iLCBpT1JOUikKICAgIGlmKCFxdWVyeS5yZWFkKGNvbnRhaW5lcikpCiAgICB7CiAgICAgIG1pLmVycm9yKCJUZW1wb3JhcnkgT3JkZXIgTnVtYmVyIG5vdCBmb3VuZCAiK2lPUk5SKQogICAgICB2YWxpZElucHV0PWZhbHNlCiAgICAgIHJldHVybiBmYWxzZQogICAgfQoKICAgIC8vVmFsaWRhdGUgRmluYWwgT3JkZXIgTnVtYmVyCiAgICBpZighaU9STk8udHJpbSgpLmlzRW1wdHkoKSkKICAgIHsKICAgICAgcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT09IRUFEIikuaW5kZXgoIjAwIikuYnVpbGQoKQogICAgICBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgICBjb250YWluZXIuc2V0KCJPQUNPTk8iLCBpQ09OTykKICAgICAgY29udGFpbmVyLnNldCgiT0FPUk5PIiwgaU9STk8pCgogICAgICBpZighcXVlcnkucmVhZChjb250YWluZXIpKQogICAgICB7CiAgICAgICAgbWkuZXJyb3IoIkZpbmFsIE9yZGVyIE51bWJlciBub3QgZm91bmQgIitpT1JOTykKICAgICAgICB2YWxpZElucHV0PWZhbHNlCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqR2V0IExvY2F0aW9uCiAgICogQHBhcmFtcwogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgZ2V0TG9jYXRpb24oKSB7CiAgICBTdHJpbmcgdHJhbnNsYXRpb25JZGVudGl0eSA9ICIiCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIkRJVkkiOiIiLCJUUlFGIjoiMCIsIk1TVEQiOiJGVUxDTyIsIk1WUlMiOiIxIiwiQk1TRyI6IlBST1BFUlRZIiwiSUJPQiI6IkkiLCJFTE1QIjoiRlVMQ09PcmRlciIsIkVMTUQiOiJQcm9wZXJ0aWVzIl0KICAgIGRlZiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLklEVFIgIT0gbnVsbCkgewogICAgICAgICAgdHJhbnNsYXRpb25JZGVudGl0eSA9IHJlc3BvbnNlLklEVFIKICAgICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJDUlM4ODFNSSIsICJHZXRUcmFuc2xhdGlvbiIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgaWYoIXRyYW5zbGF0aW9uSWRlbnRpdHkudHJpbSgpLmlzRW1wdHkoKSkKICAgIHsKICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUJNVFJEIikuaW5kZXgoIjIwIikuc2VsZWN0aW9uKCJURE1WWEQiKS5idWlsZCgpCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgIGNvbnRhaW5lci5zZXQoIlREQ09OTyIsIGlDT05PKQogICAgICBjb250YWluZXIuc2V0KCJURERJVkkiLCAiIikKICAgICAgY29udGFpbmVyLnNldCgiVERJRFRSIiwgdHJhbnNsYXRpb25JZGVudGl0eSBhcyBJbnRlZ2VyKQogICAgICBjb250YWluZXIuc2V0KCJURE1CTUQiLCJLTE9DTE9HSUMiKQogICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciw0LGdldExvY2F0aW9uVHlwZSkKICAgIH0KICAgIGludCBTRVFOID0gSW50ZWdlci5wYXJzZUludChpUExJRC5zdWJzdHJpbmcoMTApLnRyaW0oKSkKCiAgICBpZihrbG9jVmFsdWUudHJpbSgpLmVxdWFscygiQSIpKQogICAgewogICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNQk1UUkQiKS5pbmRleCgiMjAiKS5zZWxlY3Rpb24oIlRETVZYRCIpLmJ1aWxkKCkKICAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICAgY29udGFpbmVyLnNldCgiVERDT05PIiwgaUNPTk8pCiAgICAgIGNvbnRhaW5lci5zZXQoIlRERElWSSIsICIiKQogICAgICBjb250YWluZXIuc2V0KCJURElEVFIiLCB0cmFuc2xhdGlvbklkZW50aXR5IGFzIEludGVnZXIpCiAgICAgIGNvbnRhaW5lci5zZXQoIlRETUJNRCIsIktMT0NBSU5UIikKICAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsNCxnZXRJbnRlcnZhbCkKCiAgICBpbnQgc3VmZml4ID0gKChTRVFOLTEpICUgaW50ZXJ2YWwpICsgMQogICAgaW50IGludGVnZXJWYWx1ZSA9ICgoU0VRTi0xKSAvIGludGVydmFsKS5pbnRWYWx1ZSgpCiAgICBkb3VibGUgcHJlZml4ID0gaW50ZWdlclZhbHVlICUgMjYKICAgIGlLTE9DID0gU3RyaW5nLnZhbHVlT2YoKGNoYXIpKDY1ICsgcHJlZml4KSkgKyBzdWZmaXgKCiAgfWVsc2UgaWYoa2xvY1ZhbHVlLnRyaW0oKS5lcXVhbHMoIkwiKSkKICB7CiAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiRElWSSI6IiIsIlRSUUYiOiIwIiwiTVNURCI6IkZVTENPIiwiTVZSUyI6IjEiLCJCTVNHIjoiUFJPUEVSVFkiLCJJQk9CIjoiSSIsIkVMTVAiOiJGVUxDT09yZGVyIiwiRUxNRCI6IlByb3BlcnRpZXMiLCJNQk1EIjoiS0xPQyIrU0VRTl0KICAgIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuTVZYRCAhPSBudWxsKSB7CiAgICAgICAgICBpS0xPQyA9IEludGVnZXIucGFyc2VJbnQoKHJlc3BvbnNlLk1WWEQpLnRvU3RyaW5nKCkudHJpbSgpKQogICAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzg4MU1JIiwgIkdldFRyYW5zbERhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogIH0KICBpZihpS0xPQy50cmltKCkuaXNFbXB0eSgpKQogIHsKICAgIG1pLmVycm9yKCJMb2NhdGlvbiBtdXN0IGJlIGVudGVyZWQgIikKICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgcmV0dXJuIGZhbHNlCiAgfQoKfQoKQ2xvc3VyZSA8ID8gPiBnZXRMb2NhdGlvblR5cGUgPSB7CiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgLT4KICAgIGtsb2NWYWx1ZSA9IGNvbnRhaW5lci5nZXRTdHJpbmcoKCJURE1WWEQiKSkKICB9CgpDbG9zdXJlIDwgPyA+IGdldEludGVydmFsID0gewogICAgREJDb250YWluZXIgY29udGFpbmVyIC0+CiAgICBTdHJpbmcgTVZYRCA9IGNvbnRhaW5lci5nZXRTdHJpbmcoIlRETVZYRCIpCiAgICBpbnRlcnZhbCA9IEludGVnZXIucGFyc2VJbnQoTVZYRCkKICB9CgoKCi8qKgogKkluc2VydCByZWNvcmRzIHRvIEVYVFNUTCB0YWJsZQogKiBAcGFyYW1zCiAqIEByZXR1cm4KICovCnB1YmxpYyBpbnNlcnRSZWNvcmQoKSB7CiAgREJBY3Rpb24gYWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkVYVFNUTCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICBEQkNvbnRhaW5lciBxdWVyeSA9IGFjdGlvbi5nZXRDb250YWluZXIoKQogIHF1ZXJ5LnNldCgiRVhESVZJIiwgaURJVkkpCiAgcXVlcnkuc2V0KCJFWFBMSUQiLCBpUExJRCkKICBxdWVyeS5zZXQoIkVYS0xPQyIsIGlLTE9DKQogIHF1ZXJ5LnNldCgiRVhPUk5SIiwgaU9STlIpCiAgcXVlcnkuc2V0KCJFWE9STk8iLCBpT1JOTykKICBxdWVyeS5zZXQoIkVYUE9OUiIsIGlQT05SIGFzIEludGVnZXIpCiAgcXVlcnkuc2V0KCJFWFBPU1giLCBpUE9TWCBhcyBJbnRlZ2VyKQogIHF1ZXJ5LnNldCgiRVhJVE5PIiwgaUlUTk8pCiAgcXVlcnkuc2V0KCJFWE9SUVQiLCBpT1JRVCBhcyBJbnRlZ2VyKQogIHF1ZXJ5LnNldCgiRVhTTlVNIiwgaVNOVU0pCiAgcXVlcnkuc2V0KCJFWFdITE8iLCBpV0hMTykKICBxdWVyeS5zZXQoIkVYRExJWCIsIGlETElYKQogIHF1ZXJ5LnNldCgiRVhST1JOIiwgaVJPUk4pCiAgcXVlcnkuc2V0KCJFWFJPUkwiLCBpUk9STCBhcyBJbnRlZ2VyKQogIHF1ZXJ5LnNldCgiRVhST1JYIiwgaVJPUlggYXMgSW50ZWdlcikKICBxdWVyeS5zZXQoIkVYRExJWCIsIGlETElYIGFzIExvbmcpCiAgcXVlcnkuc2V0KCJFWFVERjEiLCBpVURGMSkKICBxdWVyeS5zZXQoIkVYVURGMiIsIGlVREYyKQogIHF1ZXJ5LnNldCgiRVhVREYzIiwgaVVERjMpCiAgcXVlcnkuc2V0KCJFWFVERjQiLCBpVURGNCkKICBxdWVyeS5zZXQoIkVYVURGNSIsIGlVREY1KQogIHF1ZXJ5LnNldCgiRVhVREY2IiwgaVVERjYpCiAgcXVlcnkuc2V0KCJFWENPTk8iLCBpQ09OTyBhcyBJbnRlZ2VyKQogIHF1ZXJ5LnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICBxdWVyeS5zZXQoIkVYUkdUTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogIHF1ZXJ5LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICBxdWVyeS5zZXQoIkVYTE1UTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogIHF1ZXJ5LnNldCgiRVhDSE5PIiwgMCkKICBxdWVyeS5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogIGFjdGlvbi5pbnNlcnQocXVlcnksIHJlY29yZEV4aXN0cykKfQoKQ2xvc3VyZSByZWNvcmRFeGlzdHMgPSB7CiAgbWkuZXJyb3IoIlJlY29yZCBBbHJlYWR5IEV4aXN0cyIpCiAgcmV0dXJuCn0KCgp9Cg=="}}}