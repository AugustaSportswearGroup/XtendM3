{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"AddPlayerLine":{"sourceUuid":"aa8eeeae-a980-4684-90f1-5316a6f33c09","name":"AddPlayerLine","program":"EXT001MI","description":"Add Player Line Details","active":true,"multi":false,"modified":1705987444848,"modifiedBy":"ABHISHEK","outputFields":[],"inputFields":[{"name":"CONO","description":"Company ","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"PLID","description":"Player ID","length":15,"mandatory":true,"type":"A"},{"name":"ORNR","description":"Temporary Order Number","length":10,"mandatory":true,"type":"A"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"ORNO","description":"Customer Order Number","length":10,"mandatory":false,"type":"A"},{"name":"PONR","description":"Order Line Number","length":6,"mandatory":true,"type":"N"},{"name":"POSX","description":"Line Suffix","length":3,"mandatory":false,"type":"N"},{"name":"KLOC","description":"Kit Location","length":10,"mandatory":false,"type":"A"},{"name":"ORQT","description":"Order Quantity","length":15,"mandatory":false,"type":"N"},{"name":"SNUM","description":"S Number","length":30,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":false,"type":"N"},{"name":"RORN","description":"Reference Order Number","length":10,"mandatory":false,"type":"A"},{"name":"RORL","description":"Reference Order Line","length":6,"mandatory":false,"type":"N"},{"name":"RORX","description":"Line Suffix","length":3,"mandatory":false,"type":"N"},{"name":"UDF1","description":"User-defined field 1","length":5,"mandatory":false,"type":"A"},{"name":"UDF2","description":"User-defined field 2","length":5,"mandatory":false,"type":"A"},{"name":"UDF3","description":"User-defined field 3","length":10,"mandatory":false,"type":"A"},{"name":"UDF4","description":"User-defined field 4","length":15,"mandatory":false,"type":"A"},{"name":"UDF5","description":"User-defined field 5","length":20,"mandatory":false,"type":"A"},{"name":"UDF6","description":"User-defined field 6","length":30,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"aa8eeeae-a980-4684-90f1-5316a6f33c09":{"uuid":"aa8eeeae-a980-4684-90f1-5316a6f33c09","updated":1707294075161,"updatedBy":"ABHISHEK","created":1680543841185,"createdBy":"M3CONSADMX","apiVersion":"0.9","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"EEA3C716270C9D01D095AEDB17A6B4C79160589D509A42772C0CBCC8DA63C2F8","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVFNUTCB0YWJsZS4KICoKICogTmFtZTogRVhUMDAxTUkuQWRkUGxheWVyTGluZQogKiBEZXNjcmlwdGlvbjogQWRkaW5nIHJlY29yZHMgdG8gRVhUU1RMIHRhYmxlCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwNDAzICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIEFkZGluZyByZWNvcmRzIHRvIEVYVFNUTCB0YWJsZSAqLwoKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyCgpwdWJsaWMgY2xhc3MgQWRkUGxheWVyTGluZSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gewogIHByaXZhdGUgZmluYWwgTUlBUEkgbWkKICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyCgogIHByaXZhdGUgU3RyaW5nIGlESVZJLCBpUExJRCwgaUtMT0MsIGlPUk5PLCBpSVROTywgaVNOVU0sIGlXSExPLCBpUk9STiwgaVVERjEsIGlVREYyLCBpVURGMywgaVVERjQsIGlVREY1LCBpVURGNiwgaU9STlIsIGtsb2NWYWx1ZSA9ICIiCiAgcHJpdmF0ZSBpbnQgaUNPTk8sIGlQT05SLCBpUE9TWCwgaVJPUkwsIGlST1JYLCBpbnRlcnZhbCA9IDAKICBwcml2YXRlIGRvdWJsZSBpT1JRVAogIHByaXZhdGUgYm9vbGVhbiB2YWxpZElucHV0ID0gdHJ1ZQogIHByaXZhdGUgbG9uZyBpRExJWAoKICBwdWJsaWMgQWRkUGxheWVyTGluZShNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICB9CiAgLyoqCiAgICoqIE1haW4gZnVuY3Rpb24KICAgKiBAcGFyYW0KICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgbWFpbigpIHsKICAgIGlESVZJID0gKG1pLmluRGF0YS5nZXQoIkRJVkkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJVkkiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiRElWSSIpCiAgICBpUExJRCA9IChtaS5pbkRhdGEuZ2V0KCJQTElEIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQTElEIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBMSUQiKQogICAgaUtMT0MgPSAobWkuaW5EYXRhLmdldCgiS0xPQyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiS0xPQyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJLTE9DIikKICAgIGlPUk5SID0gKG1pLmluRGF0YS5nZXQoIk9STlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STlIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JOUiIpCiAgICBpT1JOTyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKQogICAgaVBPTlIgPSAobWkuaW5EYXRhLmdldCgiUE9OUiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUE9OUiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIlBPTlIiKSBhcyBJbnRlZ2VyCiAgICBpUE9TWCA9IChtaS5pbkRhdGEuZ2V0KCJQT1NYIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQT1NYIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiUE9TWCIpIGFzIEludGVnZXIKICAgIGlJVE5PID0gKG1pLmluRGF0YS5nZXQoIklUTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIklUTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVROTyIpCiAgICBpT1JRVCA9IChtaS5pbkRhdGEuZ2V0KCJPUlFUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUlFUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiT1JRVCIpIGFzIGRvdWJsZQogICAgaVNOVU0gPSAobWkuaW5EYXRhLmdldCgiU05VTSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiU05VTSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJTTlVNIikKICAgIGlXSExPID0gKG1pLmluRGF0YS5nZXQoIldITE8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiV0hMTyIpCiAgICBpRExJWCA9IChtaS5pbkRhdGEuZ2V0KCJETElYIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJETElYIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRExJWCIpIGFzIExvbmcKICAgIGlST1JOID0gKG1pLmluRGF0YS5nZXQoIlJPUk4iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlJPUk4iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUk9STiIpCiAgICBpUk9STCA9IChtaS5pbkRhdGEuZ2V0KCJST1JMIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJST1JMIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiUk9STCIpIGFzIEludGVnZXIKICAgIGlST1JYID0gKG1pLmluRGF0YS5nZXQoIlJPUlgiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlJPUlgiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJST1JYIikgYXMgSW50ZWdlcgogICAgaVVERjEgPSAobWkuaW5EYXRhLmdldCgiVURGMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREYxIikKICAgIGlVREYyID0gKG1pLmluRGF0YS5nZXQoIlVERjIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGMiIpCiAgICBpVURGMyA9IChtaS5pbkRhdGEuZ2V0KCJVREYzIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREYzIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjMiKQogICAgaVVERjQgPSAobWkuaW5EYXRhLmdldCgiVURGNCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGNCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREY0IikKICAgIGlVREY1ID0gKG1pLmluRGF0YS5nZXQoIlVERjUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGNSIpCiAgICBpVURGNiA9IChtaS5pbkRhdGEuZ2V0KCJVREY2IikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREY2IikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjYiKQoKICAgIGlDT05PID0gKG1pLmluRGF0YS5nZXQoIkNPTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/IHByb2dyYW0uTERBWkQuQ09OTyBhcyBJbnRlZ2VyIDogbWkuaW5EYXRhLmdldCgiQ09OTyIpIGFzIEludGVnZXIKICAgIHZhbGlkYXRlSW5wdXQoKQogICAgaWYgKGlLTE9DLnRyaW0oKS5pc0VtcHR5KCkgJiYgdmFsaWRJbnB1dCkgewogICAgICBnZXRMb2NhdGlvbigpCiAgICB9CiAgICBpZiAodmFsaWRJbnB1dCkgewogICAgICBpbnNlcnRSZWNvcmQoKQogICAgfQogIH0KICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIHZhbGlkYXRlSW5wdXQoKSB7CgogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKV0KICAgIENsb3N1cmU8Pz4gY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIENvbXBhbnkgTnVtYmVyICIgKyBpQ09OTykKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBEaXZpc2lvbgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJESVZJIjogaURJVkkudG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuRElWSSA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGl2aXNpb24gIiArIGlESVZJKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybgogICAgICB9CiAgICB9CgogICAgbWlDYWxsZXIuY2FsbCgiTU5TMTAwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICAvL1ZhbGlkYXRlIFBsYXllciBOdW1iZXIKICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRElWSSI6IGlESVZJLnRvU3RyaW5nKCkudHJpbSgpLCAiUExJRCI6IGlQTElELnRvU3RyaW5nKCkudHJpbSgpXQogICAgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLlBMSUQgPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIFBsYXllcklEIE51bWJlciAiICsgaVBMSUQgKyAiLiBIZWFkZXIgUmVjb3JkIG5vdCBGb3VuZC4iKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybiAKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiRVhUMDAxTUkiLCAiR2V0UGxheWVySGVhZCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBJdGVtIE51bWJlcgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJJVE5PIjogaUlUTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuSVROTyA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgSXRlbSBOdW1iZXIgIiArIGlJVE5PKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybiAKICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICBpZiAoaURMSVggIT0gMCkgewogICAgICAvL1ZhbGlkYXRlIERlbGl2ZXJ5IE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkRMSVgiOiBpRExJWC50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkRMSVggPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGVsaXZlcnkgTnVtYmVyICIgKyBpRExJWCkKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuIAogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJNV1M0MTBNSSIsICJHZXRIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KICAgIGlmICghaVdITE8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIFdhcmVob3VzZSBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJXSExPIjogaVdITE8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5XSExPID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIFdhcmVob3VzZSBOdW1iZXIgIiArIGlXSExPKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4gCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzAwNU1JIiwgIkdldFdhcmVob3VzZSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgLy9WYWxpZGF0ZSBUZW1wb3JhcnkgT3JkZXIgTnVtYmVyCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPWEhFQUQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgY29udGFpbmVyLnNldCgiT0FDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJPQU9STk8iLCBpT1JOUikKICAgIGlmICghcXVlcnkucmVhZChjb250YWluZXIpKSB7CiAgICAgIG1pLmVycm9yKCJUZW1wb3JhcnkgT3JkZXIgTnVtYmVyIG5vdCBmb3VuZCAiICsgaU9STlIpCiAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICByZXR1cm4gCiAgICB9CgogICAgLy9WYWxpZGF0ZSBGaW5hbCBPcmRlciBOdW1iZXIKICAgIGlmICghaU9STk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPT0hFQUQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICAgIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgIGNvbnRhaW5lci5zZXQoIk9BQ09OTyIsIGlDT05PKQogICAgICBjb250YWluZXIuc2V0KCJPQU9STk8iLCBpT1JOTykKCiAgICAgIGlmICghcXVlcnkucmVhZChjb250YWluZXIpKSB7CiAgICAgICAgbWkuZXJyb3IoIkZpbmFsIE9yZGVyIE51bWJlciBub3QgZm91bmQgIiArIGlPUk5PKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybiAKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICpHZXQgTG9jYXRpb24KICAgKiBAcGFyYW1zCiAgICogQHJldHVybgogICAqLwogIHB1YmxpYyB2b2lkIGdldExvY2F0aW9uKCkgewogICAgU3RyaW5nIHRyYW5zbGF0aW9uSWRlbnRpdHkgPSAiIgogICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkRJVkkiOiAiIiwgIlRSUUYiOiAiMCIsICJNU1REIjogIkZVTENPIiwgIk1WUlMiOiAiMSIsICJCTVNHIjogIlBST1BFUlRZIiwgIklCT0IiOiAiSSIsICJFTE1QIjogIkZVTENPT3JkZXIiLCAiRUxNRCI6ICJQcm9wZXJ0aWVzIl0KICAgIENsb3N1cmU8Pz4gY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLklEVFIgIT0gbnVsbCkgewogICAgICAgIHRyYW5zbGF0aW9uSWRlbnRpdHkgPSByZXNwb25zZS5JRFRSCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzg4MU1JIiwgIkdldFRyYW5zbGF0aW9uIiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICBpZiAoIXRyYW5zbGF0aW9uSWRlbnRpdHkudHJpbSgpLmlzRW1wdHkoKSkgewogICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNQk1UUkQiKS5pbmRleCgiMjAiKS5zZWxlY3Rpb24oIlRETVZYRCIpLmJ1aWxkKCkKICAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICAgY29udGFpbmVyLnNldCgiVERDT05PIiwgaUNPTk8pCiAgICAgIGNvbnRhaW5lci5zZXQoIlRERElWSSIsICIiKQogICAgICBjb250YWluZXIuc2V0KCJURElEVFIiLCB0cmFuc2xhdGlvbklkZW50aXR5IGFzIEludGVnZXIpCiAgICAgIGNvbnRhaW5lci5zZXQoIlRETUJNRCIsICJLTE9DTE9HSUMiKQogICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgNCwgZ2V0TG9jYXRpb25UeXBlKQogICAgfQogICAgaW50IFNFUU4gPSBJbnRlZ2VyLnBhcnNlSW50KGlQTElELnN1YnN0cmluZygxMCkudHJpbSgpKQoKICAgIGlmIChrbG9jVmFsdWUudHJpbSgpLmVxdWFscygiQSIpKSB7CiAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1CTVRSRCIpLmluZGV4KCIyMCIpLnNlbGVjdGlvbigiVERNVlhEIikuYnVpbGQoKQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgICBjb250YWluZXIuc2V0KCJURENPTk8iLCBpQ09OTykKICAgICAgY29udGFpbmVyLnNldCgiVERESVZJIiwgIiIpCiAgICAgIGNvbnRhaW5lci5zZXQoIlRESURUUiIsIHRyYW5zbGF0aW9uSWRlbnRpdHkgYXMgSW50ZWdlcikKICAgICAgY29udGFpbmVyLnNldCgiVERNQk1EIiwgIktMT0NBSU5UIikKICAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDQsIGdldEludGVydmFsKQoKICAgICAgaW50IHN1ZmZpeCA9ICgoU0VRTiAtIDEpICUgaW50ZXJ2YWwpICsgMQogICAgICBpbnQgaW50ZWdlclZhbHVlID0gKChTRVFOIC0gMSkgLyBpbnRlcnZhbCkuaW50VmFsdWUoKQogICAgICBkb3VibGUgcHJlZml4ID0gaW50ZWdlclZhbHVlICUgMjYKICAgICAgaUtMT0MgPSBTdHJpbmcudmFsdWVPZigoY2hhcikoNjUgKyBwcmVmaXgpKSArIHN1ZmZpeAoKICAgIH0gZWxzZSBpZiAoa2xvY1ZhbHVlLnRyaW0oKS5lcXVhbHMoIkwiKSkgewogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkRJVkkiOiAiIiwgIlRSUUYiOiAiMCIsICJNU1REIjogIkZVTENPIiwgIk1WUlMiOiAiMSIsICJCTVNHIjogIlBST1BFUlRZIiwgIklCT0IiOiAiSSIsICJFTE1QIjogIkZVTENPT3JkZXIiLCAiRUxNRCI6ICJQcm9wZXJ0aWVzIiwgIk1CTUQiOiAiS0xPQyIgKyBTRVFOXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuTVZYRCAhPSBudWxsKSB7CiAgICAgICAgICBpS0xPQyA9IEludGVnZXIucGFyc2VJbnQoKHJlc3BvbnNlLk1WWEQpLnRvU3RyaW5nKCkudHJpbSgpKQogICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlM4ODFNSSIsICJHZXRUcmFuc2xEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KICAgIGlmIChpS0xPQy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIG1pLmVycm9yKCJMb2NhdGlvbiBtdXN0IGJlIGVudGVyZWQgIikKICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgIHJldHVybiAKICAgIH0KCiAgfQoKICBDbG9zdXJlIDwgPyA+IGdldExvY2F0aW9uVHlwZSA9IHsKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPgogICAga2xvY1ZhbHVlID0gY29udGFpbmVyLmdldFN0cmluZygoIlRETVZYRCIpKQogIH0KCiAgQ2xvc3VyZSA8ID8gPiBnZXRJbnRlcnZhbCA9IHsKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPgogICAgU3RyaW5nIE1WWEQgPSBjb250YWluZXIuZ2V0U3RyaW5nKCJURE1WWEQiKQogICAgaW50ZXJ2YWwgPSBJbnRlZ2VyLnBhcnNlSW50KE1WWEQpCiAgfQoKICAvKioKICAgKkluc2VydCByZWNvcmRzIHRvIEVYVFNUTCB0YWJsZQogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgaW5zZXJ0UmVjb3JkKCkgewogICAgREJBY3Rpb24gYWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkVYVFNUTCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIHF1ZXJ5ID0gYWN0aW9uLmdldENvbnRhaW5lcigpCiAgICBxdWVyeS5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgcXVlcnkuc2V0KCJFWFBMSUQiLCBpUExJRCkKICAgIHF1ZXJ5LnNldCgiRVhLTE9DIiwgaUtMT0MpCiAgICBxdWVyeS5zZXQoIkVYT1JOUiIsIGlPUk5SKQogICAgcXVlcnkuc2V0KCJFWE9STk8iLCBpT1JOTykKICAgIHF1ZXJ5LnNldCgiRVhQT05SIiwgaVBPTlIgYXMgSW50ZWdlcikKICAgIHF1ZXJ5LnNldCgiRVhQT1NYIiwgaVBPU1ggYXMgSW50ZWdlcikKICAgIHF1ZXJ5LnNldCgiRVhJVE5PIiwgaUlUTk8pCiAgICBxdWVyeS5zZXQoIkVYT1JRVCIsIGlPUlFUIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYU05VTSIsIGlTTlVNKQogICAgcXVlcnkuc2V0KCJFWFdITE8iLCBpV0hMTykKICAgIHF1ZXJ5LnNldCgiRVhST1JOIiwgaVJPUk4pCiAgICBxdWVyeS5zZXQoIkVYUk9STCIsIGlST1JMIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYUk9SWCIsIGlST1JYIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYRExJWCIsIGlETElYIGFzIExvbmcpCiAgICBxdWVyeS5zZXQoIkVYVURGMSIsIGlVREYxKQogICAgcXVlcnkuc2V0KCJFWFVERjIiLCBpVURGMikKICAgIHF1ZXJ5LnNldCgiRVhVREYzIiwgaVVERjMpCiAgICBxdWVyeS5zZXQoIkVYVURGNCIsIGlVREY0KQogICAgcXVlcnkuc2V0KCJFWFVERjUiLCBpVURGNSkKICAgIHF1ZXJ5LnNldCgiRVhVREY2IiwgaVVERjYpCiAgICBxdWVyeS5zZXQoIkVYQ09OTyIsIGlDT05PIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYUkdUTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWExNRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhDSE5PIiwgMCkKICAgIHF1ZXJ5LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpCiAgICBhY3Rpb24uaW5zZXJ0KHF1ZXJ5LCByZWNvcmRFeGlzdHMpCiAgfQoKICBDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsKICAgIG1pLmVycm9yKCJSZWNvcmQgQWxyZWFkeSBFeGlzdHMiKQogICAgcmV0dXJuCiAgfQoKfQ=="}}}