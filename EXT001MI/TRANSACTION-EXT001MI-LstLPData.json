{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"LstLPData":{"sourceUuid":"ea2d58cd-6a90-41fe-a04b-c84cbe0083d4","name":"LstLPData","program":"EXT001MI","description":"LstLPData","active":true,"multi":true,"modified":1683626866325,"modifiedBy":"M3CONSADMX","outputFields":[{"name":"ORNO","description":"Order Number","length":10,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":false,"type":"N"},{"name":"PLID","description":"Player ID","length":15,"mandatory":false,"type":"A"},{"name":"PLNM","description":"Player Name","length":60,"mandatory":false,"type":"A"},{"name":"PLNU","description":"Player Number","length":10,"mandatory":false,"type":"A"},{"name":"TEAM","description":"Team Name","length":40,"mandatory":false,"type":"A"},{"name":"LEAG","description":"League Name","length":40,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"WHSL","description":"Location","length":10,"mandatory":false,"type":"A"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":false,"type":"A"},{"name":"ORQT","description":"Ordered Quantity","length":15,"mandatory":false,"type":"A"},{"name":"RIDL","description":"Order Line","length":5,"mandatory":false,"type":"N"}],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ea2d58cd-6a90-41fe-a04b-c84cbe0083d4":{"uuid":"ea2d58cd-6a90-41fe-a04b-c84cbe0083d4","updated":1683627290520,"updatedBy":"M3CONSADMX","created":1674638484665,"createdBy":"M3CONSADMX","apiVersion":"0.21","beVersion":"16.0.0.20230216180900.6","language":"GROOVY","codeHash":"62AB6C1640896CC43BDCC102B6827ACB5ABAFF8982F4B81140C0FE2D185115C5","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIGxpc3QgZGF0YSBmb3IgbGlnaHRuaW5nIHBpY2sgc3lzdGVtLiBMaWdodG5pbmcgUGljayBpcyBhIHBpY2stdG8tbGlnaHQgc3lzdGVtIHVzZWQgZm9yIAogKiBwaWNraW5nIG9yZGVyZWQgaXRlbXMgZnJvbSBzaGVsdmVzIGFuZCBwYWNraW5nIHRoZW0gYXMgb25lIGRlbGl2ZXJ5IGZvciBhbiBvcmRlci4KICoKICogTmFtZTogRVhUMDAxTUkuTHN0TFBEYXRhCiAqIERlc2NyaXB0aW9uOiBMaXN0IGRldGFpbHMgb2YgaXRlbXMgdG8gYmUgcGlja2VkLgogKiBEYXRlICAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24KICogMjAyMzAxMzAgICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgICAgICBJbml0aWFsIGRldmVsb3BtZW50IGZyb20gTUFLIEFHUzAwMU1JLkxzdExQRGF0YQogKgogKi8KaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwCgpwdWJsaWMgY2xhc3MgTHN0TFBEYXRhIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIKCiAgcHVibGljIExzdExQRGF0YShNSUFQSSBtaSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICB9CgogIC8vR2xvYmFsIFZhcmlhYmxlcwogIHByaXZhdGUgaW50IGlDT05PLCBtYXhQYWdlU2l6ZSA9IDEwMDAwCiAgcHJpdmF0ZSBTdHJpbmcgaURJVkksdGVtcE9STk89IiIsdXNlckRlZmluZWRGaWVsZDMgPSAiIgogIHByaXZhdGUgbG9uZyBpRExJWAoKICBIYXNoTWFwIDwgU3RyaW5nLCBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPj4gb3JkZXJIZWFkZXIgPSBuZXcgSGFzaE1hcCA8ID4gKCkKICBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBvcmRlckRldGFpbHMgPSBuZXcgSGFzaE1hcCA8IFN0cmluZywgU3RyaW5nID4gKCkKICBIYXNoTWFwIDwgU3RyaW5nLCBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPj4gYWxsb2NhdGlvbkhlYWRlciA9IG5ldyBIYXNoTWFwIDwgID4gKCkKICBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiBhbGxvY2F0aW9uRGVhdGlscyA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiAoKQoKICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaURJVkkgPSAobWkuaW5EYXRhLmdldCgiRElWSSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElWSSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5ESVZJIDogbWkuaW5EYXRhLmdldCgiRElWSSIpCiAgICBpRExJWCA9IChtaS5pbkRhdGEuZ2V0KCJETElYIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJETElYIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiRExJWCIpIGFzIExvbmcKCgogICAgYm9vbGVhbiB2YWxpZElucHV0ID0gdmFsaWRhdGVJbnB1dChpQ09OTywgaURMSVgpIC8vQ2hlY2sgaWYgaW5wdXRzIGFyZSB2YWxpZC4KICAgIGlmICh2YWxpZElucHV0KSB7CiAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1IRElTTCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiVVJJVE5PIiwgIlVSUklETCIsICJVUlJJRE4iKS5idWlsZCgpIC8vR2V0IGRlbGl2ZXJ5IHJlbGF0ZWQgaW5mb3JtYXRpb24KICAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICAgY29udGFpbmVyLnNldCgiVVJDT05PIiwgaUNPTk8gYXMgSW50ZWdlcikKICAgICAgY29udGFpbmVyLnNldCgiVVJETElYIiwgaURMSVggYXMgSW50ZWdlcikKICAgICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDIsbWF4UGFnZVNpemUsIGRlbGl2ZXJ5TGluZXNEZXRhaWxzKQogICAgICBzZXRPdXRwdXQoKQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuCiAgICB9CiAgfQogIENsb3N1cmU8Pz4gZGVsaXZlcnlMaW5lc0RldGFpbHMgPSB7CiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgLT4KICAgICAgU3RyaW5nIFJJRE4gPSBjb250YWluZXIuZ2V0KCJVUlJJRE4iKQogICAgICBTdHJpbmcgUklETCA9IGNvbnRhaW5lci5nZXQoIlVSUklETCIpCiAgICAgIFN0cmluZyBJVE5PID0gY29udGFpbmVyLmdldCgiVVJJVE5PIikKICAgICAgU3RyaW5nIE9STlIgPSBnZXRUZW1wb3JhcnlPcmRlck51bWJlcihSSUROKQogICAgICBpZihPUk5SIT1udWxsJiYhT1JOUi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgZ2V0UGxheWVyTGluZURldGFpbHMoT1JOUiwgUklETCwgSVROTykKICAgICAgfWVsc2UKICAgICAgewogICAgICAgIG1pLmVycm9yKCJUZW1wb3JhcnkgT3JkZXIgbm90IGZvdW5kIGZvciB0aGUgb3JkZXIgIiArIFJJRE4pCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICB9CgogIC8qKgogICAqVmFsaWRhdGUgaW5wdXRzCiAgICogQHBhcmFtcyBpbnQgQ09OTyAsIGxvbmcgRExJWAogICAqIEByZXR1cm4gYm9vbGVhbgogICAqLwogIHByaXZhdGUgYm9vbGVhbiB2YWxpZGF0ZUlucHV0KGludCBpQ09OTywgbG9uZyBpRExJWCkgewogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuQ09OTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJNTlMwOTVNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIC8vVmFsaWRhdGUgRGVsaXZlcnkgTnVtYmVyCiAgICBkZWYgcGFyYW1zRExJWCA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRExJWCI6IGlETElYLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrRExJWCA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkRMSVggPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgZGVsaXZlcnkgTnVtYmVyICIgKyBpRExJWCkKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1XUzQxME1JIiwgIkdldEhlYWQiLCBwYXJhbXNETElYLCBjYWxsYmFja0RMSVgpCgogICAgcmV0dXJuIHRydWUKCiAgfQoKICAvKioKICAgKkdldCBUZW1wb3JhcnkgT3JkZXIgTnVtYmVyIGZvciB0aGUgZmluYWwgT3JkZXIgTnVtYmVyCiAgICogQHBhcmFtcyBTdHJpbmcgUklETgogICAqIEByZXR1cm4gU3RyaW5nCiAgICovCiAgcHJpdmF0ZSBTdHJpbmcgZ2V0VGVtcG9yYXJ5T3JkZXJOdW1iZXIoU3RyaW5nIFJJRE4pIHsKICAgIFN0cmluZyBPUk5PID0gIiIKICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiT1JOTyI6UklETi50b1N0cmluZygpLnRyaW0oKV0KICAgIGRlZiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gIT0gbnVsbCkgewogICAgICAgICAgT1JOTyA9IHJlc3BvbnNlLk9STk8KICAgICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJPSVMyNzVNSSIsICJHZXRUbXBPcmRlclN0YXQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgcmV0dXJuIE9STk8KICB9CgoKICAvKioKICAgKiBHZXQgUGxheWVyIExpbmUgRGV0YWlscwogICAqIEBwYXJhbXMgU3RyaW5nIE9STlIgLCBTdHJpbmcgUklETCwgU3RyaW5nIElUTk8KICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBwcml2YXRlIHZvaWQgZ2V0UGxheWVyTGluZURldGFpbHMoU3RyaW5nIE9STlIsIFN0cmluZyBSSURMLCBTdHJpbmcgSVROTykgewogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUU1RMIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJFWFBMSUQiLCAiRVhXSExPIiwgIkVYVURGMyIsICJFWE9SUVQiLCAiRVhPUk5PIiwgIkVYUE9OUiIsICJFWElUTk8iLCJFWE9STlIiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJFWERJVkkiLCBpRElWSSkKICAgIGNvbnRhaW5lci5zZXQoIkVYT1JOUiIsIE9STlIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPTlIiLCBSSURMIGFzIEludGVnZXIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPU1giLCAwKQogICAgY29udGFpbmVyLnNldCgiRVhJVE5PIiwgSVROTykKICAgIAogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDYsIGdldFBsYXllckxpbmVEZXRhaWxzUmVzdWx0KQogIH0KICBDbG9zdXJlIDwgPyA+IGdldFBsYXllckxpbmVEZXRhaWxzUmVzdWx0ID0gewogICAgREJDb250YWluZXIgY29udGFpbmVyUmVzdWx0IC0+CiAgICAgIFN0cmluZyB3YXJlaG91c2UgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWFdITE8iKQogICAgICBTdHJpbmcgcGxheWVySUQgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWFBMSUQiKQogICAgICBTdHJpbmcgdXNlckRlZmluZWRGaWVsZDMgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWFVERjMiKQogICAgICBTdHJpbmcgb3JkZXJRdWFudGl0eSA9IGNvbnRhaW5lclJlc3VsdC5nZXQoIkVYT1JRVCIpCiAgICAgIFN0cmluZyBvcmRlck51bWJlciA9IGNvbnRhaW5lclJlc3VsdC5nZXQoIkVYT1JOTyIpCiAgICAgIFN0cmluZyB0ZW1wb3JhcnlPcmRlck51bWJlciA9IGNvbnRhaW5lclJlc3VsdC5nZXQoIkVYT1JOUiIpCiAgICAgIFN0cmluZyBsaW5lTnVtYmVyID0gY29udGFpbmVyUmVzdWx0LmdldCgiRVhQT05SIikKICAgICAgU3RyaW5nIGl0ZW1OdW1iZXIgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWElUTk8iKQogICAgICBTdHJpbmcgSGVhZGVyID0gcGxheWVySUQrIiwiK3RlbXBvcmFyeU9yZGVyTnVtYmVyLnRyaW0oKSArICIsIiArIGxpbmVOdW1iZXIudHJpbSgpCiAgICAgIG9yZGVyRGV0YWlscyA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+ICgpCiAgICAgIGlmIChvcmRlckhlYWRlci5jb250YWluc0tleShIZWFkZXIpKSB7CiAgICAgICAgb3JkZXJEZXRhaWxzID0gb3JkZXJIZWFkZXIuZ2V0KEhlYWRlcikKICAgICAgICBvcmRlckhlYWRlci5yZW1vdmUoSGVhZGVyKQogICAgICB9CgoKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiV0hMTyIsIHdhcmVob3VzZSkKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiUExJRCIsIHBsYXllcklEKQogICAgICBvcmRlckRldGFpbHMucHV0KCJVREYzIiwgIiIpCiAgICAgIG9yZGVyRGV0YWlscy5wdXQoIk9SUVQiLCBvcmRlclF1YW50aXR5KQogICAgICBvcmRlckRldGFpbHMucHV0KCJJVE5PIiwgaXRlbU51bWJlcikKICAgICAgb3JkZXJIZWFkZXIucHV0KEhlYWRlciwgb3JkZXJEZXRhaWxzKQoKICAgICAgZ2V0UGxheWVySGVhZGVyRGV0YWlscyhwbGF5ZXJJRCx0ZW1wb3JhcnlPcmRlck51bWJlcixsaW5lTnVtYmVyKQogICAgICB1cGRhdGVQbGF5ZXJMaW5lRGVsaXZlcnlEZXRhaWxzKHBsYXllcklELCBsaW5lTnVtYmVyLCBpdGVtTnVtYmVyLHRlbXBvcmFyeU9yZGVyTnVtYmVyKQogICAgICB1cGRhdGVVc2VyRGVmaW5lZEZpZWxkRGV0YWlscyhwbGF5ZXJJRCwgdGVtcG9yYXJ5T3JkZXJOdW1iZXIsIGxpbmVOdW1iZXIsIGl0ZW1OdW1iZXIsICIiKQogICAgICBnZXRBbGxvY2F0aW9uRGV0YWlscyhwbGF5ZXJJRCxvcmRlck51bWJlciAsIGxpbmVOdW1iZXIsIGl0ZW1OdW1iZXIsdGVtcG9yYXJ5T3JkZXJOdW1iZXIpCiAgfQoKICAvKioKICAgKkdldCBoZWFkZXIgbGV2ZWwgZGV0YWlscyBvZiB0aGUgcGxheWVyIGZyb20gRVhUU1RIIHRhYmxlLgogICAqIEBwYXJhbXMgU3RyaW5nIFBMSUQsU3RyaW5nIE9STlIsIFN0cmluZyBSSURMCiAgICogQHJldHVybgogICAqLwogIHByaXZhdGUgdm9pZCBnZXRQbGF5ZXJIZWFkZXJEZXRhaWxzKFN0cmluZyBQTElELFN0cmluZyBPUk5SLCBTdHJpbmcgUklETCkgewogICAgU3RyaW5nIEhlYWRlciA9IFBMSUQrIiwiK09STlIgKyAiLCIgKyBSSURMCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRTVEgiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkVYUExOTSIsICJFWFBMTlUiLCAiRVhURUFNIiwgIkVYTEVBRyIsIkVYT1JOTyIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgY29udGFpbmVyLnNldCgiRVhQTElEIiwgUExJRCkKICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsKICAgICAgb3JkZXJEZXRhaWxzID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsU3RyaW5nID4gKCkKICAgICAgaWYgKG9yZGVySGVhZGVyLmNvbnRhaW5zS2V5KEhlYWRlcikpIHsKICAgICAgICBvcmRlckRldGFpbHMgPSBvcmRlckhlYWRlci5nZXQoSGVhZGVyKQogICAgICAgIG9yZGVySGVhZGVyLnJlbW92ZShIZWFkZXIpCiAgICAgIH0KICAgICAgU3RyaW5nIHBsYXllck51bWJlciA9IGNvbnRhaW5lci5nZXQoIkVYUExOVSIpCiAgICAgIFN0cmluZyB0ZWFtID0gY29udGFpbmVyLmdldCgiRVhURUFNIikKICAgICAgU3RyaW5nIGxlYWd1ZSA9IGNvbnRhaW5lci5nZXQoIkVYTEVBRyIpCiAgICAgIFN0cmluZyBwbGF5ZXJOYW1lID0gY29udGFpbmVyLmdldCgiRVhQTE5NIikKICAgICAgU3RyaW5nIG9yZGVyTnVtYmVyID0gY29udGFpbmVyLmdldCgiRVhPUk5PIikKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiUExOVSIsIHBsYXllck51bWJlcikKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiVEVBTSIsIHRlYW0pCiAgICAgIG9yZGVyRGV0YWlscy5wdXQoIkxFQUciLCBsZWFndWUpCiAgICAgIG9yZGVyRGV0YWlscy5wdXQoIlBMTk0iLCBwbGF5ZXJOYW1lKQogICAgICBvcmRlckRldGFpbHMucHV0KCJPUk5PIiwgb3JkZXJOdW1iZXIpCiAgICAgIG9yZGVySGVhZGVyLnB1dChIZWFkZXIsIG9yZGVyRGV0YWlscykKICAgIH0KCiAgfQoKICAvKioKICAgKlVwZGF0ZSBFWFRTVEwgdGFibGUgd2l0aCBkZWxpdmVyeSBJbmZvcm1hdGlvbgogICAqIEBwYXJhbXMgIFN0cmluZyBQTElELCAgU3RyaW5nIFJJREwsIFN0cmluZyBJVE5PLFN0cmluZyBPUk5SCiAgICogQHJldHVybgogICAqLwogIHByaXZhdGUgdm9pZCB1cGRhdGVQbGF5ZXJMaW5lRGVsaXZlcnlEZXRhaWxzKFN0cmluZyBQTElELCBTdHJpbmcgUklETCwgU3RyaW5nIElUTk8sU3RyaW5nIE9STlIpIHsKICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVFNUTCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgY29udGFpbmVyLnNldCgiRVhQTElEIiwgUExJRCkKICAgIGNvbnRhaW5lci5zZXQoIkVYT1JOUiIsIE9STlIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPTlIiLCBSSURMIGFzIEludGVnZXIpCiAgICBjb250YWluZXIuc2V0KCJFWElUTk8iLCBJVE5PKQogICAgcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVEZWxpdmVyeUluZm9ybWF0aW9uKQogIH0KCiAgQ2xvc3VyZTw/PiB1cGRhdGVEZWxpdmVyeUluZm9ybWF0aW9uID0gewogICAgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERMSVgiLCBpRExJWCBhcyBJbnRlZ2VyKQogICAgICBsb2NrZWRSZXN1bHQudXBkYXRlKCkKICB9CgoKICAvKioKICAgKlVwZGF0ZSBFWFRTVEwgdGFibGUgd2l0aCBVREYzIGZpZWxkCiAgICogQHBhcmFtcyBTdHJpbmcgUExJRCAsIFN0cmluZyBPUk5PLCBTdHJpbmcgUE9OUiwgU3RyaW5nIElUTk8sIFN0cmluZyBVREYzCiAgICogQHJldHVybgogICAqLwogIHByaXZhdGUgdm9pZCB1cGRhdGVVc2VyRGVmaW5lZEZpZWxkRGV0YWlscyhTdHJpbmcgUExJRCwgU3RyaW5nIE9STlIsIFN0cmluZyBQT05SLCBTdHJpbmcgSVROTywgU3RyaW5nIFVERjMpIHsKICAgIHVzZXJEZWZpbmVkRmllbGQzID0gVURGMwogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUU1RMIikuaW5kZXgoIjAwIikuYnVpbGQoKQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhESVZJIiwgaURJVkkpCiAgICBjb250YWluZXIuc2V0KCJFWFBMSUQiLCBQTElEKQogICAgY29udGFpbmVyLnNldCgiRVhPUk5SIiwgT1JOUikKICAgIGNvbnRhaW5lci5zZXQoIkVYUE9OUiIsIFBPTlIgYXMgSW50ZWdlcikKICAgIGNvbnRhaW5lci5zZXQoIkVYSVROTyIsIElUTk8pCiAgICBxdWVyeS5yZWFkTG9jayhjb250YWluZXIsIHVwZGF0ZUNhbGxCYWNrKQoKICB9CgogIENsb3N1cmU8Pz4gdXBkYXRlQ2FsbEJhY2sgPSB7CiAgICBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+CiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYVURGMyIsIHVzZXJEZWZpbmVkRmllbGQzKQogICAgICBsb2NrZWRSZXN1bHQudXBkYXRlKCkKICB9CgoKICAvKioKICAgKiBHZXQgQWxsb2NhdGlvbiBEZXRhaWxzIGZyb20gTUlUQUxPIHRhYmxlCiAgICogQHBhcmFtcyBTdHJpbmcgUExJRCxTdHJpbmcgUklETiAsIGludCBSSURMLFN0cmluZyBJVE5PLCBTdHJpbmcgT1JOUgogICAqIEByZXR1cm4KICAgKi8KICBwcml2YXRlIHZvaWQgZ2V0QWxsb2NhdGlvbkRldGFpbHMoU3RyaW5nIFBMSUQsU3RyaW5nIFJJRE4sIFN0cmluZyBSSURMLCBTdHJpbmcgSVROTyxTdHJpbmcgT1JOUikgewogICAgU3RyaW5nIFdITE8gPSAiIgogICAgU3RyaW5nIEhlYWRlciA9IFBMSUQrIiwiK09STlIgKyAiLCIgKyBSSURMCiAgICBvcmRlckRldGFpbHMgPSBuZXcgSGFzaE1hcCA8ID4gKCkKICAgIGlmIChvcmRlckhlYWRlci5jb250YWluc0tleShIZWFkZXIpKSB7CiAgICAgIG9yZGVyRGV0YWlscyA9IG9yZGVySGVhZGVyLmdldChIZWFkZXIpCiAgICAgIFdITE8gPSBvcmRlckRldGFpbHMuZ2V0KCJXSExPIikKICAgIH0KCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRBTE8iKS5pbmRleCgiNzAiKS5zZWxlY3Rpb24oIk1RV0hTTCIsICJNUUFMUVQiLCAiTVFSSUROIiwgIk1RUklETCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJNUUNPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIk1RV0hMTyIsIFdITE8pCiAgICBjb250YWluZXIuc2V0KCJNUUlUTk8iLCBJVE5PKQogICAgY29udGFpbmVyLnNldCgiTVFUVFlQIiwgMzEpCiAgICBjb250YWluZXIuc2V0KCJNUVJJRE4iLCBSSUROKQogICAgY29udGFpbmVyLnNldCgiTVFSSURMIiwgUklETCBhcyBJbnRlZ2VyKQogICAgCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgNiwgZ2V0QWxsb2NhdGlvbkRldGFpbHMpCiAgfQoKCiAgQ2xvc3VyZTw/PiBnZXRBbGxvY2F0aW9uRGV0YWlscyA9IHsKCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgLT4KICAgICAgU3RyaW5nIFdIU0wgPSBjb250YWluZXIuZ2V0KCJNUVdIU0wiKQogICAgICBTdHJpbmcgQUxRVCA9IGNvbnRhaW5lci5nZXQoIk1RQUxRVCIpCiAgICAgIFN0cmluZyBSSUROID0gY29udGFpbmVyLmdldCgiTVFSSUROIikKICAgICAgU3RyaW5nIFJJREwgPSBjb250YWluZXIuZ2V0KCJNUVJJREwiKQogICAgICBTdHJpbmcgT1JOUiA9IGdldFRlbXBvcmFyeU9yZGVyTnVtYmVyKFJJRE4pCiAgICAgIFN0cmluZyBIZWFkZXIgPSBPUk5SLnRyaW0oKSArICIsIiArIFJJREwudHJpbSgpCiAgICAgIGFsbG9jYXRpb25EZWF0aWxzID0gbmV3IEhhc2hNYXAgPCA+ICgpCiAgICAgIGlmIChhbGxvY2F0aW9uSGVhZGVyLmNvbnRhaW5zS2V5KEhlYWRlcikpIHsKICAgICAgICBhbGxvY2F0aW9uRGVhdGlscyA9IGFsbG9jYXRpb25IZWFkZXIuZ2V0KEhlYWRlcikKICAgICAgICBhbGxvY2F0aW9uSGVhZGVyLnJlbW92ZShIZWFkZXIpCiAgICAgIH0KCiAgICAgIGFsbG9jYXRpb25EZWF0aWxzLnB1dCgiV0hTTCIsIFdIU0wpCiAgICAgIGFsbG9jYXRpb25EZWF0aWxzLnB1dCgiQUxRVCIsIEFMUVQpCiAgICAgIGFsbG9jYXRpb25IZWFkZXIucHV0KEhlYWRlciwgYWxsb2NhdGlvbkRlYXRpbHMpCiAgfQoKICAvKioKICAgKlNldCBBUEkgT3V0cHV0CiAgICogQHBhcmFtcwogICAqIEByZXR1cm4KICAgKi8KICBwcml2YXRlIHZvaWQgc2V0T3V0cHV0KCkgewogICAgZm9yIChTdHJpbmcga2V5OiBvcmRlckhlYWRlci5rZXlTZXQoKSkgewogICAgICBkb3VibGUgcXVhbnRpdHkgPSAwCiAgICAgIFN0cmluZyBQTElEID0ga2V5LnNwbGl0KCIsIilbMF0KICAgICAgU3RyaW5nIFJJRE4gPSBrZXkuc3BsaXQoIiwiKVsxXQogICAgICBTdHJpbmcgUklETCA9IGtleS5zcGxpdCgiLCIpWzJdCiAgICAgIG9yZGVyRGV0YWlscyA9IG9yZGVySGVhZGVyLmdldChrZXkpCiAgICAgIFN0cmluZyBJVE5PID0gb3JkZXJEZXRhaWxzLmdldCgiSVROTyIpCiAgICAgIFN0cmluZyBXSExPID0gb3JkZXJEZXRhaWxzLmdldCgiV0hMTyIpCiAgICAgIFN0cmluZyBVREYzID0gb3JkZXJEZXRhaWxzLmdldCgiVURGMyIpCiAgICAgIFN0cmluZyBPUlFUID0gb3JkZXJEZXRhaWxzLmdldCgiT1JRVCIpCiAgICAgIFN0cmluZyBQTE5NID0gb3JkZXJEZXRhaWxzLmdldCgiUExOTSIpCiAgICAgIFN0cmluZyBQTE5VID0gb3JkZXJEZXRhaWxzLmdldCgiUExOVSIpCiAgICAgIFN0cmluZyBURUFNID0gb3JkZXJEZXRhaWxzLmdldCgiVEVBTSIpCiAgICAgIFN0cmluZyBMRUFHID0gb3JkZXJEZXRhaWxzLmdldCgiTEVBRyIpCiAgICAgIFN0cmluZyBPUk5PID0gb3JkZXJEZXRhaWxzLmdldCgiT1JOTyIpCiAgICAgIFN0cmluZyBXSFNMID0iIgogICAgICBTdHJpbmcgQUxRVCA9ICIwIgoKCiAgICAgIGFsbG9jYXRpb25EZWF0aWxzID0gYWxsb2NhdGlvbkhlYWRlci5nZXQoUklETi50cmltKCkrIiwiK1JJREwudHJpbSgpKQogICAgICBpZihhbGxvY2F0aW9uRGVhdGlscyE9bnVsbCkKICAgICAgewogICAgICAgIFdIU0wgPSBhbGxvY2F0aW9uRGVhdGlscy5nZXQoIldIU0wiKQogICAgICAgIEFMUVQgPSBhbGxvY2F0aW9uRGVhdGlscy5nZXQoIkFMUVQiKQogICAgICB9CiAgICAgIGlmIChVREYzID09IG51bGwpIFVERjMgPSAiIgogICAgICBpZiAoQUxRVCA9PSBudWxsIHx8IEFMUVQudHJpbSgpLmlzRW1wdHkoKSkgQUxRVCA9ICIwIgogICAgICBpZiAoT1JRVCA9PSBudWxsIHx8IE9SUVQudHJpbSgpLmlzRW1wdHkoKSkgT1JRVCA9ICIwIgogICAgICBtaS5vdXREYXRhLnB1dCgiT1JOTyIsIE9STk8pCiAgICAgIG1pLm91dERhdGEucHV0KCJSSURMIiwgUklETCkKICAgICAgbWkub3V0RGF0YS5wdXQoIldIU0wiLCBXSFNMKQogICAgICBtaS5vdXREYXRhLnB1dCgiSVROTyIsIElUTk8pCiAgICAgIG1pLm91dERhdGEucHV0KCJXSExPIiwgV0hMTykKICAgICAgbWkub3V0RGF0YS5wdXQoIkRMSVgiLCBpRExJWCBhcyBTdHJpbmcpCgogICAgICBkb3VibGUgZG91YmxlQUxRVCA9IERvdWJsZS5wYXJzZURvdWJsZShBTFFUKQogICAgICBkb3VibGUgZG91YmxlT1JRVCA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFUKQogICAgICBpZiAocXVhbnRpdHkgPD0gZG91YmxlQUxRVCkgewogICAgICAgIG1pLm91dERhdGEucHV0KCJPUlFUIiwgT1JRVCkKICAgICAgICBpZiAoVURGMy50cmltKCkuaXNFbXB0eSgpICYmIHF1YW50aXR5IDwgZG91YmxlQUxRVCkgewogICAgICAgICAgcXVhbnRpdHkgPSBxdWFudGl0eSArIGRvdWJsZU9SUVQKICAgICAgICAgIG1pLm91dERhdGEucHV0KCJQTElEIiwgUExJRCkKICAgICAgICAgIG1pLm91dERhdGEucHV0KCJQTE5NIiwgUExOTSkKICAgICAgICAgIG1pLm91dERhdGEucHV0KCJQTE5VIiwgUExOVSkKICAgICAgICAgIG1pLm91dERhdGEucHV0KCJURUFNIiwgVEVBTSkKICAgICAgICAgIG1pLm91dERhdGEucHV0KCJMRUFHIiwgTEVBRykKICAgICAgICAgIHVwZGF0ZVVzZXJEZWZpbmVkRmllbGREZXRhaWxzKFBMSUQsIFJJRE4sIFJJREwsIElUTk8sIFdIU0wpCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pLndyaXRlKCkKICAgIH0KICB9Cgp9Cg=="}}}