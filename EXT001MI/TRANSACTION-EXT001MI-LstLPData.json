{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"LstLPData":{"sourceUuid":"ea2d58cd-6a90-41fe-a04b-c84cbe0083d4","name":"LstLPData","program":"EXT001MI","description":"LstLPData","active":true,"multi":true,"modified":1683003999732,"modifiedBy":"M3CONSADMX","outputFields":[{"name":"ORNO","description":"Order Number","length":10,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":false,"type":"N"},{"name":"PLID","description":"Player ID","length":15,"mandatory":false,"type":"A"},{"name":"PLNM","description":"Player Name","length":60,"mandatory":false,"type":"A"},{"name":"PLNU","description":"Player Number","length":10,"mandatory":false,"type":"A"},{"name":"TEAM","description":"Team Name","length":40,"mandatory":false,"type":"A"},{"name":"LEAG","description":"League Name","length":40,"mandatory":false,"type":"A"},{"name":"WHLO","description":"Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"WHSL","description":"Location","length":10,"mandatory":false,"type":"A"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":false,"type":"A"},{"name":"ORQT","description":"Ordered Quantity","length":15,"mandatory":false,"type":"A"},{"name":"RIDL","description":"Order Line","length":5,"mandatory":false,"type":"N"}],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"DLIX","description":"Delivery Number","length":11,"mandatory":true,"type":"N"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ea2d58cd-6a90-41fe-a04b-c84cbe0083d4":{"uuid":"ea2d58cd-6a90-41fe-a04b-c84cbe0083d4","updated":1683539131398,"updatedBy":"M3CONSADMX","created":1674638484665,"createdBy":"M3CONSADMX","apiVersion":"0.21","beVersion":"16.0.0.20230216180900.6","language":"GROOVY","codeHash":"C1C1B6FE825A71654060555236FFFAF9BEB9EA39A810F362667438246C76CB65","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIGxpc3QgZGF0YSBmb3IgbGlnaHRuaW5nIHBpY2sgc3lzdGVtLiBMaWdodG5pbmcgUGljayBpcyBhIHBpY2stdG8tbGlnaHQgc3lzdGVtIHVzZWQgZm9yIAogKiBwaWNraW5nIG9yZGVyZWQgaXRlbXMgZnJvbSBzaGVsdmVzIGFuZCBwYWNraW5nIHRoZW0gYXMgb25lIGRlbGl2ZXJ5IGZvciBhbiBvcmRlci4KICoKICogTmFtZTogRVhUMDAxTUkuTHN0TFBEYXRhCiAqIERlc2NyaXB0aW9uOiBMaXN0IGRldGFpbHMgb2YgaXRlbXMgdG8gYmUgcGlja2VkLgogKiBEYXRlICAgICAgIENoYW5nZWQgQnkgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb24KICogMjAyMzAxMzAgICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgICAgICBJbml0aWFsIGRldmVsb3BtZW50IGZyb20gTUFLIEFHUzAwMU1JLkxzdExQRGF0YQogKgogKi8KaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwCgpwdWJsaWMgY2xhc3MgTHN0TFBEYXRhIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIKCiAgcHVibGljIExzdExQRGF0YShNSUFQSSBtaSwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICB9CgogIC8vR2xvYmFsIFZhcmlhYmxlcwogIHByaXZhdGUgaW50IGlDT05PLCBpRExJWCwgbWF4UGFnZVNpemUgPSAxMDAwMAogIHByaXZhdGUgU3RyaW5nIGlESVZJLHRlbXBPUk5PPSIiLHVzZXJEZWZpbmVkRmllbGQzID0gIiIKCgogIEhhc2hNYXAgPCBTdHJpbmcsIEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+PiBvcmRlckhlYWRlciA9IG5ldyBIYXNoTWFwIDwgPiAoKQogIEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+IG9yZGVyRGV0YWlscyA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLCBTdHJpbmcgPiAoKQogIEhhc2hNYXAgPCBTdHJpbmcsIEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+PiBhbGxvY2F0aW9uSGVhZGVyID0gbmV3IEhhc2hNYXAgPCAgPiAoKQogIEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+IGFsbG9jYXRpb25EZWF0aWxzID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsIFN0cmluZyA+ICgpCgogIHB1YmxpYyB2b2lkIG1haW4oKSB7CiAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyBwcm9ncmFtLkxEQVpELkNPTk8gYXMgSW50ZWdlciA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKSBhcyBJbnRlZ2VyCiAgICBpRElWSSA9IChtaS5pbkRhdGEuZ2V0KCJESVZJIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJESVZJIikudHJpbSgpLmlzRW1wdHkoKSkgPyBwcm9ncmFtLkxEQVpELkRJVkkgOiBtaS5pbkRhdGEuZ2V0KCJESVZJIikKICAgIGlETElYID0gKG1pLmluRGF0YS5nZXQoIkRMSVgiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRMSVgiKS50cmltKCkuaXNFbXB0eSgpKSA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJETElYIikgYXMgSW50ZWdlcgoKCiAgICBib29sZWFuIHZhbGlkSW5wdXQgPSB2YWxpZGF0ZUlucHV0KGlDT05PLCBpRExJWCkgLy9DaGVjayBpZiBpbnB1dHMgYXJlIHZhbGlkLgogICAgaWYgKHZhbGlkSW5wdXQpIHsKICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNMIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJVUklUTk8iLCAiVVJSSURMIiwgIlVSUklETiIpLmJ1aWxkKCkgLy9HZXQgZGVsaXZlcnkgcmVsYXRlZCBpbmZvcm1hdGlvbgogICAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgICBjb250YWluZXIuc2V0KCJVUkNPTk8iLCBpQ09OTyBhcyBJbnRlZ2VyKQogICAgICBjb250YWluZXIuc2V0KCJVUkRMSVgiLCBpRExJWCBhcyBJbnRlZ2VyKQogICAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMixtYXhQYWdlU2l6ZSwgZGVsaXZlcnlMaW5lc0RldGFpbHMpCiAgICAgIHNldE91dHB1dCgpCiAgICB9IGVsc2UgewogICAgICByZXR1cm4KICAgIH0KICB9CiAgQ2xvc3VyZTw/PiBkZWxpdmVyeUxpbmVzRGV0YWlscyA9IHsKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPgogICAgICBTdHJpbmcgUklETiA9IGNvbnRhaW5lci5nZXQoIlVSUklETiIpCiAgICAgIFN0cmluZyBSSURMID0gY29udGFpbmVyLmdldCgiVVJSSURMIikKICAgICAgU3RyaW5nIElUTk8gPSBjb250YWluZXIuZ2V0KCJVUklUTk8iKQogICAgICBTdHJpbmcgT1JOUiA9IGdldFRlbXBvcmFyeU9yZGVyTnVtYmVyKFJJRE4pCiAgICAgIGlmKE9STlIhPW51bGwmJiFPUk5SLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgICBnZXRQbGF5ZXJMaW5lRGV0YWlscyhPUk5SLCBSSURMLCBJVE5PKQogICAgICB9ZWxzZQogICAgICB7CiAgICAgICAgbWkuZXJyb3IoIlRlbXBvcmFyeSBPcmRlciBub3QgZm91bmQgZm9yIHRoZSBvcmRlciAiICsgUklETikKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogIH0KCiAgLyoqCiAgICpWYWxpZGF0ZSBpbnB1dHMKICAgKiBAcGFyYW1zIGludCBDT05PICwgaW50IERMSVgKICAgKiBAcmV0dXJuIGJvb2xlYW4KICAgKi8KICBwcml2YXRlIGJvb2xlYW4gdmFsaWRhdGVJbnB1dChpbnQgaUNPTk8sIGludCBpRExJWCkgewogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuQ09OTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJNTlMwOTVNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIC8vVmFsaWRhdGUgRGVsaXZlcnkgTnVtYmVyCiAgICBkZWYgcGFyYW1zRExJWCA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRExJWCI6IGlETElYLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrRExJWCA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkRMSVggPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgZGVsaXZlcnkgTnVtYmVyICIgKyBpRExJWCkKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1XUzQxME1JIiwgIkdldEhlYWQiLCBwYXJhbXNETElYLCBjYWxsYmFja0RMSVgpCgogICAgcmV0dXJuIHRydWUKCiAgfQoKICAvKioKICAgKkdldCBUZW1wb3JhcnkgT3JkZXIgTnVtYmVyIGZvciB0aGUgZmluYWwgT3JkZXIgTnVtYmVyCiAgICogQHBhcmFtcyBTdHJpbmcgUklETgogICAqIEByZXR1cm4gU3RyaW5nCiAgICovCiAgcHJpdmF0ZSBTdHJpbmcgZ2V0VGVtcG9yYXJ5T3JkZXJOdW1iZXIoU3RyaW5nIFJJRE4pIHsKICAgIFN0cmluZyBPUk5PID0gIiIKICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiT1JOTyI6UklETi50b1N0cmluZygpLnRyaW0oKV0KICAgIGRlZiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gIT0gbnVsbCkgewogICAgICAgICAgT1JOTyA9IHJlc3BvbnNlLk9STk8KICAgICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJPSVMyNzVNSSIsICJHZXRUbXBPcmRlclN0YXQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgcmV0dXJuIE9STk8KICB9CgoKICAvKioKICAgKiBHZXQgUGxheWVyIExpbmUgRGV0YWlscwogICAqIEBwYXJhbXMgU3RyaW5nIE9STlIgLCBTdHJpbmcgUklETCwgU3RyaW5nIElUTk8KICAgKiBAcmV0dXJuIHZvaWQKICAgKi8KICBwcml2YXRlIHZvaWQgZ2V0UGxheWVyTGluZURldGFpbHMoU3RyaW5nIE9STlIsIFN0cmluZyBSSURMLCBTdHJpbmcgSVROTykgewogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUU1RMIikuaW5kZXgoIjMwIikuc2VsZWN0aW9uKCJFWFBMSUQiLCAiRVhXSExPIiwgIkVYVURGMyIsICJFWE9SUVQiLCAiRVhPUk5PIiwgIkVYUE9OUiIsICJFWElUTk8iLCJFWE9STlIiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJFWERJVkkiLCBpRElWSSkKICAgIGNvbnRhaW5lci5zZXQoIkVYT1JOUiIsIE9STlIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPTlIiLCBSSURMIGFzIEludGVnZXIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPU1giLCAwKQogICAgY29udGFpbmVyLnNldCgiRVhJVE5PIiwgSVROTykKICAgIAogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDYsIGdldFBsYXllckxpbmVEZXRhaWxzUmVzdWx0KQogIH0KICBDbG9zdXJlIDwgPyA+IGdldFBsYXllckxpbmVEZXRhaWxzUmVzdWx0ID0gewogICAgREJDb250YWluZXIgY29udGFpbmVyUmVzdWx0IC0+CiAgICAgIFN0cmluZyB3YXJlaG91c2UgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWFdITE8iKQogICAgICBTdHJpbmcgcGxheWVySUQgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWFBMSUQiKQogICAgICBTdHJpbmcgdXNlckRlZmluZWRGaWVsZDMgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWFVERjMiKQogICAgICBTdHJpbmcgb3JkZXJRdWFudGl0eSA9IGNvbnRhaW5lclJlc3VsdC5nZXQoIkVYT1JRVCIpCiAgICAgIFN0cmluZyBvcmRlck51bWJlciA9IGNvbnRhaW5lclJlc3VsdC5nZXQoIkVYT1JOTyIpCiAgICAgIFN0cmluZyB0ZW1wb3JhcnlPcmRlck51bWJlciA9IGNvbnRhaW5lclJlc3VsdC5nZXQoIkVYT1JOUiIpCiAgICAgIFN0cmluZyBsaW5lTnVtYmVyID0gY29udGFpbmVyUmVzdWx0LmdldCgiRVhQT05SIikKICAgICAgU3RyaW5nIGl0ZW1OdW1iZXIgPSBjb250YWluZXJSZXN1bHQuZ2V0KCJFWElUTk8iKQogICAgICBTdHJpbmcgSGVhZGVyID0gcGxheWVySUQrIiwiK3RlbXBvcmFyeU9yZGVyTnVtYmVyLnRyaW0oKSArICIsIiArIGxpbmVOdW1iZXIudHJpbSgpCiAgICAgIG9yZGVyRGV0YWlscyA9IG5ldyBIYXNoTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+ICgpCiAgICAgIGlmIChvcmRlckhlYWRlci5jb250YWluc0tleShIZWFkZXIpKSB7CiAgICAgICAgb3JkZXJEZXRhaWxzID0gb3JkZXJIZWFkZXIuZ2V0KEhlYWRlcikKICAgICAgICBvcmRlckhlYWRlci5yZW1vdmUoSGVhZGVyKQogICAgICB9CgoKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiV0hMTyIsIHdhcmVob3VzZSkKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiUExJRCIsIHBsYXllcklEKQogICAgICBvcmRlckRldGFpbHMucHV0KCJVREYzIiwgIiIpCiAgICAgIG9yZGVyRGV0YWlscy5wdXQoIk9SUVQiLCBvcmRlclF1YW50aXR5KQogICAgICBvcmRlckRldGFpbHMucHV0KCJJVE5PIiwgaXRlbU51bWJlcikKICAgICAgb3JkZXJIZWFkZXIucHV0KEhlYWRlciwgb3JkZXJEZXRhaWxzKQoKICAgICAgZ2V0UGxheWVySGVhZGVyRGV0YWlscyhwbGF5ZXJJRCx0ZW1wb3JhcnlPcmRlck51bWJlcixsaW5lTnVtYmVyKQogICAgICB1cGRhdGVQbGF5ZXJMaW5lRGVsaXZlcnlEZXRhaWxzKHBsYXllcklELCBsaW5lTnVtYmVyLCBpdGVtTnVtYmVyLHRlbXBvcmFyeU9yZGVyTnVtYmVyKQogICAgICB1cGRhdGVVc2VyRGVmaW5lZEZpZWxkRGV0YWlscyhwbGF5ZXJJRCwgdGVtcG9yYXJ5T3JkZXJOdW1iZXIsIGxpbmVOdW1iZXIsIGl0ZW1OdW1iZXIsICIiKQogICAgICBnZXRBbGxvY2F0aW9uRGV0YWlscyhwbGF5ZXJJRCxvcmRlck51bWJlciAsIGxpbmVOdW1iZXIsIGl0ZW1OdW1iZXIsdGVtcG9yYXJ5T3JkZXJOdW1iZXIpCiAgfQoKICAvKioKICAgKkdldCBoZWFkZXIgbGV2ZWwgZGV0YWlscyBvZiB0aGUgcGxheWVyIGZyb20gRVhUU1RIIHRhYmxlLgogICAqIEBwYXJhbXMgU3RyaW5nIFBMSUQsU3RyaW5nIE9STlIsIFN0cmluZyBSSURMCiAgICogQHJldHVybgogICAqLwogIHByaXZhdGUgdm9pZCBnZXRQbGF5ZXJIZWFkZXJEZXRhaWxzKFN0cmluZyBQTElELFN0cmluZyBPUk5SLCBTdHJpbmcgUklETCkgewogICAgU3RyaW5nIEhlYWRlciA9IFBMSUQrIiwiK09STlIgKyAiLCIgKyBSSURMCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRTVEgiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkVYUExOTSIsICJFWFBMTlUiLCAiRVhURUFNIiwgIkVYTEVBRyIsIkVYT1JOTyIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgY29udGFpbmVyLnNldCgiRVhQTElEIiwgUExJRCkKICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsKICAgICAgb3JkZXJEZXRhaWxzID0gbmV3IEhhc2hNYXAgPCBTdHJpbmcsU3RyaW5nID4gKCkKICAgICAgaWYgKG9yZGVySGVhZGVyLmNvbnRhaW5zS2V5KEhlYWRlcikpIHsKICAgICAgICBvcmRlckRldGFpbHMgPSBvcmRlckhlYWRlci5nZXQoSGVhZGVyKQogICAgICAgIG9yZGVySGVhZGVyLnJlbW92ZShIZWFkZXIpCiAgICAgIH0KICAgICAgU3RyaW5nIHBsYXllck51bWJlciA9IGNvbnRhaW5lci5nZXQoIkVYUExOVSIpCiAgICAgIFN0cmluZyB0ZWFtID0gY29udGFpbmVyLmdldCgiRVhURUFNIikKICAgICAgU3RyaW5nIGxlYWd1ZSA9IGNvbnRhaW5lci5nZXQoIkVYTEVBRyIpCiAgICAgIFN0cmluZyBwbGF5ZXJOYW1lID0gY29udGFpbmVyLmdldCgiRVhQTE5NIikKICAgICAgU3RyaW5nIG9yZGVyTnVtYmVyID0gY29udGFpbmVyLmdldCgiRVhPUk5PIikKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiUExOVSIsIHBsYXllck51bWJlcikKICAgICAgb3JkZXJEZXRhaWxzLnB1dCgiVEVBTSIsIHRlYW0pCiAgICAgIG9yZGVyRGV0YWlscy5wdXQoIkxFQUciLCBsZWFndWUpCiAgICAgIG9yZGVyRGV0YWlscy5wdXQoIlBMTk0iLCBwbGF5ZXJOYW1lKQogICAgICBvcmRlckRldGFpbHMucHV0KCJPUk5PIiwgb3JkZXJOdW1iZXIpCiAgICAgIG9yZGVySGVhZGVyLnB1dChIZWFkZXIsIG9yZGVyRGV0YWlscykKICAgIH0KCiAgfQoKICAvKioKICAgKlVwZGF0ZSBFWFRTVEwgdGFibGUgd2l0aCBkZWxpdmVyeSBJbmZvcm1hdGlvbgogICAqIEBwYXJhbXMgIFN0cmluZyBQTElELCAgU3RyaW5nIFJJREwsIFN0cmluZyBJVE5PLFN0cmluZyBPUk5SCiAgICogQHJldHVybgogICAqLwogIHByaXZhdGUgdm9pZCB1cGRhdGVQbGF5ZXJMaW5lRGVsaXZlcnlEZXRhaWxzKFN0cmluZyBQTElELCBTdHJpbmcgUklETCwgU3RyaW5nIElUTk8sU3RyaW5nIE9STlIpIHsKICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVFNUTCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgY29udGFpbmVyLnNldCgiRVhQTElEIiwgUExJRCkKICAgIGNvbnRhaW5lci5zZXQoIkVYT1JOUiIsIE9STlIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPTlIiLCBSSURMIGFzIEludGVnZXIpCiAgICBjb250YWluZXIuc2V0KCJFWElUTk8iLCBJVE5PKQogICAgcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVEZWxpdmVyeUluZm9ybWF0aW9uKQogIH0KCiAgQ2xvc3VyZTw/PiB1cGRhdGVEZWxpdmVyeUluZm9ybWF0aW9uID0gewogICAgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERMSVgiLCBpRExJWCkKICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgfQoKCiAgLyoqCiAgICpVcGRhdGUgRVhUU1RMIHRhYmxlIHdpdGggVURGMyBmaWVsZAogICAqIEBwYXJhbXMgU3RyaW5nIFBMSUQgLCBTdHJpbmcgT1JOTywgU3RyaW5nIFBPTlIsIFN0cmluZyBJVE5PLCBTdHJpbmcgVURGMwogICAqIEByZXR1cm4KICAgKi8KICBwcml2YXRlIHZvaWQgdXBkYXRlVXNlckRlZmluZWRGaWVsZERldGFpbHMoU3RyaW5nIFBMSUQsIFN0cmluZyBPUk5SLCBTdHJpbmcgUE9OUiwgU3RyaW5nIElUTk8sIFN0cmluZyBVREYzKSB7CiAgICB1c2VyRGVmaW5lZEZpZWxkMyA9IFVERjMKICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVFNUTCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgY29udGFpbmVyLnNldCgiRVhQTElEIiwgUExJRCkKICAgIGNvbnRhaW5lci5zZXQoIkVYT1JOUiIsIE9STlIpCiAgICBjb250YWluZXIuc2V0KCJFWFBPTlIiLCBQT05SIGFzIEludGVnZXIpCiAgICBjb250YWluZXIuc2V0KCJFWElUTk8iLCBJVE5PKQogICAgcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykKCiAgfQoKICBDbG9zdXJlPD8+IHVwZGF0ZUNhbGxCYWNrID0gewogICAgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPgogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVERjMiLCB1c2VyRGVmaW5lZEZpZWxkMykKICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgfQoKCiAgLyoqCiAgICogR2V0IEFsbG9jYXRpb24gRGV0YWlscyBmcm9tIE1JVEFMTyB0YWJsZQogICAqIEBwYXJhbXMgU3RyaW5nIFBMSUQsU3RyaW5nIFJJRE4gLCBpbnQgUklETCxTdHJpbmcgSVROTywgU3RyaW5nIE9STlIKICAgKiBAcmV0dXJuCiAgICovCiAgcHJpdmF0ZSB2b2lkIGdldEFsbG9jYXRpb25EZXRhaWxzKFN0cmluZyBQTElELFN0cmluZyBSSUROLCBTdHJpbmcgUklETCwgU3RyaW5nIElUTk8sU3RyaW5nIE9STlIpIHsKICAgIFN0cmluZyBXSExPID0gIiIKICAgIFN0cmluZyBIZWFkZXIgPSBQTElEKyIsIitPUk5SICsgIiwiICsgUklETAogICAgb3JkZXJEZXRhaWxzID0gbmV3IEhhc2hNYXAgPCA+ICgpCiAgICBpZiAob3JkZXJIZWFkZXIuY29udGFpbnNLZXkoSGVhZGVyKSkgewogICAgICBvcmRlckRldGFpbHMgPSBvcmRlckhlYWRlci5nZXQoSGVhZGVyKQogICAgICBXSExPID0gb3JkZXJEZXRhaWxzLmdldCgiV0hMTyIpCiAgICB9CgogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUQUxPIikuaW5kZXgoIjcwIikuc2VsZWN0aW9uKCJNUVdIU0wiLCAiTVFBTFFUIiwgIk1RUklETiIsICJNUVJJREwiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQogICAgY29udGFpbmVyLnNldCgiTVFDT05PIiwgaUNPTk8pCiAgICBjb250YWluZXIuc2V0KCJNUVdITE8iLCBXSExPKQogICAgY29udGFpbmVyLnNldCgiTVFJVE5PIiwgSVROTykKICAgIGNvbnRhaW5lci5zZXQoIk1RVFRZUCIsIDMxKQogICAgY29udGFpbmVyLnNldCgiTVFSSUROIiwgUklETikKICAgIGNvbnRhaW5lci5zZXQoIk1RUklETCIsIFJJREwgYXMgSW50ZWdlcikKICAgIAogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDYsIGdldEFsbG9jYXRpb25EZXRhaWxzKQogIH0KCgogIENsb3N1cmU8Pz4gZ2V0QWxsb2NhdGlvbkRldGFpbHMgPSB7CgogICAgREJDb250YWluZXIgY29udGFpbmVyIC0+CiAgICAgIFN0cmluZyBXSFNMID0gY29udGFpbmVyLmdldCgiTVFXSFNMIikKICAgICAgU3RyaW5nIEFMUVQgPSBjb250YWluZXIuZ2V0KCJNUUFMUVQiKQogICAgICBTdHJpbmcgUklETiA9IGNvbnRhaW5lci5nZXQoIk1RUklETiIpCiAgICAgIFN0cmluZyBSSURMID0gY29udGFpbmVyLmdldCgiTVFSSURMIikKICAgICAgU3RyaW5nIE9STlIgPSBnZXRUZW1wb3JhcnlPcmRlck51bWJlcihSSUROKQogICAgICBTdHJpbmcgSGVhZGVyID0gT1JOUi50cmltKCkgKyAiLCIgKyBSSURMLnRyaW0oKQogICAgICBhbGxvY2F0aW9uRGVhdGlscyA9IG5ldyBIYXNoTWFwIDwgPiAoKQogICAgICBpZiAoYWxsb2NhdGlvbkhlYWRlci5jb250YWluc0tleShIZWFkZXIpKSB7CiAgICAgICAgYWxsb2NhdGlvbkRlYXRpbHMgPSBhbGxvY2F0aW9uSGVhZGVyLmdldChIZWFkZXIpCiAgICAgICAgYWxsb2NhdGlvbkhlYWRlci5yZW1vdmUoSGVhZGVyKQogICAgICB9CgogICAgICBhbGxvY2F0aW9uRGVhdGlscy5wdXQoIldIU0wiLCBXSFNMKQogICAgICBhbGxvY2F0aW9uRGVhdGlscy5wdXQoIkFMUVQiLCBBTFFUKQogICAgICBhbGxvY2F0aW9uSGVhZGVyLnB1dChIZWFkZXIsIGFsbG9jYXRpb25EZWF0aWxzKQogIH0KCiAgLyoqCiAgICpTZXQgQVBJIE91dHB1dAogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCiAgcHJpdmF0ZSB2b2lkIHNldE91dHB1dCgpIHsKICAgIGZvciAoU3RyaW5nIGtleTogb3JkZXJIZWFkZXIua2V5U2V0KCkpIHsKICAgICAgZG91YmxlIHF1YW50aXR5ID0gMAogICAgICBTdHJpbmcgUExJRCA9IGtleS5zcGxpdCgiLCIpWzBdCiAgICAgIFN0cmluZyBSSUROID0ga2V5LnNwbGl0KCIsIilbMV0KICAgICAgU3RyaW5nIFJJREwgPSBrZXkuc3BsaXQoIiwiKVsyXQogICAgICBvcmRlckRldGFpbHMgPSBvcmRlckhlYWRlci5nZXQoa2V5KQogICAgICBTdHJpbmcgSVROTyA9IG9yZGVyRGV0YWlscy5nZXQoIklUTk8iKQogICAgICBTdHJpbmcgV0hMTyA9IG9yZGVyRGV0YWlscy5nZXQoIldITE8iKQogICAgICBTdHJpbmcgVURGMyA9IG9yZGVyRGV0YWlscy5nZXQoIlVERjMiKQogICAgICBTdHJpbmcgT1JRVCA9IG9yZGVyRGV0YWlscy5nZXQoIk9SUVQiKQogICAgICBTdHJpbmcgUExOTSA9IG9yZGVyRGV0YWlscy5nZXQoIlBMTk0iKQogICAgICBTdHJpbmcgUExOVSA9IG9yZGVyRGV0YWlscy5nZXQoIlBMTlUiKQogICAgICBTdHJpbmcgVEVBTSA9IG9yZGVyRGV0YWlscy5nZXQoIlRFQU0iKQogICAgICBTdHJpbmcgTEVBRyA9IG9yZGVyRGV0YWlscy5nZXQoIkxFQUciKQogICAgICBTdHJpbmcgT1JOTyA9IG9yZGVyRGV0YWlscy5nZXQoIk9STk8iKQogICAgICBTdHJpbmcgV0hTTCA9IiIKICAgICAgU3RyaW5nIEFMUVQgPSAiMCIKCgogICAgICBhbGxvY2F0aW9uRGVhdGlscyA9IGFsbG9jYXRpb25IZWFkZXIuZ2V0KFJJRE4udHJpbSgpKyIsIitSSURMLnRyaW0oKSkKICAgICAgaWYoYWxsb2NhdGlvbkRlYXRpbHMhPW51bGwpCiAgICAgIHsKICAgICAgICBXSFNMID0gYWxsb2NhdGlvbkRlYXRpbHMuZ2V0KCJXSFNMIikKICAgICAgICBBTFFUID0gYWxsb2NhdGlvbkRlYXRpbHMuZ2V0KCJBTFFUIikKICAgICAgfQogICAgICBpZiAoVURGMyA9PSBudWxsKSBVREYzID0gIiIKICAgICAgaWYgKEFMUVQgPT0gbnVsbCB8fCBBTFFULnRyaW0oKS5pc0VtcHR5KCkpIEFMUVQgPSAiMCIKICAgICAgaWYgKE9SUVQgPT0gbnVsbCB8fCBPUlFULnRyaW0oKS5pc0VtcHR5KCkpIE9SUVQgPSAiMCIKICAgICAgbWkub3V0RGF0YS5wdXQoIk9STk8iLCBPUk5PKQogICAgICBtaS5vdXREYXRhLnB1dCgiUklETCIsIFJJREwpCiAgICAgIG1pLm91dERhdGEucHV0KCJXSFNMIiwgV0hTTCkKICAgICAgbWkub3V0RGF0YS5wdXQoIklUTk8iLCBJVE5PKQogICAgICBtaS5vdXREYXRhLnB1dCgiV0hMTyIsIFdITE8pCiAgICAgIG1pLm91dERhdGEucHV0KCJETElYIiwgaURMSVggYXMgU3RyaW5nKQoKICAgICAgZG91YmxlIGRvdWJsZUFMUVQgPSBEb3VibGUucGFyc2VEb3VibGUoQUxRVCkKICAgICAgZG91YmxlIGRvdWJsZU9SUVQgPSBEb3VibGUucGFyc2VEb3VibGUoT1JRVCkKICAgICAgaWYgKHF1YW50aXR5IDw9IGRvdWJsZUFMUVQpIHsKICAgICAgICBtaS5vdXREYXRhLnB1dCgiT1JRVCIsIE9SUVQpCiAgICAgICAgaWYgKFVERjMudHJpbSgpLmlzRW1wdHkoKSAmJiBxdWFudGl0eSA8IGRvdWJsZUFMUVQpIHsKICAgICAgICAgIHF1YW50aXR5ID0gcXVhbnRpdHkgKyBkb3VibGVPUlFUCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExJRCIsIFBMSUQpCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExOTSIsIFBMTk0pCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExOVSIsIFBMTlUpCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiVEVBTSIsIFRFQU0pCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiTEVBRyIsIExFQUcpCiAgICAgICAgICB1cGRhdGVVc2VyRGVmaW5lZEZpZWxkRGV0YWlscyhQTElELCBSSUROLCBSSURMLCBJVE5PLCBXSFNMKQogICAgICAgIH0KICAgICAgfQogICAgICBtaS53cml0ZSgpCiAgICB9CiAgfQoKfQo="}}}