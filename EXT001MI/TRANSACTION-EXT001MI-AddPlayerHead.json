{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"AddPlayerHead":{"sourceUuid":"846c5b9a-89ef-4cc7-ba31-3ea56d6de037","name":"AddPlayerHead","program":"EXT001MI","description":"Add Player Header Information","active":true,"multi":false,"modified":1705988064636,"modifiedBy":"ABHISHEK","outputFields":[{"name":"PLID","description":"PlayerID","length":15,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"PLID","description":"Player ID","length":15,"mandatory":true,"type":"A"},{"name":"ORNR","description":"Customer Order Number","length":10,"mandatory":false,"type":"A"},{"name":"ORNO","description":"Customer Order Number","length":10,"mandatory":false,"type":"A"},{"name":"OREF","description":"Our Reference","length":30,"mandatory":false,"type":"A"},{"name":"PLNM","description":"Player Name","length":60,"mandatory":false,"type":"A"},{"name":"PLNU","description":"Player Number","length":10,"mandatory":false,"type":"A"},{"name":"TEAM","description":"Team Name","length":40,"mandatory":false,"type":"A"},{"name":"LEAG","description":"League Name","length":40,"mandatory":false,"type":"A"},{"name":"GRBY","description":"Grouping Method","length":10,"mandatory":false,"type":"A"},{"name":"BGBY","description":"Packaging Group","length":10,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Customer Number","length":10,"mandatory":false,"type":"A"},{"name":"ADID","description":"Address Number","length":6,"mandatory":false,"type":"A"},{"name":"ORDT","description":"Order Date","length":8,"mandatory":false,"type":"N"},{"name":"UDF1","description":"User-defined field 1","length":5,"mandatory":false,"type":"A"},{"name":"UDF2","description":"User-defined field 2","length":5,"mandatory":false,"type":"A"},{"name":"UDF3","description":"User-defined field 3","length":10,"mandatory":false,"type":"A"},{"name":"UDF4","description":"User-defined field 4","length":20,"mandatory":false,"type":"A"},{"name":"UDF5","description":"User-defined field 5","length":20,"mandatory":false,"type":"A"},{"name":"UDF6","description":"User-defined field 6","length":30,"mandatory":false,"type":"A"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"846c5b9a-89ef-4cc7-ba31-3ea56d6de037":{"uuid":"846c5b9a-89ef-4cc7-ba31-3ea56d6de037","updated":1707293672756,"updatedBy":"ABHISHEK","created":1681544336246,"createdBy":"M3CONSADMX","apiVersion":"0.21","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"4197FE9A89B5ECDC9939F4C94958C682B75D5A70953AA6CFA224B450A2565FF6","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDAwMU1JLkFkZFBsYXllckhlYWQKICogRGVzY3JpcHRpb246IEFkZGluZyByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZSAKICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uCiAqMjAyMzA0MDMgIFN1cml5YU5AZm9ydHVkZS5jbyAgICAgQWRkaW5nIHJlY29yZHMgdG8gRVhUU1RIIHRhYmxlICovCgppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUKaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXIKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGUKCnB1YmxpYyBjbGFzcyBBZGRQbGF5ZXJIZWFkIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UKICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIKICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQoKICBwcml2YXRlIFN0cmluZyBpRElWSSwgaVBMSUQsIGlPUk5SLCBpT1JOTywgaU9SRUYsIGlQTE5NLCBpUExOVSwgaVRFQU0sIGlMRUFHLCBpR1JCWSwgaUJHQlksIGlDVU5PLCBpQURJRCwgaVVERjEsIGlVREYyLCBpVURGMywgaVVERjQsIGlVREY1LCBpVURGNiwgcGxheWVySUQKICBwcml2YXRlIGludCBpQ09OTywgbWF4UGFnZVNpemUgPSAxMDAwMCwgaU9SRFQKICBib29sZWFuIGlzT3JkZXJGb3VuZCA9IGZhbHNlLCB2YWxpZElucHV0ID0gdHJ1ZQoKICBwdWJsaWMgQWRkUGxheWVySGVhZChNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFV0aWxpdHlBUEkgdXRpbGl0eSkgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaURJVkkgPSAobWkuaW5EYXRhLmdldCgiRElWSSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiRElWSSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5ESVZJIDogbWkuaW5EYXRhLmdldCgiRElWSSIpCiAgICBpUExJRCA9IChtaS5pbkRhdGEuZ2V0KCJQTElEIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQTElEIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBMSUQiKQogICAgaU9STlIgPSAobWkuaW5EYXRhLmdldCgiT1JOUiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JOUiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUk5SIikKICAgIGlPUk5PID0gKG1pLmluRGF0YS5nZXQoIk9STk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JOTyIpCiAgICBpT1JFRiA9IChtaS5pbkRhdGEuZ2V0KCJPUkVGIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUkVGIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9SRUYiKQogICAgaVBMTk0gPSAobWkuaW5EYXRhLmdldCgiUExOTSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUExOTSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQTE5NIikKICAgIGlQTE5VID0gKG1pLmluRGF0YS5nZXQoIlBMTlUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBMTlUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUExOVSIpCiAgICBpVEVBTSA9IChtaS5pbkRhdGEuZ2V0KCJURUFNIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJURUFNIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRFQU0iKQogICAgaUxFQUcgPSAobWkuaW5EYXRhLmdldCgiTEVBRyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiTEVBRyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJMRUFHIikKICAgIGlHUkJZID0gKG1pLmluRGF0YS5nZXQoIkdSQlkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkdSQlkiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiR1JCWSIpCiAgICBpQkdCWSA9IChtaS5pbkRhdGEuZ2V0KCJCR0JZIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJCR0JZIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkJHQlkiKQogICAgaUNVTk8gPSAobWkuaW5EYXRhLmdldCgiQ1VOTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ1VOTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJDVU5PIikKICAgIGlBRElEID0gKG1pLmluRGF0YS5nZXQoIkFESUQiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkFESUQiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQURJRCIpCiAgICBpVURGMSA9IChtaS5pbkRhdGEuZ2V0KCJVREYxIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREYxIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjEiKQogICAgaVVERjIgPSAobWkuaW5EYXRhLmdldCgiVURGMiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGMiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREYyIikKICAgIGlVREYzID0gKG1pLmluRGF0YS5nZXQoIlVERjMiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjMiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGMyIpCiAgICBpVURGNCA9IChtaS5pbkRhdGEuZ2V0KCJVREY0IikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREY0IikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjQiKQogICAgaVVERjUgPSAobWkuaW5EYXRhLmdldCgiVURGNSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGNSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREY1IikKICAgIGlVREY2ID0gKG1pLmluRGF0YS5nZXQoIlVERjYiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjYiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGNiIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaU9SRFQgPSAobWkuaW5EYXRhLmdldCgiT1JEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JEVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk9SRFQiKSBhcyBJbnRlZ2VyCgogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZiAodmFsaWRJbnB1dCkgewogICAgICBjaGVja0lmT3JkZXJFeGlzdHMoKQogICAgICBpbnNlcnRSZWNvcmQoKQogICAgICBtaS5vdXREYXRhLnB1dCgiUExJRCIsIHBsYXllcklEKQogICAgICBtaS53cml0ZSgpCiAgICB9CiAgfQoKICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybiAKICAgKi8KICBwdWJsaWMgdm9pZCB2YWxpZGF0ZUlucHV0KCkgewoKICAgIC8vVmFsaWRhdGUgQ29tcGFueSBOdW1iZXIKICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBDbG9zdXJlPD8+IGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgcmV0dXJuIAogICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJNTlMwOTVNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQoKICAgIC8vVmFsaWRhdGUgRGl2aXNpb24KICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiRElWSSI6IGlESVZJLnRvU3RyaW5nKCkudHJpbSgpXQogICAgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgaWYgKHJlc3BvbnNlLkRJVkkgPT0gbnVsbCkgewogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIERpdmlzaW9uICIgKyBpRElWSSkKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4KICAgICAgfQogICAgfQoKICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzEwME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgaWYgKCFpQ1VOTy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgQ3VzdG9tZXIgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiQ1VOTyI6IGlDVU5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuQ1VOTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDdXN0b21lciBOdW1iZXIgIiArIGlDVU5PKQogICAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgICByZXR1cm4gCiAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYxME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spCiAgICB9CgogICAgaWYgKCFpT1JOUi50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIC8vVmFsaWRhdGUgVGVtcG9yYXJ5IE9yZGVyIE51bWJlcgogICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPWEhFQUQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgIGNvbnRhaW5lci5zZXQoIk9BQ09OTyIsIGlDT05PKQogICAgICBjb250YWluZXIuc2V0KCJPQU9STk8iLCBpT1JOUikKCiAgICAgIGlmICghcXVlcnkucmVhZChjb250YWluZXIpKSB7CiAgICAgICAgbWkuZXJyb3IoIlRlbXBvcmFyeSBPcmRlciBOdW1iZXIgbm90IGZvdW5kICIgKyBpT1JOUikKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gCiAgICAgIH0KICAgIH0KCiAgICBpZiAoIWlPUk5PLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBPcmRlciBOdW1iZXIKICAgICAgcGFyYW1zID0gWyJPUk5PIjogaU9STk8udG9TdHJpbmcoKS50cmltKCldCiAgICAgIGNhbGxiYWNrID0gewogICAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5PUk5PID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIE9yZGVyIE51bWJlciAiICsgaU9STk8pCiAgICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICAgIHJldHVybiAKICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiT0lTMTAwTUkiLCAiR2V0T3JkZXJIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCiAgICBpZiAoIWlBRElELnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgLy9WYWxpZGF0ZSBBZGRyZXNzIElECiAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk9DVVNBRCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICAgY29udGFpbmVyLnNldCgiT1BDT05PIiwgaUNPTk8pCiAgICAgIGNvbnRhaW5lci5zZXQoIk9QQ1VOTyIsIGlDVU5PKQogICAgICBjb250YWluZXIuc2V0KCJPUEFEUlQiLCAxKQogICAgICBjb250YWluZXIuc2V0KCJPUEFESUQiLCBpQURJRCkKCiAgICAgIGlmICghcXVlcnkucmVhZChjb250YWluZXIpKSB7CiAgICAgICAgbWkuZXJyb3IoIkFkZHJlc3MgSUQgTm90IEZvdW5kICIgKyBpQURJRCkKICAgICAgICB2YWxpZElucHV0ID0gZmFsc2UKICAgICAgICByZXR1cm4gCiAgICAgIH0KICAgIH0KCiAgICBpZiAoaU9SRFQgIT0gMCkgewogICAgICAvL1ZhbGlkYXRlIERhdGUKICAgICAgU3RyaW5nIHNvdXJjZUZvcm1hdCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiZ2V0RnVsbEZvcm1hdCIsIG1pLmdldERhdGVGb3JtYXQoKSkKICAgICAgdmFsaWRJbnB1dCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiaXNEYXRlVmFsaWQiLCBpT1JEVCwgc291cmNlRm9ybWF0LnRvU3RyaW5nKCkpCiAgICAgIGlmICghdmFsaWRJbnB1dCkgewogICAgICAgIG1pLmVycm9yKCJPcmRlciBEYXRlIG5vdCBpbiAiICsgc291cmNlRm9ybWF0ICsgIiBmb3JtYXQuIFBsZWFzZSBDaGVjayAiICsgaU9SRFQpCiAgICAgICAgcmV0dXJuIAogICAgICB9IGVsc2UgewogICAgICAgIGlmICghc291cmNlRm9ybWF0LnRyaW0oKS5lcXVhbHMoInl5eXlNTWRkIikpIHsKICAgICAgICAgIGlPUkRUID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsICJjb252ZXJ0RGF0ZSIsIHNvdXJjZUZvcm1hdCwgInl5eXlNTWRkIiwgaU9SRFQpIC8vTWFpbnRhaW4gZGF0ZSBpbiBZTUQ4IGZvcm1hdCBpbiB0aGUgdGFibGUKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICAvKioKICAgKiBDaGVjayBpZiB0aGUgb3JkZXIgYWxyZWFkeSBleGlzdHMgaW4gRVhUU1RIIHRhYmxlIGFuZCBnZXQgUExJRCBpZiBhdmFpbGJsZS4KICAgKiBAcGFyYW1zCiAgICogQHJldHVybgogICAqLwoKICBwdWJsaWMgdm9pZCBjaGVja0lmT3JkZXJFeGlzdHMoKSB7CiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRTVEgiKS5zZWxlY3Rpb24oIkVYUExJRCIpLmluZGV4KCIxMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBpQ09OTykKICAgIGNvbnRhaW5lci5zZXQoIkVYRElWSSIsIGlESVZJKQogICAgY29udGFpbmVyLnNldCgiRVhPUk5SIiwgaU9STlIpCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMywgbWF4UGFnZVNpemUsIHJlc3VsdHNldCkKICB9CgogIENsb3N1cmUgPCA/ID4gcmVzdWx0c2V0ID0gewogICAgREJDb250YWluZXIgY29udGFpbmVyIC0+CiAgICBpc09yZGVyRm91bmQgPSB0cnVlCiAgICBpZiAocGxheWVySUQgPT0gbnVsbCB8fCBwbGF5ZXJJRC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIHBsYXllcklEID0gY29udGFpbmVyLmdldCgiRVhQTElEIikKCiAgICB9CiAgfQoKICAvKioKICAgKkluc2VydCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZQogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgaW5zZXJ0UmVjb3JkKCkgewogICAgREJBY3Rpb24gYWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkVYVFNUSCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgIERCQ29udGFpbmVyIHF1ZXJ5ID0gYWN0aW9uLmdldENvbnRhaW5lcigpCgogICAgaWYgKChpUExJRC50cmltKCkuaXNFbXB0eSgpIHx8IGlQTElELnRyaW0oKS5lcXVhbHMoIipBVVRPIikpKSAvL0dlbmVyYXRlIFBsYXllciBJRCBpZiBpdCBkb2Vzbid0IGV4aXN0cy4gCiAgICB7CiAgICAgIGlmIChpc09yZGVyRm91bmQpIHsKICAgICAgICBpbnQgU0VRTiA9IEludGVnZXIucGFyc2VJbnQocGxheWVySUQuc3Vic3RyaW5nKDEwKSkgKyAxIC8vSW5jcmVtZW50IHRoZSBzZXF1ZW5jZSBudW1iZXIgaWYgcGxheWVyIGlkIGZvdW5kLiAKICAgICAgICBwbGF5ZXJJRCA9IGlPUk5SICsgU3RyaW5nLmZvcm1hdCgiJTA1ZCIsIFNFUU4pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGxheWVySUQgPSBpT1JOUiArICIwMDAwMSIgLy9TdGFydCBmcm9tIHNlcXVlbmNlIG9uZSBpZiBuZXcgcGxheWVyIElELiAKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcGxheWVySUQgPSBpUExJRAogICAgfQogICAgcXVlcnkuc2V0KCJFWFBMSUQiLCBwbGF5ZXJJRCkKICAgIHF1ZXJ5LnNldCgiRVhESVZJIiwgaURJVkkpCiAgICBxdWVyeS5zZXQoIkVYT1JOUiIsIGlPUk5SKQogICAgcXVlcnkuc2V0KCJFWE9STk8iLCBpT1JOTykKICAgIHF1ZXJ5LnNldCgiRVhPUkVGIiwgaU9SRUYpCiAgICBxdWVyeS5zZXQoIkVYUExOTSIsIGlQTE5NKQogICAgcXVlcnkuc2V0KCJFWFBMTlUiLCBpUExOVSkKICAgIHF1ZXJ5LnNldCgiRVhURUFNIiwgaVRFQU0pCiAgICBxdWVyeS5zZXQoIkVYTEVBRyIsIGlMRUFHKQogICAgcXVlcnkuc2V0KCJFWEdSQlkiLCBpR1JCWSkKICAgIHF1ZXJ5LnNldCgiRVhCR0JZIiwgaUJHQlkpCiAgICBxdWVyeS5zZXQoIkVYQ1VOTyIsIGlDVU5PKQogICAgcXVlcnkuc2V0KCJFWEFESUQiLCBpQURJRCkKICAgIHF1ZXJ5LnNldCgiRVhVREYxIiwgaVVERjEpCiAgICBxdWVyeS5zZXQoIkVYVURGMiIsIGlVREYyKQogICAgcXVlcnkuc2V0KCJFWFVERjMiLCBpVURGMykKICAgIHF1ZXJ5LnNldCgiRVhVREY0IiwgaVVERjQpCiAgICBxdWVyeS5zZXQoIkVYVURGNSIsIGlVREY1KQogICAgcXVlcnkuc2V0KCJFWFVERjYiLCBpVURGNikKICAgIHF1ZXJ5LnNldCgiRVhDT05PIiwgaUNPTk8gYXMgSW50ZWdlcikKICAgIHF1ZXJ5LnNldCgiRVhPUkRUIiwgaU9SRFQgYXMgSW50ZWdlcikKICAgIHF1ZXJ5LnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhSR1RNIiwgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYTE1UTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhDSE5PIiwgMCkKICAgIGFjdGlvbi5pbnNlcnQocXVlcnksIHJlY29yZEV4aXN0cykKICB9CgogIENsb3N1cmUgcmVjb3JkRXhpc3RzID0gewogICAgbWkuZXJyb3IoIlJlY29yZCBBbHJlYWR5IEV4aXN0cyIpCiAgICByZXR1cm4KICB9Cgp9"}}}