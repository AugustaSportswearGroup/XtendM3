{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"AddPlayerHead":{"sourceUuid":"846c5b9a-89ef-4cc7-ba31-3ea56d6de037","name":"AddPlayerHead","program":"EXT001MI","description":"Add Player Header Information","active":true,"multi":false,"modified":1683712491412,"modifiedBy":"M3CONSADMX","outputFields":[{"name":"PLID","description":"PlayerID","length":15,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"PLID","description":"Player ID","length":15,"mandatory":false,"type":"A"},{"name":"ORNR","description":"Customer Order Number","length":10,"mandatory":true,"type":"A"},{"name":"ORNO","description":"Customer Order Number","length":10,"mandatory":false,"type":"A"},{"name":"OREF","description":"Our Reference","length":30,"mandatory":false,"type":"A"},{"name":"PLNM","description":"Player Name","length":60,"mandatory":false,"type":"A"},{"name":"PLNU","description":"Player Number","length":10,"mandatory":false,"type":"A"},{"name":"TEAM","description":"Team Name","length":40,"mandatory":false,"type":"A"},{"name":"LEAG","description":"League Name","length":40,"mandatory":false,"type":"A"},{"name":"GRBY","description":"Grouping Method","length":10,"mandatory":false,"type":"A"},{"name":"BGBY","description":"Packaging Group","length":10,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Customer Number","length":10,"mandatory":false,"type":"A"},{"name":"ADID","description":"Address Number","length":6,"mandatory":false,"type":"A"},{"name":"ORDT","description":"Order Date","length":8,"mandatory":false,"type":"A"},{"name":"UDF1","description":"User-defined field 1","length":5,"mandatory":false,"type":"A"},{"name":"UDF2","description":"User-defined field 2","length":5,"mandatory":false,"type":"A"},{"name":"UDF3","description":"User-defined field 3","length":10,"mandatory":false,"type":"A"},{"name":"UDF4","description":"User-defined field 4","length":15,"mandatory":false,"type":"A"},{"name":"UDF5","description":"User-defined field 5","length":20,"mandatory":false,"type":"A"},{"name":"UDF6","description":"User-defined field 6","length":30,"mandatory":false,"type":"A"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"846c5b9a-89ef-4cc7-ba31-3ea56d6de037":{"uuid":"846c5b9a-89ef-4cc7-ba31-3ea56d6de037","updated":1683712486789,"updatedBy":"M3CONSADMX","created":1681544336246,"createdBy":"M3CONSADMX","apiVersion":"0.21","beVersion":"16.0.0.20230216180900.6","language":"GROOVY","codeHash":"D99C151FF4F6C8F92497E61C5ADA81C8BBCD5507BDB90C213D909DA296ACEB9B","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIEFkZCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDAwMU1JLkFkZFBsYXllckhlYWQKICogRGVzY3JpcHRpb246IEFkZGluZyByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZSAKICogRGF0ZQkgICAgICBDaGFuZ2VkIEJ5ICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXB0aW9uCiAqMjAyMzA0MDMgIFN1cml5YU5AZm9ydHVkZS5jbyAgICAgQWRkaW5nIHJlY29yZHMgdG8gRVhUU1RIIHRhYmxlICovCgppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUKaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXIKaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGUKCnB1YmxpYyBjbGFzcyBBZGRQbGF5ZXJIZWFkIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UKICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIKICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQogIAoKICBwcml2YXRlIFN0cmluZyBpRElWSSwgaVBMSUQsIGlPUk5SLCBpT1JOTywgaU9SRUYsIGlQTE5NLCBpUExOVSwgaVRFQU0sIGlMRUFHLCBpR1JCWSwgaUJHQlksIGlDVU5PLCBpQURJRCwgaVVERjEsIGlVREYyLCBpVURGMywgaVVERjQsIGlVREY1LCBpVURGNixwbGF5ZXJJRCxpT1JEVAogIHByaXZhdGUgaW50IGlDT05PLCBtYXhQYWdlU2l6ZSA9IDEwMDAwCiAgYm9vbGVhbiBpc09yZGVyRm91bmQgPSBmYWxzZSx2YWxpZElucHV0ID0gdHJ1ZQoKICBwdWJsaWMgQWRkUGxheWVySGVhZChNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSxNSUNhbGxlckFQSSBtaUNhbGxlcixVdGlsaXR5QVBJIHV0aWxpdHkpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICAgIHRoaXMudXRpbGl0eSA9IHV0aWxpdHkKICB9CiAgLyoqCiAgICoqIE1haW4gZnVuY3Rpb24KICAgKiBAcGFyYW0KICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgbWFpbigpIHsKICAgIGlESVZJID0gKG1pLmluRGF0YS5nZXQoIkRJVkkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJVkkiKS50cmltKCkuaXNFbXB0eSgpKSA/IHByb2dyYW0uTERBWkQuRElWSSA6IG1pLmluRGF0YS5nZXQoIkRJVkkiKQogICAgaVBMSUQgPSAobWkuaW5EYXRhLmdldCgiUExJRCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUExJRCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQTElEIikKICAgIGlPUk5SID0gKG1pLmluRGF0YS5nZXQoIk9STlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STlIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JOUiIpCiAgICBpT1JOTyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKQogICAgaU9SRUYgPSAobWkuaW5EYXRhLmdldCgiT1JFRiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JFRiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUkVGIikKICAgIGlQTE5NID0gKG1pLmluRGF0YS5nZXQoIlBMTk0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBMTk0iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUExOTSIpCiAgICBpUExOVSA9IChtaS5pbkRhdGEuZ2V0KCJQTE5VIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQTE5VIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBMTlUiKQogICAgaVRFQU0gPSAobWkuaW5EYXRhLmdldCgiVEVBTSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVEVBTSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJURUFNIikKICAgIGlMRUFHID0gKG1pLmluRGF0YS5nZXQoIkxFQUciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxFQUciKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTEVBRyIpCiAgICBpR1JCWSA9IChtaS5pbkRhdGEuZ2V0KCJHUkJZIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJHUkJZIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkdSQlkiKQogICAgaUJHQlkgPSAobWkuaW5EYXRhLmdldCgiQkdCWSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQkdCWSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJCR0JZIikKICAgIGlDVU5PID0gKG1pLmluRGF0YS5nZXQoIkNVTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VOTyIpCiAgICBpQURJRCA9IChtaS5pbkRhdGEuZ2V0KCJBRElEIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJBRElEIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkFESUQiKQogICAgaVVERjEgPSAobWkuaW5EYXRhLmdldCgiVURGMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREYxIikKICAgIGlVREYyID0gKG1pLmluRGF0YS5nZXQoIlVERjIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGMiIpCiAgICBpVURGMyA9IChtaS5pbkRhdGEuZ2V0KCJVREYzIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREYzIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjMiKQogICAgaVVERjQgPSAobWkuaW5EYXRhLmdldCgiVURGNCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGNCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREY0IikKICAgIGlVREY1ID0gKG1pLmluRGF0YS5nZXQoIlVERjUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGNSIpCiAgICBpVURGNiA9IChtaS5pbkRhdGEuZ2V0KCJVREY2IikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREY2IikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjYiKQogICAgaU9SRFQgPSAobWkuaW5EYXRhLmdldCgiT1JEVCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JEVCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUkRUIikgCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgCgogICAgdmFsaWRhdGVJbnB1dCgpCiAgICBpZih2YWxpZElucHV0KQogICAgeyAgIAogICAgICAgIGNoZWNrSWZPcmRlckV4aXN0cygpCiAgICAgICAgaW5zZXJ0UmVjb3JkKCkKICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExJRCIscGxheWVySUQpCiAgICAgICAgbWkud3JpdGUoKQogICAgfQogIH0KCiAgLyoqCiAgICpWYWxpZGF0ZSBSZWNvcmRzCiAgICogQHBhcmFtcwogICAqIEByZXR1cm4gCiAgICovCiAgcHVibGljIHZhbGlkYXRlSW5wdXQoKSB7CiAgCiAgICAKICAgIC8vVmFsaWRhdGUgQ29tcGFueSBOdW1iZXIKICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKV0KICAgIGRlZiBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgICAgaWYgKHJlc3BvbnNlLkNPTk8gPT0gbnVsbCkgewogICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ29tcGFueSBOdW1iZXIgIiArIGlDT05PKQogICAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICBpZighaUNVTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIEN1c3RvbWVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkNVTk8iOiBpQ1VOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwPFN0cmluZywKICAgICAgICAgIFN0cmluZz4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5DVU5PID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ3VzdG9tZXIgTnVtYmVyICIgKyBpQ1VOTykKICAgICAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJDUlM2MTBNSSIsICJHZXRCYXNpY0RhdGEiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgaWYoIWlPUk5SLnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgVGVtcG9yYXJ5IE9yZGVyIE51bWJlcgogICAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPWEhFQUQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgIGNvbnRhaW5lci5zZXQoIk9BQ09OTyIsIGlDT05PKQogICAgICBjb250YWluZXIuc2V0KCJPQU9STk8iLCBpT1JOUikKCiAgICAgIGlmKCFxdWVyeS5yZWFkKGNvbnRhaW5lcikpCiAgICAgIHsKICAgICAgICBtaS5lcnJvcigiVGVtcG9yYXJ5IE9yZGVyIE51bWJlciBub3QgZm91bmQgIitpT1JOUikKICAgICAgICB2YWxpZElucHV0PWZhbHNlCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIAogICAgaWYoIWlPUk5PLnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgT3JkZXIgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCAiT1JOTyI6IGlPUk5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gPT0gbnVsbCkgewogICAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBPcmRlciBOdW1iZXIgIiArIGlPUk5PKQogICAgICAgICAgICB2YWxpZElucHV0PWZhbHNlCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgfQogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwgIkdldEhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmKCFpQURJRC50cmltKCkuaXNFbXB0eSgpKQogICAgewogICAgICAvL1ZhbGlkYXRlIEFkZHJlc3MgSUQKICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT0NVU0FEIikuc2VsZWN0aW9uKCJPUEFESUQiKS5pbmRleCgiMTAiKS5idWlsZCgpCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgIGNvbnRhaW5lci5zZXQoIk9QQ09OTyIsIGlDT05PKQogICAgICBjb250YWluZXIuc2V0KCJPUENVTk8iLCBpQ1VOTykKICAgICAgY29udGFpbmVyLnNldCgiT1BBRFJUIiwgMSkKICAgICAgY29udGFpbmVyLnNldCgiT1BBRElEIiwgaUFESUQpCgogICAgICBpZighcXVlcnkucmVhZChjb250YWluZXIpKQogICAgICB7CiAgICAgICAgbWkuZXJyb3IoIkFkZHJlc3MgSUQgTm90IEZvdW5kICIraUFESUQpCiAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICB9CiAgICAKICAgIAogICAgaWYoIWlPUkRULnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgRGF0ZQogICAgICBTdHJpbmcgc291cmNlRm9ybWF0ID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsImdldEZ1bGxGb3JtYXQiLG1pLmdldERhdGVGb3JtYXQoKSkKICAgICAgdmFsaWRJbnB1dCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCJpc0RhdGVWYWxpZCIsaU9SRFQudHJpbSgpLHNvdXJjZUZvcm1hdC50b1N0cmluZygpKQogICAgICBpZiAoIXZhbGlkSW5wdXQpCiAgICAgIHsKICAgICAgICAgIG1pLmVycm9yKCJPcmRlciBEYXRlIG5vdCBpbiAiK3NvdXJjZUZvcm1hdCsiIGZvcm1hdC4gUGxlYXNlIENoZWNrICIraU9SRFQpCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9ZWxzZQogICAgICAgIHsKICAgICAgICAgIGlmKCFzb3VyY2VGb3JtYXQudHJpbSgpLmVxdWFscygieXl5eU1NZGQiKSkKICAgICAgICAgIHsKICAgICAgICAgICAgaU9SRFQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwiY29udmVydERhdGUiLHNvdXJjZUZvcm1hdCwieXl5eU1NZGQiLGlPUkRULnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQogICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgCiAgICAKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHRoZSBvcmRlciBhbHJlYWR5IGV4aXN0cyBpbiBFWFRTVEggdGFibGUgYW5kIGdldCBQTElEIGlmIGF2YWlsYmxlLgogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCgogIHB1YmxpYyBjaGVja0lmT3JkZXJFeGlzdHMoKQogIHsKICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVFNUSCIpLnNlbGVjdGlvbigiRVhQTElEIikuaW5kZXgoIjEwIikuYnVpbGQoKQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhESVZJIiwgaURJVkkpCiAgICBjb250YWluZXIuc2V0KCJFWE9STlIiLCBpT1JOUikKICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAzLG1heFBhZ2VTaXplLCByZXN1bHRzZXQpCiAgfQoKICBDbG9zdXJlIDwgPyA+IHJlc3VsdHNldCA9IHsKICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciAtPgogICAgICBpc09yZGVyRm91bmQgPSB0cnVlCiAgICAgIGlmKHBsYXllcklEPT1udWxsfHxwbGF5ZXJJRC50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgICAgcGxheWVySUQgPSBjb250YWluZXIuZ2V0KCJFWFBMSUQiKQogICAgICAgIAogICAgICB9CiAgfQoKICAvKioKICAgKkluc2VydCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZQogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIGluc2VydFJlY29yZCgpIHsKICAgIERCQWN0aW9uIGFjdGlvbiA9IGRhdGFiYXNlLnRhYmxlKCJFWFRTVEgiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBxdWVyeSA9IGFjdGlvbi5nZXRDb250YWluZXIoKQoKICAgIGlmKChpUExJRC50cmltKCkuaXNFbXB0eSgpfHxpUExJRC50cmltKCkuZXF1YWxzKCIqQVVUTyIpKSkgLy9HZW5lcmF0ZSBQbGF5ZXIgSUQgaWYgaXQgZG9lc24ndCBleGlzdHMuIAogICAgewogICAgICBpZihpc09yZGVyRm91bmQpCiAgICAgIHsKICAgICAgICBpbnQgU0VRTiA9IEludGVnZXIucGFyc2VJbnQocGxheWVySUQuc3Vic3RyaW5nKDEwKSkgKyAxICAgLy9JbmNyZW1lbnQgdGhlIHNlcXVlbmNlIG51bWJlciBpZiBwbGF5ZXIgaWQgZm91bmQuIAogICAgICAgIHBsYXllcklEID0gaU9STlIrU3RyaW5nLmZvcm1hdCgiJTA1ZCIsIFNFUU4pCiAgICAgIH1lbHNlCiAgICAgIHsKICAgICAgICBwbGF5ZXJJRCA9IGlPUk5SICsiMDAwMDEiICAgICAvL1N0YXJ0IGZyb20gc2VxdWVuY2Ugb25lIGlmIG5ldyBwbGF5ZXIgSUQuIAogICAgICB9CiAgICB9ZWxzZQogICAgewogICAgICBwbGF5ZXJJRCA9IGlQTElECiAgICB9CiAgICBxdWVyeS5zZXQoIkVYUExJRCIsIHBsYXllcklEKQogICAgcXVlcnkuc2V0KCJFWERJVkkiLGlESVZJKQogICAgcXVlcnkuc2V0KCJFWE9STlIiLCBpT1JOUikKICAgIHF1ZXJ5LnNldCgiRVhPUk5PIiwgaU9STk8pCiAgICBxdWVyeS5zZXQoIkVYT1JFRiIsIGlPUkVGKQogICAgcXVlcnkuc2V0KCJFWFBMTk0iLCBpUExOTSkKICAgIHF1ZXJ5LnNldCgiRVhQTE5VIiwgaVBMTlUpCiAgICBxdWVyeS5zZXQoIkVYVEVBTSIsIGlURUFNKQogICAgcXVlcnkuc2V0KCJFWExFQUciLCBpTEVBRykKICAgIHF1ZXJ5LnNldCgiRVhHUkJZIiwgaUdSQlkpCiAgICBxdWVyeS5zZXQoIkVYQkdCWSIsIGlCR0JZKQogICAgcXVlcnkuc2V0KCJFWENVTk8iLCBpQ1VOTykKICAgIHF1ZXJ5LnNldCgiRVhBRElEIiwgaUFESUQpCiAgICBxdWVyeS5zZXQoIkVYVURGMSIsIGlVREYxKQogICAgcXVlcnkuc2V0KCJFWFVERjIiLCBpVURGMikKICAgIHF1ZXJ5LnNldCgiRVhVREYzIiwgaVVERjMpCiAgICBxdWVyeS5zZXQoIkVYVURGNCIsIGlVREY0KQogICAgcXVlcnkuc2V0KCJFWFVERjUiLCBpVURGNSkKICAgIHF1ZXJ5LnNldCgiRVhVREY2IiwgaVVERjYpCiAgICBxdWVyeS5zZXQoIkVYQ09OTyIsIGlDT05PIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYT1JEVCIsIGlPUkRUIGFzIEludGVnZXIpCiAgICBxdWVyeS5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYUkdUTSIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWExNRFQiLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKQogICAgcXVlcnkuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIHF1ZXJ5LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpCiAgICBxdWVyeS5zZXQoIkVYQ0hOTyIsIDApCiAgICBhY3Rpb24uaW5zZXJ0KHF1ZXJ5LCByZWNvcmRFeGlzdHMpCiAgfQoKICBDbG9zdXJlIHJlY29yZEV4aXN0cyA9IHsKICAgIG1pLmVycm9yKCJSZWNvcmQgQWxyZWFkeSBFeGlzdHMiKQogICAgcmV0dXJuCiAgfQoKfQo="}}}