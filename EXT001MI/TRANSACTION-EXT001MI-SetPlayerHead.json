{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"SetPlayerHead":{"sourceUuid":"846c5b4a-89ef-4cc7-ba31-3ea56d6de037","name":"SetPlayerHead","program":"EXT001MI","description":"Set Player Header Information","active":true,"multi":false,"modified":1706006097155,"modifiedBy":"ABHISHEK","outputFields":[{"name":"PLID","description":"PlayerID","length":15,"mandatory":false,"type":"A"},{"name":"PROC","description":"Process","length":3,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"},{"name":"PLID","description":"Player ID","length":15,"mandatory":false,"type":"A"},{"name":"ORNR","description":"Customer Order Number","length":10,"mandatory":true,"type":"A"},{"name":"ORNO","description":"Customer Order Number","length":10,"mandatory":false,"type":"A"},{"name":"OREF","description":"Our Reference","length":30,"mandatory":false,"type":"A"},{"name":"PLNM","description":"Player Name","length":60,"mandatory":false,"type":"A"},{"name":"PLNU","description":"Player Number","length":10,"mandatory":false,"type":"A"},{"name":"TEAM","description":"Team Name","length":40,"mandatory":false,"type":"A"},{"name":"LEAG","description":"League Name","length":40,"mandatory":false,"type":"A"},{"name":"GRBY","description":"Grouping Method","length":10,"mandatory":false,"type":"A"},{"name":"BGBY","description":"Packaging Group","length":10,"mandatory":false,"type":"A"},{"name":"CUNO","description":"Customer Number","length":10,"mandatory":false,"type":"A"},{"name":"ADID","description":"Address Number","length":6,"mandatory":false,"type":"A"},{"name":"ORDT","description":"Order Date","length":8,"mandatory":false,"type":"N"},{"name":"UDF1","description":"User-defined field 1","length":5,"mandatory":false,"type":"A"},{"name":"UDF2","description":"User-defined field 2","length":5,"mandatory":false,"type":"A"},{"name":"UDF3","description":"User-defined field 3","length":10,"mandatory":false,"type":"A"},{"name":"UDF4","description":"User-defined field 4","length":20,"mandatory":false,"type":"A"},{"name":"UDF5","description":"User-defined field 5","length":20,"mandatory":false,"type":"A"},{"name":"UDF6","description":"User-defined field 6","length":30,"mandatory":false,"type":"A"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"846c5b4a-89ef-4cc7-ba31-3ea56d6de037":{"uuid":"846c5b4a-89ef-4cc7-ba31-3ea56d6de037","updated":1707296768198,"updatedBy":"ABHISHEK","created":1680774143042,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20231123104741.6","language":"GROOVY","codeHash":"36DDE8CC15147ACC941509FEE9158B56F30C7846CE781FE080803829462004AC","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFNldCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZS4KICoKICogTmFtZTogRVhUMDAxTUkuU2V0UGxheWVySGVhZAogKiBEZXNjcmlwdGlvbjogU2V0IHJlY29yZHMgdG8gRVhUU1RIIHRhYmxlCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwNDAzICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgIFNldCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZSAqLwoKcHVibGljIGNsYXNzIFNldFBsYXllckhlYWQgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsKICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcgogIHByaXZhdGUgZmluYWwgVXRpbGl0eUFQSSB1dGlsaXR5CgogIHByaXZhdGUgU3RyaW5nIGlESVZJLCBpUExJRCwgaU9STlIsIGlPUk5PLCBpT1JFRiwgaVBMTk0sIGlQTE5VLCBpVEVBTSwgaUxFQUcsIGlHUkJZLCBpQkdCWSwgaUNVTk8sIGlBRElELCBpVURGMSwgaVVERjIsIGlVREYzLCBpVURGNCwgaVVERjUsIGlVREY2LHBsYXllcklECiAgcHJpdmF0ZSBpbnQgaUNPTk8sIGlPUkRUCiAgYm9vbGVhbiBpc09yZGVyRm91bmQgPSBmYWxzZSx2YWxpZElucHV0ID0gdHJ1ZSxyZWNvcmRFeGlzdHMgPSBmYWxzZQoKICBwdWJsaWMgU2V0UGxheWVySGVhZChNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSxNSUNhbGxlckFQSSBtaUNhbGxlcixVdGlsaXR5QVBJIHV0aWxpdHkpIHsKICAgIHRoaXMubWkgPSBtaQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXIKICAgIHRoaXMudXRpbGl0eSA9IHV0aWxpdHkKICB9CiAgLyoqCiAgICoqIE1haW4gZnVuY3Rpb24KICAgKiBAcGFyYW0KICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgbWFpbigpIHsKICAgIGlESVZJID0gKG1pLmluRGF0YS5nZXQoIkRJVkkiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkRJVkkiKS50cmltKCkuaXNFbXB0eSgpKSA/IHByb2dyYW0uTERBWkQuRElWSSA6IG1pLmluRGF0YS5nZXQoIkRJVkkiKQogICAgaVBMSUQgPSAobWkuaW5EYXRhLmdldCgiUExJRCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiUExJRCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQTElEIikKICAgIGlPUk5SID0gKG1pLmluRGF0YS5nZXQoIk9STlIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIk9STlIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1JOUiIpCiAgICBpT1JOTyA9IChtaS5pbkRhdGEuZ2V0KCJPUk5PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUk5PIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKQogICAgaU9SRUYgPSAobWkuaW5EYXRhLmdldCgiT1JFRiIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JFRiIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUkVGIikKICAgIGlQTE5NID0gKG1pLmluRGF0YS5nZXQoIlBMTk0iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlBMTk0iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiUExOTSIpCiAgICBpUExOVSA9IChtaS5pbkRhdGEuZ2V0KCJQTE5VIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJQTE5VIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBMTlUiKQogICAgaVRFQU0gPSAobWkuaW5EYXRhLmdldCgiVEVBTSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVEVBTSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJURUFNIikKICAgIGlMRUFHID0gKG1pLmluRGF0YS5nZXQoIkxFQUciKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkxFQUciKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiTEVBRyIpCiAgICBpR1JCWSA9IChtaS5pbkRhdGEuZ2V0KCJHUkJZIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJHUkJZIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkdSQlkiKQogICAgaUJHQlkgPSAobWkuaW5EYXRhLmdldCgiQkdCWSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQkdCWSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJCR0JZIikKICAgIGlDVU5PID0gKG1pLmluRGF0YS5nZXQoIkNVTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIkNVTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VOTyIpCiAgICBpQURJRCA9IChtaS5pbkRhdGEuZ2V0KCJBRElEIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJBRElEIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkFESUQiKQogICAgaVVERjEgPSAobWkuaW5EYXRhLmdldCgiVURGMSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGMSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREYxIikKICAgIGlVREYyID0gKG1pLmluRGF0YS5nZXQoIlVERjIiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjIiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGMiIpCiAgICBpVURGMyA9IChtaS5pbkRhdGEuZ2V0KCJVREYzIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREYzIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjMiKQogICAgaVVERjQgPSAobWkuaW5EYXRhLmdldCgiVURGNCIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVURGNCIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJVREY0IikKICAgIGlVREY1ID0gKG1pLmluRGF0YS5nZXQoIlVERjUiKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIlVERjUiKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiVURGNSIpCiAgICBpVURGNiA9IChtaS5pbkRhdGEuZ2V0KCJVREY2IikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJVREY2IikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlVERjYiKQoKCiAgICBpQ09OTyA9IChtaS5pbkRhdGEuZ2V0KCJDT05PIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJDT05PIikudHJpbSgpLmlzRW1wdHkoKSkgPyBwcm9ncmFtLkxEQVpELkNPTk8gYXMgSW50ZWdlciA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKSBhcyBJbnRlZ2VyCiAgICBpT1JEVCA9IChtaS5pbkRhdGEuZ2V0KCJPUkRUIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJPUkRUIikudHJpbSgpLmlzRW1wdHkoKSkgPyAwIDogbWkuaW5EYXRhLmdldCgiT1JEVCIpIGFzIEludGVnZXIKICAgIHZhbGlkYXRlSW5wdXQoKQogICAgaWYoIWlQTElELnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIGNoZWNrSWZPcmRlckV4aXN0cygpCiAgICB9CiAgICAKICAgIGlmKHZhbGlkSW5wdXQmJiFyZWNvcmRFeGlzdHMpCiAgICB7CiAgICAgIGluc2VydFJlY29yZCgpCiAgICB9CiAgfQoKICAvKioKICAgKlZhbGlkYXRlIFJlY29yZHMKICAgKiBAcGFyYW1zCiAgICogQHJldHVybiBib29sZWFuCiAgICovCiAgcHVibGljIHZvaWQgdmFsaWRhdGVJbnB1dCgpIHsKICAgIC8vVmFsaWRhdGUgQ29tcGFueSBOdW1iZXIKICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCldCiAgICBDbG9zdXJlPD8+IGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZiAocmVzcG9uc2UuQ09OTyA9PSBudWxsKSB7CiAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgICB2YWxpZElucHV0PWZhbHNlCiAgICAgICAgICByZXR1cm4gCiAgICAgICAgfQogICAgfQogICAgbWlDYWxsZXIuY2FsbCgiTU5TMDk1TUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIAogICAgLy9WYWxpZGF0ZSBEaXZpc2lvbgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksICJESVZJIjogaURJVkkudG9TdHJpbmcoKS50cmltKCldCiAgICBjYWxsYmFjayA9IHsKICAgICAgTWFwIDwgU3RyaW5nLAogICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICBpZiAocmVzcG9uc2UuRElWSSA9PSBudWxsKSB7CiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgRGl2aXNpb24gIiArIGlESVZJKQogICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgIHJldHVybgogICAgICB9CiAgICB9CgogICAgbWlDYWxsZXIuY2FsbCgiTU5TMTAwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykKCiAgICBpZighaUNVTk8udHJpbSgpLmlzRW1wdHkoKSkgewogICAgICAvL1ZhbGlkYXRlIEN1c3RvbWVyIE51bWJlcgogICAgICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwgIkNVTk8iOiBpQ1VOTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwPFN0cmluZywKICAgICAgICAgIFN0cmluZz4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5DVU5PID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgQ3VzdG9tZXIgTnVtYmVyICIgKyBpQ1VOTykKICAgICAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgICAgICByZXR1cm4gCiAgICAgICAgICB9CiAgICAgIH0KICAgICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjEwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjaykKICAgIH0KCiAgICBpZighaU9STlIudHJpbSgpLmlzRW1wdHkoKSkKICAgIHsKICAgICAgLy9WYWxpZGF0ZSBUZW1wb3JhcnkgT3JkZXIgTnVtYmVyCiAgICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk9YSEVBRCIpLmluZGV4KCIwMCIpLmJ1aWxkKCkKICAgICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgICAgY29udGFpbmVyLnNldCgiT0FDT05PIiwgaUNPTk8pCiAgICAgIGNvbnRhaW5lci5zZXQoIk9BT1JOTyIsIGlPUk5SKQoKICAgICAgaWYoIXF1ZXJ5LnJlYWQoY29udGFpbmVyKSkKICAgICAgewogICAgICAgIG1pLmVycm9yKCJUZW1wb3JhcnkgT3JkZXIgTnVtYmVyIG5vdCBmb3VuZCAiK2lPUk5SKQogICAgICAgIHZhbGlkSW5wdXQ9ZmFsc2UKICAgICAgICByZXR1cm4gCiAgICAgIH0KICAgIH0KICAgIAogICAgaWYoIWlPUk5PLnRyaW0oKS5pc0VtcHR5KCkpCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgT3JkZXIgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiT1JOTyI6IGlPUk5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgICBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgaWYgKHJlc3BvbnNlLk9STk8gPT0gbnVsbCkgewogICAgICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBPcmRlciBOdW1iZXIgIiArIGlPUk5PKQogICAgICAgICAgICB2YWxpZElucHV0PWZhbHNlCiAgICAgICAgICAgIHJldHVybiAKICAgICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJPSVMxMDBNSSIsICJHZXRPcmRlckhlYWQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgfQoKICAgIGlmKCFpQURJRC50cmltKCkuaXNFbXB0eSgpKQogICAgewogICAgICAvL1ZhbGlkYXRlIEFkZHJlc3MgSUQKICAgICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiT0NVU0FEIikuc2VsZWN0aW9uKCJPUEFESUQiKS5pbmRleCgiMTAiKS5idWlsZCgpCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpCiAgICAgIGNvbnRhaW5lci5zZXQoIk9QQ09OTyIsIGlDT05PKQogICAgICBjb250YWluZXIuc2V0KCJPUENVTk8iLCBpQ1VOTykKICAgICAgY29udGFpbmVyLnNldCgiT1BBRFJUIiwgMSkKICAgICAgY29udGFpbmVyLnNldCgiT1BBRElEIiwgaUFESUQpCgogICAgICBpZighcXVlcnkucmVhZChjb250YWluZXIpKQogICAgICB7CiAgICAgICAgbWkuZXJyb3IoIkFkZHJlc3MgSUQgTm90IEZvdW5kICIraUFESUQpCiAgICAgICAgdmFsaWRJbnB1dD1mYWxzZQogICAgICAgIHJldHVybiAKICAgICAgfQogICAgfQogICAgCiAgaWYoaU9SRFQhPTApCiAgICB7CiAgICAgIC8vVmFsaWRhdGUgRGF0ZQogICAgICBTdHJpbmcgc291cmNlRm9ybWF0ID0gdXRpbGl0eS5jYWxsKCJEYXRlVXRpbCIsImdldEZ1bGxGb3JtYXQiLG1pLmdldERhdGVGb3JtYXQoKSkKICAgICAgdmFsaWRJbnB1dCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCJpc0RhdGVWYWxpZCIsaU9SRFQsc291cmNlRm9ybWF0LnRvU3RyaW5nKCkpCiAgICAgIGlmICghdmFsaWRJbnB1dCkKICAgICAgewogICAgICAgICAgbWkuZXJyb3IoIk9yZGVyIERhdGUgbm90IGluICIrc291cmNlRm9ybWF0KyIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIitpT1JEVCkKICAgICAgICAgIHJldHVybiAKICAgICAgICB9ZWxzZQogICAgICAgIHsKICAgICAgICAgIGlmKCFzb3VyY2VGb3JtYXQudHJpbSgpLmVxdWFscygieXl5eU1NZGQiKSkKICAgICAgICAgIHsKICAgICAgICAgICAgaU9SRFQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwiY29udmVydERhdGUiLHNvdXJjZUZvcm1hdCwieXl5eU1NZGQiLGlPUkRUKSAvL01haW50YWluIGRhdGUgaW4gWU1EOCBmb3JtYXQgaW4gdGhlIHRhYmxlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICB9CgogIC8qKgogICAqIENoZWNrIGlmIHRoZSBvcmRlciBhbHJlYWR5IGV4aXN0cyBpbiBFWFRTVEggdGFibGUgYW5kIGdldCBQTElEIGlmIGF2YWlsYmxlLgogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCgogIHB1YmxpYyB2b2lkIGNoZWNrSWZPcmRlckV4aXN0cygpCiAgewogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUU1RIIikuaW5kZXgoIjAwIikuYnVpbGQoKQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCkKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhESVZJIiwgaURJVkkpCiAgICBjb250YWluZXIuc2V0KCJFWFBMSUQiLCBpUExJRCkKICAgIGlmKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkKICAgIHsKICAgICAgcmVjb3JkRXhpc3RzID0gdHJ1ZQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+ICBwYXJhbXMgPSBbIkNPTk8iOiBpQ09OTy50b1N0cmluZygpLnRyaW0oKSwiRElWSSI6aURJVkkudG9TdHJpbmcoKS50cmltKCksIlBMSUQiOmlQTElELnRvU3RyaW5nKCkudHJpbSgpCiAgICAgICAgICAgICAgICAgICAgICwiT1JOUiI6aU9STlIudG9TdHJpbmcoKS50cmltKCksIk9STk8iOmlPUk5PLnRvU3RyaW5nKCkudHJpbSgpLCJPUkVGIjppT1JFRi50b1N0cmluZygpLnRyaW0oKQogICAgICAgICAgICAgICAgICAgICAsIlBMTk0iOmlQTE5NLnRvU3RyaW5nKCkudHJpbSgpLCJQTE5VIjppUExOVS50b1N0cmluZygpLnRyaW0oKSwiVEVBTSI6aVRFQU0udG9TdHJpbmcoKS50cmltKCkKICAgICAgICAgICAgICAgICAgICAgLCJMRUFHIjppTEVBRy50b1N0cmluZygpLnRyaW0oKSwiR1JCWSI6aUdSQlkudG9TdHJpbmcoKS50cmltKCksIkJHQlkiOmlCR0JZLnRvU3RyaW5nKCkudHJpbSgpCiAgICAgICAgICAgICAgICAgICAgICwiQ1VOTyI6aUNVTk8udG9TdHJpbmcoKS50cmltKCksIkFESUQiOmlBRElELnRvU3RyaW5nKCkudHJpbSgpLCJPUkRUIjppT1JEVC50b1N0cmluZygpLnRyaW0oKQogICAgICAgICAgICAgICAgICAgICAsIlVERjEiOmlVREYxLnRvU3RyaW5nKCkudHJpbSgpLCJVREYyIjppVURGMi50b1N0cmluZygpLnRyaW0oKSwiVURGMyI6aVVERjMudG9TdHJpbmcoKS50cmltKCkKICAgICAgICAgICAgICAgICAgICAgLCJVREY0IjppVURGNC50b1N0cmluZygpLnRyaW0oKSwiVURGNSI6aVVERjUudG9TdHJpbmcoKS50cmltKCksIlVERjYiOmlVREY2LnRvU3RyaW5nKCkudHJpbSgpXQoKICAgICAgQ2xvc3VyZTw/PiBjYWxsYmFjayA9IHsKICAgICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgICAgbWkuZXJyb3IoIlJlc3BvbnNlOiAiK3Jlc3BvbnNlKQogICAgICAgICAgaWYocmVzcG9uc2UuZXJyb3JNZXNzYWdlIT1udWxsKQogICAgICAgICAgewogICAgICAgICAgICBtaS5lcnJvcigiRXJyb3I6ICIrcmVzcG9uc2UuZXJyb3JNZXNzYWdlKQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIH0KICAgICAgICAgIAogICAgICB9CiAgICAgIG1pQ2FsbGVyLmNhbGwoIkVYVDAwMU1JIiwgIlVwZFBsYXllckhlYWQiLCBwYXJhbXMsY2FsbGJhY2spCiAgICAgIG1pLm91dERhdGEucHV0KCJQTElEIixpUExJRCkKICAgICAgbWkub3V0RGF0YS5wdXQoIlBST0MiLCJVUEQiKQogICAgICBtaS53cml0ZSgpCiAgICB9CiAgfQogIAoKICAvKioKICAgKkluc2VydCByZWNvcmRzIHRvIEVYVFNUSCB0YWJsZQogICAqIEBwYXJhbXMKICAgKiBAcmV0dXJuCiAgICovCiAgcHVibGljIHZvaWQgaW5zZXJ0UmVjb3JkKCkgewogICAgTWFwPFN0cmluZywgU3RyaW5nPiAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIkRJVkkiOmlESVZJLnRvU3RyaW5nKCkudHJpbSgpLCJQTElEIjppUExJRC50b1N0cmluZygpLnRyaW0oKQogICAgICAgICAgICAgICAgICAgLCJPUk5SIjppT1JOUi50b1N0cmluZygpLnRyaW0oKSwiT1JOTyI6aU9STk8udG9TdHJpbmcoKS50cmltKCksIk9SRUYiOmlPUkVGLnRvU3RyaW5nKCkudHJpbSgpCiAgICAgICAgICAgICAgICAgICAsIlBMTk0iOmlQTE5NLnRvU3RyaW5nKCkudHJpbSgpLCJQTE5VIjppUExOVS50b1N0cmluZygpLnRyaW0oKSwiVEVBTSI6aVRFQU0udG9TdHJpbmcoKS50cmltKCkKICAgICAgICAgICAgICAgICAgICwiTEVBRyI6aUxFQUcudG9TdHJpbmcoKS50cmltKCksIkdSQlkiOmlHUkJZLnRvU3RyaW5nKCkudHJpbSgpLCJCR0JZIjppQkdCWS50b1N0cmluZygpLnRyaW0oKQogICAgICAgICAgICAgICAgICAgLCJDVU5PIjppQ1VOTy50b1N0cmluZygpLnRyaW0oKSwiQURJRCI6aUFESUQudG9TdHJpbmcoKS50cmltKCksIk9SRFQiOmlPUkRULnRvU3RyaW5nKCkudHJpbSgpCiAgICAgICAgICAgICAgICAgICAsIlVERjEiOmlVREYxLnRvU3RyaW5nKCkudHJpbSgpLCJVREYyIjppVURGMi50b1N0cmluZygpLnRyaW0oKSwiVURGMyI6aVVERjMudG9TdHJpbmcoKS50cmltKCkKICAgICAgICAgICAgICAgICAgICwiVURGNCI6aVVERjQudG9TdHJpbmcoKS50cmltKCksIlVERjUiOmlVREY1LnRvU3RyaW5nKCkudHJpbSgpLCJVREY2IjppVURGNi50b1N0cmluZygpLnRyaW0oKV0KCiAgICBDbG9zdXJlPD8+IGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICBpZihyZXNwb25zZS5lcnJvck1lc3NhZ2UhPW51bGwpCiAgICAgICAgewogICAgICAgICAgbWkuZXJyb3IoIkVycm9yIDogIityZXNwb25zZS5lcnJvck1lc3NhZ2UpCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiUExJRCIscmVzcG9uc2UuUExJRCkKICAgICAgICAgIG1pLm91dERhdGEucHV0KCJQUk9DIiwiQUREIikKICAgICAgICAgIG1pLndyaXRlKCkKICAgICAgICB9CiAgICB9CiAgICBtaUNhbGxlci5jYWxsKCJFWFQwMDFNSSIsICJBZGRQbGF5ZXJIZWFkIiwgcGFyYW1zLGNhbGxiYWNrKQoKICB9CgoKfQo="}}}