{"programModules":{"EXT200MI":{"program":"EXT200MI","triggers":{},"transactions":{"UpdATPDate":{"sourceUuid":"ed04d96c-2d32-4b29-b745-4d54b4b90aa7","name":"UpdATPDate","program":"EXT200MI","description":"Update ATP Info based on date","active":true,"multi":false,"modified":1680862819433,"modifiedBy":"M3CONSADMX","outputFields":[],"inputFields":[{"name":"CONO","description":"Company Number","length":3,"mandatory":false,"type":"N"},{"name":"WHLO","description":"Warehouse Number","length":3,"mandatory":true,"type":"A"},{"name":"ITNO","description":"Item Number","length":15,"mandatory":true,"type":"A"},{"name":"DATE","description":"Available Date","length":20,"mandatory":false,"type":"A"},{"name":"UPDS","description":"Update Flag","length":1,"mandatory":false,"type":"A"},{"name":"ORQ9","description":"Ordered Quantity","length":15,"mandatory":false,"type":"N"}],"utilities":["DateUtil"]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"ed04d96c-2d32-4b29-b745-4d54b4b90aa7":{"uuid":"ed04d96c-2d32-4b29-b745-4d54b4b90aa7","updated":1701263822217,"updatedBy":"ABHISHEK","created":1680862793010,"createdBy":"M3CONSADMX","apiVersion":"0.16","beVersion":"16.0.0.20230918173517.7","language":"GROOVY","codeHash":"1D7AB8E91E31E7C75DE1AE7C2917141B51EF895138D403C74F63D6688A87DC4C","code":"LyoqCiAqIFJFQURNRQogKiBUaGlzIGV4dGVuc2lvbiBpcyBiZWluZyB1c2VkIHRvIFVwZGF0ZSByZWNvcmRzIHRvIEVYVFBEVCB0YWJsZS4gCiAqCiAqIE5hbWU6IEVYVDIwME1JLlVwZEFUUERhdGUKICogRGVzY3JpcHRpb246IFVwZGF0aW5nIHJlY29yZHMgdG8gRVhUUERUIHRhYmxlCiAqIERhdGUJICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbgogKjIwMjMwNDA3ICBTdXJpeWFOQGZvcnR1ZGUuY28gICAgVXBkYXRpbmcgcmVjb3JkcyB0byBFWFRQRFQgdGFibGUKICoKICovCgppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUKaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXIKCnB1YmxpYyBjbGFzcyBVcGRBVFBEYXRlIGV4dGVuZHMgRXh0ZW5kTTNUcmFuc2FjdGlvbiB7CiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2UKICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXIKICBwcml2YXRlIGZpbmFsIFV0aWxpdHlBUEkgdXRpbGl0eQoKICBwcml2YXRlIFN0cmluZyBpV0hMTywgaUlUTk8sIGlEQVRFLCBpVVBEUwoKICBwcml2YXRlIGludCBpQ09OTywgaU9SUTkKICBwcml2YXRlIGJvb2xlYW4gdmFsaWRJbnB1dCA9IHRydWUKICAKICBwdWJsaWMgVXBkQVRQRGF0ZShNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIFByb2dyYW1BUEkgcHJvZ3JhbSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIsIFV0aWxpdHlBUEkgdXRpbGl0eSkgewogICAgdGhpcy5taSA9IG1pCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2UKICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcgogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eQogIH0KICAvKioKICAgKiogTWFpbiBmdW5jdGlvbgogICAqIEBwYXJhbQogICAqIEByZXR1cm4KICAgKi8KICBwdWJsaWMgdm9pZCBtYWluKCkgewogICAgaVdITE8gPSAobWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiV0hMTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJXSExPIikKICAgIGlJVE5PID0gKG1pLmluRGF0YS5nZXQoIklUTk8iKSA9PSBudWxsIHx8IG1pLmluRGF0YS5nZXQoIklUTk8iKS50cmltKCkuaXNFbXB0eSgpKSA/ICIiIDogbWkuaW5EYXRhLmdldCgiSVROTyIpCiAgICBpREFURSA9IChtaS5pbkRhdGEuZ2V0KCJEQVRFIikgPT0gbnVsbCB8fCBtaS5pbkRhdGEuZ2V0KCJEQVRFIikudHJpbSgpLmlzRW1wdHkoKSkgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkRBVEUiKQogICAgaVVQRFMgPSAobWkuaW5EYXRhLmdldCgiVVBEUyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiVVBEUyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gIjAiIDogbWkuaW5EYXRhLmdldCgiVVBEUyIpCgogICAgaUNPTk8gPSAobWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiQ09OTyIpLnRyaW0oKS5pc0VtcHR5KCkpID8gcHJvZ3JhbS5MREFaRC5DT05PIGFzIEludGVnZXIgOiBtaS5pbkRhdGEuZ2V0KCJDT05PIikgYXMgSW50ZWdlcgogICAgaU9SUTkgPSAobWkuaW5EYXRhLmdldCgiT1JROSIpID09IG51bGwgfHwgbWkuaW5EYXRhLmdldCgiT1JROSIpLnRyaW0oKS5pc0VtcHR5KCkpID8gMCA6IG1pLmluRGF0YS5nZXQoIk9SUTkiKSBhcyBJbnRlZ2VyCiAgICAKICAgIHZhbGlkYXRlSW5wdXQoKQogICAgaWYgKHZhbGlkSW5wdXQpIHsKICAgIHVwZGF0ZVJlY29yZCgpCiAgICB9CiAgfQogIAogICAgICAvKioKICAgKlZhbGlkYXRlIHJlY29yZHMgCiAgICogQHBhcmFtcyAKICAgKiBAcmV0dXJuIAogICAqLwogIHB1YmxpYyB2YWxpZGF0ZUlucHV0KCkgewogICAgLy9WYWxpZGF0ZSBDb21wYW55IE51bWJlcgogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgZGVmIGNhbGxiYWNrID0gewogICAgICBNYXAgPCBTdHJpbmcsCiAgICAgIFN0cmluZyA+IHJlc3BvbnNlIC0+CiAgICAgIGlmIChyZXNwb25zZS5DT05PID09IG51bGwpIHsKICAgICAgICBtaS5lcnJvcigiSW52YWxpZCBDb21wYW55IE51bWJlciAiICsgaUNPTk8pCiAgICAgICAgdmFsaWRJbnB1dCA9IGZhbHNlCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzA5NU1JIiwgIkdldCIsIHBhcmFtcywgY2FsbGJhY2spCgogICAgLy9WYWxpZGF0ZSBJdGVtIE51bWJlcgogICAgcGFyYW1zID0gWyJDT05PIjogaUNPTk8udG9TdHJpbmcoKS50cmltKCksIklUTk8iOmlJVE5PLnRvU3RyaW5nKCkudHJpbSgpXQogICAgY2FsbGJhY2sgPSB7CiAgICAgIE1hcCA8IFN0cmluZywKICAgICAgICBTdHJpbmcgPiByZXNwb25zZSAtPgogICAgICAgIGlmIChyZXNwb25zZS5JVE5PID09IG51bGwpIHsKICAgICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIEl0ZW0gTnVtYmVyICIgKyBpSVROTykKICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgfQogICAgCiAgICBtaUNhbGxlci5jYWxsKCJNTVMyMDBNSSIsICJHZXQiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgCiAgICAgLy9WYWxpZGF0ZSBXYXJlaG91c2UgTnVtYmVyCiAgICAgIHBhcmFtcyA9IFsiQ09OTyI6IGlDT05PLnRvU3RyaW5nKCkudHJpbSgpLCJXSExPIjppV0hMTy50b1N0cmluZygpLnRyaW0oKV0KICAgICAgY2FsbGJhY2sgPSB7CiAgICAgICAgTWFwIDwgU3RyaW5nLAogICAgICAgICAgU3RyaW5nID4gcmVzcG9uc2UgLT4KICAgICAgICAgIGlmIChyZXNwb25zZS5XSExPID09IG51bGwpIHsKICAgICAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgV2FyZWhvdXNlIE51bWJlciAiICsgaVdITE8pCiAgICAgICAgICAgIHZhbGlkSW5wdXQgPSBmYWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICAgIH0KICAgICAgfQogICAgICBtaUNhbGxlci5jYWxsKCJNTVMwMDVNSSIsICJHZXRXYXJlaG91c2UiLCBwYXJhbXMsIGNhbGxiYWNrKQogICAgICAKICAgIC8vVmFsaWRhdGUgREFURQogICAgU3RyaW5nIHNvdXJjZUZvcm1hdCA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiZ2V0RnVsbEZvcm1hdCIsIG1pLmdldERhdGVGb3JtYXQoKSkKICAgIHZhbGlkSW5wdXQgPSB1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgaURBVEUudHJpbSgpLCBzb3VyY2VGb3JtYXQudG9TdHJpbmcoKSkKICAgIGlmICghdmFsaWRJbnB1dCkgewogICAgICBtaS5lcnJvcigiT3JkZXIgRGF0ZSBub3QgaW4gIiArIHNvdXJjZUZvcm1hdCArICIgZm9ybWF0LiBQbGVhc2UgQ2hlY2sgIiArIGlEQVRFKQogICAgICByZXR1cm4gZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgIGlmICghc291cmNlRm9ybWF0LnRyaW0oKS5lcXVhbHMoInl5eXlNTWRkIikpIHsKICAgICAgICBpREFURSA9IHV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiY29udmVydERhdGUiLCBzb3VyY2VGb3JtYXQsICJ5eXl5TU1kZCIsIGlEQVRFLnRyaW0oKSkgLy9NYWludGFpbiBkYXRlIGluIFlNRDggZm9ybWF0IGluIHRoZSB0YWJsZQogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAqVXBkYXRlIHJlY29yZHMgdG8gRVhUUERUIHRhYmxlCiAgICogQHBhcmFtcyAKICAgKiBAcmV0dXJuIAogICAqLwogIHB1YmxpYyB1cGRhdGVSZWNvcmQoKSB7CiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFRQRFQiKS5pbmRleCgiMDAiKS5idWlsZCgpCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKQoKICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIGlDT05PKQogICAgY29udGFpbmVyLnNldCgiRVhXSExPIiwgaVdITE8pCiAgICBjb250YWluZXIuc2V0KCJFWElUTk8iLCBpSVROTykKICAgIGlmICghcXVlcnkucmVhZExvY2soY29udGFpbmVyLCB1cGRhdGVDYWxsQmFjaykpIHsKICAgICAgbWkuZXJyb3IoIlJlY29yZCBkb2VzIG5vdCBFeGlzdC4iKQogICAgICByZXR1cm4KICAgIH0KICB9CgogIENsb3N1cmUgPCA/ID4gdXBkYXRlQ2FsbEJhY2sgPSB7CiAgICBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+CiAgICBpbnQgQ0hOTyA9IGxvY2tlZFJlc3VsdC5nZXQoIkVYQ0hOTyIpCgogICAgaWYgKCFpREFURS50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpREFURS50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERBVEUiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERBVEUiLCBpREFURSkKICAgICAgfQogICAgfQogICAgaWYgKCFpVVBEUy50cmltKCkuaXNFbXB0eSgpKSB7CiAgICAgIGlmIChpVVBEUy50cmltKCkuZXF1YWxzKCI/IikpIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVQRFMiLCAiIikKICAgICAgfSBlbHNlIHsKICAgICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWFVQRFMiLCBpVVBEUykKICAgICAgfQogICAgfQogICAgCiAgICBpZiAobWkuaW5EYXRhLmdldCgiT1JROSIpIT1udWxsJiYhbWkuaW5EYXRhLmdldCgiT1JROSIpLnRyaW0oKS5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhPUlE5IiwgaU9SUTkpCiAgICAgICAgfQoKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpCiAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNVE0iLCBMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSkKICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKQogICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSE5PIiwgQ0hOTysxKQogICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpCiAgfQoKCn0="}}}